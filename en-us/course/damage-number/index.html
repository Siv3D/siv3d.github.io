
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Siv3D: A C++ Framework for Creative Coding">
      
      
        <meta name="author" content="Ryo Suzuki">
      
      
        <link rel="canonical" href="https://siv3d.github.io/en-us/course/damage-number/">
      
      
        <link rel="prev" href="../quadwarp/">
      
      
        <link rel="next" href="../random-painting/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Creating Original Damage Effects - Siv3D</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="siv3d" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-original-damage-effects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Siv3D" class="md-header__button md-logo" aria-label="Siv3D" data-md-component="logo">
      
  <img src="../../assets/code-white-48dp.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Siv3D
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creating Original Damage Effects
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="https://siv3d.github.io/ja-jp/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="https://siv3d.github.io/en-us/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Siv3D/OpenSiv3D" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Siv3D/OpenSiv3D
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Siv3D" class="md-nav__button md-logo" aria-label="Siv3D" data-md-component="logo">
      
  <img src="../../assets/code-white-48dp.svg" alt="logo">

    </a>
    Siv3D
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Siv3D/OpenSiv3D" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Siv3D/OpenSiv3D
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get Started with Siv3D
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Features
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Download
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Download
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../download/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Windows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../download/macos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    macOS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../download/ubuntu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ubuntu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../download/web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial Chapters 1-20
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorial Chapters 1-20
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/hello/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Your First Siv3D Program
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/samples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Try Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3. Siv3D Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/main/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Main Function and Main Loop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Application Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/print/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6. Simple Output
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/basic-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7. Basic Types and Classes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8. Changing the Background Color
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/scene/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9. Screen and Coordinates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/circle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10. Drawing Circles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/rect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11. Drawing Rectangles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12. Drawing Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/emoji/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13. Drawing Emojis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/motion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14. Moving Shapes and Emojis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15. Displaying Text
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/mouse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16. Handling Mouse Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/keyboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17. Handling Keyboard Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/random/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    18. Generating Random Numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    19. Handling Time
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/click/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    20. Project: A Simple Clicker Game
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial Chapters 21-40
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tutorial Chapters 21-40
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/utility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21. Useful Functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/array/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    22. Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/shape-array/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    23. Arrays of Shapes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/intersection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    24. Shape Intersection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/collect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    25. Project: Item Collection Game
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/shape/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    26. Drawing Shapes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/shape-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    27. Shape Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/button/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    28. Buttons
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/cookie-clicker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    29. Cookie Clicker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    30. Time and Motion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/texture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    31. Drawing Textures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    32. Drawing Videos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/string/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    33. String Class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/font/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    34. Drawing Text
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/optional/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    35. Optional Values
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/format/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    36. Formatting and Parsing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/grid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    37. Two-Dimensional Arrays
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/gui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    38. GUI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/random/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    39. Random
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial2/interaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    40. Creating Interactive UI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial Chapters 41-60
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Tutorial Chapters 41-60
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/audio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    41. Audio Playback
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/keyboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    42. Advanced Keyboard Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/mouse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    43. Advanced Mouse Input
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/scene/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    44. Scene and Window
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/geometry2d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    45. Shape Intersection Detection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/hashset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    46. Hash Set
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/hashtable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    47. Hash Table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/2d-render-state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    48. 2D Render States
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/camera2d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    49. 2D Camera and Transformations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/asset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    50. Asset Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/effect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    51. Effects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/render-texture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    52. Render Texture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    53. File System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/text-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    54. Text Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/config-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    55. Configuration Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/binary-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    56. Binary Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    57. Embedded Resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/scene-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    58. Scene Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/gamepad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    59. Gamepad
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial3/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    60. Distributing Your Application
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial Chapters 61-80
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Tutorial Chapters 61-80
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/file-dialog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    61. File Dialogs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/http/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    62. HTTP Client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    63. Image Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/dragdrop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    64. Drag & Drop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/clipboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    65. Clipboard
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/user/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    66. Accessing System and User Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/openai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    67. OpenAI API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/shiritori/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    68. Project: AI Shiritori (Word Chain Game)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/physics2d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    69. 2D Physics Simulation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/microphone/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    70. Microphone and Audio Waveforms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/webcam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    71. Webcam
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/serial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    72. Serial Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/osc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    73. OSC Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/tcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    74. TCP Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/multiplayer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    75. Multiplayer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/async/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    76. Asynchronous Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/mathparser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    77. Math Parser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/qr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    78. QR Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/tts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    79. Text-to-Speech
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial4/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    80. Efficient Rendering
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial Chapters 81-
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Tutorial Chapters 81-
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial5/messagebox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    81. Message Box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial5/wip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Future Update Plans
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sample Collection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Sample Collection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/games/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Game Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Application Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Service Integration Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/shapes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shape Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/2d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2D Drawing Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Text Display Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UI Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/visualize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Visualization Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/motion-graphics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Motion Graphics Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/addon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Add-on Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/sound/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sound Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/physics2d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2D Physics Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/3d/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3D Drawing Samples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/gamelauncher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a Game Launcher
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" checked>
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Courses
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Courses
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calculator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building a Calculator App
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../polymorphism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilizing Polymorphism
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../radar-chart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Radar Chart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quadwarp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a Perspective UI with QuadWarp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Creating Original Damage Effects
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Creating Original Damage Effects
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-mockup-battle-scene" class="md-nav__link">
    <span class="md-ellipsis">
      1. Mockup Battle Scene
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-attack-and-damage-display" class="md-nav__link">
    <span class="md-ellipsis">
      2. Attack and Damage Display
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-change-color-by-attribute" class="md-nav__link">
    <span class="md-ellipsis">
      3. Change Color by Attribute
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-change-size-by-damage-amount" class="md-nav__link">
    <span class="md-ellipsis">
      4. Change Size by Damage Amount
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-add-outline-to-text" class="md-nav__link">
    <span class="md-ellipsis">
      5. Add Outline to Text
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-italicize-text" class="md-nav__link">
    <span class="md-ellipsis">
      6. Italicize Text
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-fade-out-effect" class="md-nav__link">
    <span class="md-ellipsis">
      7. Fade Out Effect
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-appearance-effect" class="md-nav__link">
    <span class="md-ellipsis">
      8. Appearance Effect
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-display-simultaneous-damage-with-delay" class="md-nav__link">
    <span class="md-ellipsis">
      9. Display Simultaneous Damage with Delay
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-add-gradients" class="md-nav__link">
    <span class="md-ellipsis">
      10. Add Gradients
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-character-level-motion" class="md-nav__link">
    <span class="md-ellipsis">
      11. Character-level Motion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-useful-tutorials" class="md-nav__link">
    <span class="md-ellipsis">
      12. Useful Tutorials
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../random-painting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Random Painting to Match a Reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/classes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Class List
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Articles
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Articles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing Projects with GitHub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/game_tips/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Game Development Tips
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/messagebox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Message Box
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrating Custom Classes with Siv3D
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/helloworld/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    21 Ways to Say Hello World in Siv3D
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/avoid-global-variable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Some Siv3D Classes Cannot Be Global
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/polymorphism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programming with Polymorphism
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/community/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Past Events
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Useful Tools for Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Useful Tools for Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/palette/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Palette Browser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/emoji/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Emoji and Icon Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/easing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Easing Functions Cheat Sheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/gist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Gist
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/cosense/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cosense
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/gamebar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Xbox Game Bar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/vscoloroutput/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VSColorOutput
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/gitignore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    .gitignore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/hot-reload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hot Reload
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/msvc-exception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging: Displaying Exception Locations in Visual Studio
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing to Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Contributing to Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/report/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reports and Suggestions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Build Instructions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/commit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Contribution Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../develop/coding-style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coding Style
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Events
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../event/gamejam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Game Jam 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../event/gamejam2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Game Jam 2025 Award Winners
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../event/gamejam2023info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Game Jam 2023
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../event/gamejam2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Siv3D Game Jam 2023 Award Winners
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Corporate Sponsorship
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Corporate Sponsorship
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sponsorship/corporate-sponsor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Corporate Partners & Sponsorship
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sponsorship/corporate-sponsor-guideline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sponsorship Benefits
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../steam/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Steam
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mascot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mascot: Siv3D-kun
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../social-contribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Social Contribution
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../acknowledgments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Acknowledgments
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-mockup-battle-scene" class="md-nav__link">
    <span class="md-ellipsis">
      1. Mockup Battle Scene
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-attack-and-damage-display" class="md-nav__link">
    <span class="md-ellipsis">
      2. Attack and Damage Display
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-change-color-by-attribute" class="md-nav__link">
    <span class="md-ellipsis">
      3. Change Color by Attribute
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-change-size-by-damage-amount" class="md-nav__link">
    <span class="md-ellipsis">
      4. Change Size by Damage Amount
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-add-outline-to-text" class="md-nav__link">
    <span class="md-ellipsis">
      5. Add Outline to Text
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-italicize-text" class="md-nav__link">
    <span class="md-ellipsis">
      6. Italicize Text
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-fade-out-effect" class="md-nav__link">
    <span class="md-ellipsis">
      7. Fade Out Effect
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-appearance-effect" class="md-nav__link">
    <span class="md-ellipsis">
      8. Appearance Effect
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-display-simultaneous-damage-with-delay" class="md-nav__link">
    <span class="md-ellipsis">
      9. Display Simultaneous Damage with Delay
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-add-gradients" class="md-nav__link">
    <span class="md-ellipsis">
      10. Add Gradients
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-character-level-motion" class="md-nav__link">
    <span class="md-ellipsis">
      11. Character-level Motion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-useful-tutorials" class="md-nav__link">
    <span class="md-ellipsis">
      12. Useful Tutorials
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="creating-original-damage-effects">Creating Original Damage Effects<a class="headerlink" href="#creating-original-damage-effects" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><strong>Difficulty</strong></td>
<td style="text-align: center;">Intermediate</td>
<td style="text-align: center;"><strong>Time</strong></td>
<td style="text-align: center;">90 min+</td>
</tr>
</tbody>
</table>
<p>In RPGs and action games, "damage numbers" pop out the instant an attack hits an enemy. There is a world of difference in player satisfaction between simply displaying a static number and crafting a polished effect with attention to motion and color.</p>
<p>In this course, you will programmatically control the movement, scaling, and color transitions of these numbers to create your very own "satisfying hit effects." If you feel your game looks a bit plain, let's solve that problem in just 90 minutes. Experience the joy of breathing life into your game screen through creative ideas and clever implementation.</p>
<details class="info">
<summary>Reference Case: 'Xenoblade Chronicles 3'</summary>
<p><iframe width="100%" height="315" src="https://www.youtube.com/embed/0sB_VO-0gZ4?si=ODAqjSpp5_DJNxvF&rel=0&loop=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>
</details>
<details class="info">
<summary>Reference Case: 'Honkai: Star Rail'</summary>
<p><iframe width="100%" height="315" src="https://www.youtube.com/embed/sEheUxvfGDM?si=jfNaDs_FSoNpgkBK" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>
</details>
<details class="info">
<summary>Reference Case: 'FINAL FANTASY XV'</summary>
<p><iframe width="100%" height="315" src="https://www.youtube.com/embed/JIYkBDHnPQw?si=bNdazqVbpEm9DFI-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></p>
</details>
<h2 id="1-mockup-battle-scene">1. Mockup Battle Scene<a class="headerlink" href="#1-mockup-battle-scene" title="Permanent link">&para;</a></h2>
<ul>
<li>First, we prepare a testing ground to experiment with the effects.</li>
<li>We will draw a background, place an enemy character (Siv3D mascot "Siv3D-kun"), and implement a damage input pad where attack detection occurs upon clicking.</li>
<li>At this stage, attacking only produces debug output in the top left of the screen; no damage is displayed over the enemy yet.</li>
<li>We will use this as a base and gradually make the effects more impressive.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/1.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">{</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="p">};</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="p">{</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="p">};</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="p">{</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-0-77" name="__codelineno-0-77" href="#__codelineno-0-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-78" name="__codelineno-0-78" href="#__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79" href="#__codelineno-0-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-0-80" name="__codelineno-0-80" href="#__codelineno-0-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81" href="#__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82" href="#__codelineno-0-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-0-83" name="__codelineno-0-83" href="#__codelineno-0-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-84" name="__codelineno-0-84" href="#__codelineno-0-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-0-85" name="__codelineno-0-85" href="#__codelineno-0-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-0-86" name="__codelineno-0-86" href="#__codelineno-0-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-0-87" name="__codelineno-0-87" href="#__codelineno-0-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-0-88" name="__codelineno-0-88" href="#__codelineno-0-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-0-89" name="__codelineno-0-89" href="#__codelineno-0-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-90" name="__codelineno-0-90" href="#__codelineno-0-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-0-91" name="__codelineno-0-91" href="#__codelineno-0-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-92" name="__codelineno-0-92" href="#__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93" href="#__codelineno-0-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-0-94" name="__codelineno-0-94" href="#__codelineno-0-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-0-95" name="__codelineno-0-95" href="#__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96" href="#__codelineno-0-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-0-97" name="__codelineno-0-97" href="#__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98" href="#__codelineno-0-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-0-99" name="__codelineno-0-99" href="#__codelineno-0-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-100" name="__codelineno-0-100" href="#__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101" href="#__codelineno-0-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-0-102" name="__codelineno-0-102" href="#__codelineno-0-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-0-103" name="__codelineno-0-103" href="#__codelineno-0-103"></a><span class="p">};</span>
<a id="__codelineno-0-104" name="__codelineno-0-104" href="#__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105" href="#__codelineno-0-105"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-0-106" name="__codelineno-0-106" href="#__codelineno-0-106"></a><span class="p">{</span>
<a id="__codelineno-0-107" name="__codelineno-0-107" href="#__codelineno-0-107"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-0-108" name="__codelineno-0-108" href="#__codelineno-0-108"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-0-109" name="__codelineno-0-109" href="#__codelineno-0-109"></a>
<a id="__codelineno-0-110" name="__codelineno-0-110" href="#__codelineno-0-110"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-0-111" name="__codelineno-0-111" href="#__codelineno-0-111"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-112" name="__codelineno-0-112" href="#__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113" href="#__codelineno-0-113"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-0-114" name="__codelineno-0-114" href="#__codelineno-0-114"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-115" name="__codelineno-0-115" href="#__codelineno-0-115"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-116" name="__codelineno-0-116" href="#__codelineno-0-116"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-117" name="__codelineno-0-117" href="#__codelineno-0-117"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-118" name="__codelineno-0-118" href="#__codelineno-0-118"></a>
<a id="__codelineno-0-119" name="__codelineno-0-119" href="#__codelineno-0-119"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-0-120" name="__codelineno-0-120" href="#__codelineno-0-120"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-121" name="__codelineno-0-121" href="#__codelineno-0-121"></a>
<a id="__codelineno-0-122" name="__codelineno-0-122" href="#__codelineno-0-122"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-0-123" name="__codelineno-0-123" href="#__codelineno-0-123"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-0-124" name="__codelineno-0-124" href="#__codelineno-0-124"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-0-125" name="__codelineno-0-125" href="#__codelineno-0-125"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-0-126" name="__codelineno-0-126" href="#__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127" href="#__codelineno-0-127"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-0-128" name="__codelineno-0-128" href="#__codelineno-0-128"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-0-129" name="__codelineno-0-129" href="#__codelineno-0-129"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-0-130" name="__codelineno-0-130" href="#__codelineno-0-130"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-131" name="__codelineno-0-131" href="#__codelineno-0-131"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-0-132" name="__codelineno-0-132" href="#__codelineno-0-132"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-0-133" name="__codelineno-0-133" href="#__codelineno-0-133"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-134" name="__codelineno-0-134" href="#__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135" href="#__codelineno-0-135"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-0-136" name="__codelineno-0-136" href="#__codelineno-0-136"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-137" name="__codelineno-0-137" href="#__codelineno-0-137"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-0-138" name="__codelineno-0-138" href="#__codelineno-0-138"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-0-139" name="__codelineno-0-139" href="#__codelineno-0-139"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-140" name="__codelineno-0-140" href="#__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141" href="#__codelineno-0-141"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-0-142" name="__codelineno-0-142" href="#__codelineno-0-142"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143" href="#__codelineno-0-143"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-144" name="__codelineno-0-144" href="#__codelineno-0-144"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-0-145" name="__codelineno-0-145" href="#__codelineno-0-145"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-0-146" name="__codelineno-0-146" href="#__codelineno-0-146"></a>
<a id="__codelineno-0-147" name="__codelineno-0-147" href="#__codelineno-0-147"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-0-148" name="__codelineno-0-148" href="#__codelineno-0-148"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-0-149" name="__codelineno-0-149" href="#__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150" href="#__codelineno-0-150"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-0-151" name="__codelineno-0-151" href="#__codelineno-0-151"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-0-152" name="__codelineno-0-152" href="#__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153" href="#__codelineno-0-153"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-0-154" name="__codelineno-0-154" href="#__codelineno-0-154"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-0-155" name="__codelineno-0-155" href="#__codelineno-0-155"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-156" name="__codelineno-0-156" href="#__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157" href="#__codelineno-0-157"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-0-158" name="__codelineno-0-158" href="#__codelineno-0-158"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-159" name="__codelineno-0-159" href="#__codelineno-0-159"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-0-160" name="__codelineno-0-160" href="#__codelineno-0-160"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-0-161" name="__codelineno-0-161" href="#__codelineno-0-161"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-0-162" name="__codelineno-0-162" href="#__codelineno-0-162"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-163" name="__codelineno-0-163" href="#__codelineno-0-163"></a>
<a id="__codelineno-0-164" name="__codelineno-0-164" href="#__codelineno-0-164"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-0-165" name="__codelineno-0-165" href="#__codelineno-0-165"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-0-166" name="__codelineno-0-166" href="#__codelineno-0-166"></a><span class="w">			</span><span class="c1">// Debug output hit list</span>
<a id="__codelineno-0-167" name="__codelineno-0-167" href="#__codelineno-0-167"></a><span class="w">			</span><span class="n">Print</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">hit</span><span class="p">.</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;(Critical)&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<a id="__codelineno-0-168" name="__codelineno-0-168" href="#__codelineno-0-168"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-0-169" name="__codelineno-0-169" href="#__codelineno-0-169"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-0-170" name="__codelineno-0-170" href="#__codelineno-0-170"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="2-attack-and-damage-display">2. Attack and Damage Display<a class="headerlink" href="#2-attack-and-damage-display" title="Permanent link">&para;</a></h2>
<ul>
<li>We stop using the debug display and change it to draw numbers directly within the battle screen.</li>
<li>Using the <code>Effect</code> feature, we spawn a damage amount effect at the location where the attack hit.</li>
<li>Although it is still a simple appearance showing white numbers, the basic form of "results appearing over the enemy" is established.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/2.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="p">};</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="p">{</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="p">};</span>
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="p">{</span>
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a>
<a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a>
<a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a>
<a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-1-62" name="__codelineno-1-62" href="#__codelineno-1-62"></a>
<a id="__codelineno-1-63" name="__codelineno-1-63" href="#__codelineno-1-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-1-64" name="__codelineno-1-64" href="#__codelineno-1-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-1-65" name="__codelineno-1-65" href="#__codelineno-1-65"></a>
<a id="__codelineno-1-66" name="__codelineno-1-66" href="#__codelineno-1-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-1-67" name="__codelineno-1-67" href="#__codelineno-1-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-1-68" name="__codelineno-1-68" href="#__codelineno-1-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-69" name="__codelineno-1-69" href="#__codelineno-1-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-1-70" name="__codelineno-1-70" href="#__codelineno-1-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-1-71" name="__codelineno-1-71" href="#__codelineno-1-71"></a>
<a id="__codelineno-1-72" name="__codelineno-1-72" href="#__codelineno-1-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-1-73" name="__codelineno-1-73" href="#__codelineno-1-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-1-74" name="__codelineno-1-74" href="#__codelineno-1-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-1-75" name="__codelineno-1-75" href="#__codelineno-1-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-1-76" name="__codelineno-1-76" href="#__codelineno-1-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-1-77" name="__codelineno-1-77" href="#__codelineno-1-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-78" name="__codelineno-1-78" href="#__codelineno-1-78"></a>
<a id="__codelineno-1-79" name="__codelineno-1-79" href="#__codelineno-1-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-1-80" name="__codelineno-1-80" href="#__codelineno-1-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-1-81" name="__codelineno-1-81" href="#__codelineno-1-81"></a>
<a id="__codelineno-1-82" name="__codelineno-1-82" href="#__codelineno-1-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-1-83" name="__codelineno-1-83" href="#__codelineno-1-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-84" name="__codelineno-1-84" href="#__codelineno-1-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-1-85" name="__codelineno-1-85" href="#__codelineno-1-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-1-86" name="__codelineno-1-86" href="#__codelineno-1-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-1-87" name="__codelineno-1-87" href="#__codelineno-1-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-1-88" name="__codelineno-1-88" href="#__codelineno-1-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-1-89" name="__codelineno-1-89" href="#__codelineno-1-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-90" name="__codelineno-1-90" href="#__codelineno-1-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-1-91" name="__codelineno-1-91" href="#__codelineno-1-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-92" name="__codelineno-1-92" href="#__codelineno-1-92"></a>
<a id="__codelineno-1-93" name="__codelineno-1-93" href="#__codelineno-1-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-1-94" name="__codelineno-1-94" href="#__codelineno-1-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-1-95" name="__codelineno-1-95" href="#__codelineno-1-95"></a>
<a id="__codelineno-1-96" name="__codelineno-1-96" href="#__codelineno-1-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-1-97" name="__codelineno-1-97" href="#__codelineno-1-97"></a>
<a id="__codelineno-1-98" name="__codelineno-1-98" href="#__codelineno-1-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-1-99" name="__codelineno-1-99" href="#__codelineno-1-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-100" name="__codelineno-1-100" href="#__codelineno-1-100"></a>
<a id="__codelineno-1-101" name="__codelineno-1-101" href="#__codelineno-1-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-1-102" name="__codelineno-1-102" href="#__codelineno-1-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-1-103" name="__codelineno-1-103" href="#__codelineno-1-103"></a><span class="p">};</span>
<a id="__codelineno-1-104" name="__codelineno-1-104" href="#__codelineno-1-104"></a>
<a id="__codelineno-1-105" name="__codelineno-1-105" href="#__codelineno-1-105"></a><span class="hll"><span class="c1">/// @brief Damage Display Effect</span>
</span><a id="__codelineno-1-106" name="__codelineno-1-106" href="#__codelineno-1-106"></a><span class="hll"><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
</span><a id="__codelineno-1-107" name="__codelineno-1-107" href="#__codelineno-1-107"></a><span class="hll"><span class="p">{</span>
</span><a id="__codelineno-1-108" name="__codelineno-1-108" href="#__codelineno-1-108"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
</span><a id="__codelineno-1-109" name="__codelineno-1-109" href="#__codelineno-1-109"></a><span class="hll"><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
</span><a id="__codelineno-1-110" name="__codelineno-1-110" href="#__codelineno-1-110"></a><span class="hll">
</span><a id="__codelineno-1-111" name="__codelineno-1-111" href="#__codelineno-1-111"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Hit information</span>
</span><a id="__codelineno-1-112" name="__codelineno-1-112" href="#__codelineno-1-112"></a><span class="hll"><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
</span><a id="__codelineno-1-113" name="__codelineno-1-113" href="#__codelineno-1-113"></a><span class="hll">
</span><a id="__codelineno-1-114" name="__codelineno-1-114" href="#__codelineno-1-114"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
</span><a id="__codelineno-1-115" name="__codelineno-1-115" href="#__codelineno-1-115"></a><span class="hll"><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
</span><a id="__codelineno-1-116" name="__codelineno-1-116" href="#__codelineno-1-116"></a><span class="hll">
</span><a id="__codelineno-1-117" name="__codelineno-1-117" href="#__codelineno-1-117"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Font</span>
</span><a id="__codelineno-1-118" name="__codelineno-1-118" href="#__codelineno-1-118"></a><span class="hll"><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
</span><a id="__codelineno-1-119" name="__codelineno-1-119" href="#__codelineno-1-119"></a><span class="hll">
</span><a id="__codelineno-1-120" name="__codelineno-1-120" href="#__codelineno-1-120"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Constructor</span>
</span><a id="__codelineno-1-121" name="__codelineno-1-121" href="#__codelineno-1-121"></a><span class="hll"><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
</span><a id="__codelineno-1-122" name="__codelineno-1-122" href="#__codelineno-1-122"></a><span class="hll"><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
</span><a id="__codelineno-1-123" name="__codelineno-1-123" href="#__codelineno-1-123"></a><span class="hll"><span class="w">	</span><span class="c1">/// @param font Font</span>
</span><a id="__codelineno-1-124" name="__codelineno-1-124" href="#__codelineno-1-124"></a><span class="hll"><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
</span><a id="__codelineno-1-125" name="__codelineno-1-125" href="#__codelineno-1-125"></a><span class="hll"><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
</span><a id="__codelineno-1-126" name="__codelineno-1-126" href="#__codelineno-1-126"></a><span class="hll"><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
</span><a id="__codelineno-1-127" name="__codelineno-1-127" href="#__codelineno-1-127"></a><span class="hll"><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
</span><a id="__codelineno-1-128" name="__codelineno-1-128" href="#__codelineno-1-128"></a><span class="hll">
</span><a id="__codelineno-1-129" name="__codelineno-1-129" href="#__codelineno-1-129"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
</span><a id="__codelineno-1-130" name="__codelineno-1-130" href="#__codelineno-1-130"></a><span class="hll"><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
</span><a id="__codelineno-1-131" name="__codelineno-1-131" href="#__codelineno-1-131"></a><span class="hll"><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
</span><a id="__codelineno-1-132" name="__codelineno-1-132" href="#__codelineno-1-132"></a><span class="hll"><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
</span><a id="__codelineno-1-133" name="__codelineno-1-133" href="#__codelineno-1-133"></a><span class="hll"><span class="w">	</span><span class="p">{</span>
</span><a id="__codelineno-1-134" name="__codelineno-1-134" href="#__codelineno-1-134"></a><span class="hll"><span class="w">		</span><span class="c1">// Base color</span>
</span><a id="__codelineno-1-135" name="__codelineno-1-135" href="#__codelineno-1-135"></a><span class="hll"><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">};</span>
</span><a id="__codelineno-1-136" name="__codelineno-1-136" href="#__codelineno-1-136"></a><span class="hll">
</span><a id="__codelineno-1-137" name="__codelineno-1-137" href="#__codelineno-1-137"></a><span class="hll"><span class="w">		</span><span class="c1">// Text size</span>
</span><a id="__codelineno-1-138" name="__codelineno-1-138" href="#__codelineno-1-138"></a><span class="hll"><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">40.0</span><span class="p">;</span>
</span><a id="__codelineno-1-139" name="__codelineno-1-139" href="#__codelineno-1-139"></a><span class="hll">
</span><a id="__codelineno-1-140" name="__codelineno-1-140" href="#__codelineno-1-140"></a><span class="hll"><span class="w">		</span><span class="c1">// Draw position</span>
</span><a id="__codelineno-1-141" name="__codelineno-1-141" href="#__codelineno-1-141"></a><span class="hll"><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
</span><a id="__codelineno-1-142" name="__codelineno-1-142" href="#__codelineno-1-142"></a><span class="hll">
</span><a id="__codelineno-1-143" name="__codelineno-1-143" href="#__codelineno-1-143"></a><span class="hll"><span class="w">		</span><span class="c1">// Draw number</span>
</span><a id="__codelineno-1-144" name="__codelineno-1-144" href="#__codelineno-1-144"></a><span class="hll"><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
</span><a id="__codelineno-1-145" name="__codelineno-1-145" href="#__codelineno-1-145"></a><span class="hll">
</span><a id="__codelineno-1-146" name="__codelineno-1-146" href="#__codelineno-1-146"></a><span class="hll"><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
</span><a id="__codelineno-1-147" name="__codelineno-1-147" href="#__codelineno-1-147"></a><span class="hll"><span class="w">	</span><span class="p">}</span>
</span><a id="__codelineno-1-148" name="__codelineno-1-148" href="#__codelineno-1-148"></a><span class="hll"><span class="p">};</span>
</span><a id="__codelineno-1-149" name="__codelineno-1-149" href="#__codelineno-1-149"></a>
<a id="__codelineno-1-150" name="__codelineno-1-150" href="#__codelineno-1-150"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-1-151" name="__codelineno-1-151" href="#__codelineno-1-151"></a><span class="p">{</span>
<a id="__codelineno-1-152" name="__codelineno-1-152" href="#__codelineno-1-152"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-1-153" name="__codelineno-1-153" href="#__codelineno-1-153"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-1-154" name="__codelineno-1-154" href="#__codelineno-1-154"></a>
<a id="__codelineno-1-155" name="__codelineno-1-155" href="#__codelineno-1-155"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-1-156" name="__codelineno-1-156" href="#__codelineno-1-156"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-157" name="__codelineno-1-157" href="#__codelineno-1-157"></a>
<a id="__codelineno-1-158" name="__codelineno-1-158" href="#__codelineno-1-158"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-1-159" name="__codelineno-1-159" href="#__codelineno-1-159"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-160" name="__codelineno-1-160" href="#__codelineno-1-160"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-161" name="__codelineno-1-161" href="#__codelineno-1-161"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-162" name="__codelineno-1-162" href="#__codelineno-1-162"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-163" name="__codelineno-1-163" href="#__codelineno-1-163"></a>
<a id="__codelineno-1-164" name="__codelineno-1-164" href="#__codelineno-1-164"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-1-165" name="__codelineno-1-165" href="#__codelineno-1-165"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-166" name="__codelineno-1-166" href="#__codelineno-1-166"></a>
<a id="__codelineno-1-167" name="__codelineno-1-167" href="#__codelineno-1-167"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-1-168" name="__codelineno-1-168" href="#__codelineno-1-168"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-1-169" name="__codelineno-1-169" href="#__codelineno-1-169"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-1-170" name="__codelineno-1-170" href="#__codelineno-1-170"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-1-171" name="__codelineno-1-171" href="#__codelineno-1-171"></a>
<a id="__codelineno-1-172" name="__codelineno-1-172" href="#__codelineno-1-172"></a><span class="hll"><span class="w">	</span><span class="c1">// Font for effect</span>
</span><a id="__codelineno-1-173" name="__codelineno-1-173" href="#__codelineno-1-173"></a><span class="hll"><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><a id="__codelineno-1-174" name="__codelineno-1-174" href="#__codelineno-1-174"></a><span class="hll"><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
</span><a id="__codelineno-1-175" name="__codelineno-1-175" href="#__codelineno-1-175"></a>
<a id="__codelineno-1-176" name="__codelineno-1-176" href="#__codelineno-1-176"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-1-177" name="__codelineno-1-177" href="#__codelineno-1-177"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-1-178" name="__codelineno-1-178" href="#__codelineno-1-178"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-1-179" name="__codelineno-1-179" href="#__codelineno-1-179"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-180" name="__codelineno-1-180" href="#__codelineno-1-180"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-1-181" name="__codelineno-1-181" href="#__codelineno-1-181"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-1-182" name="__codelineno-1-182" href="#__codelineno-1-182"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-183" name="__codelineno-1-183" href="#__codelineno-1-183"></a>
<a id="__codelineno-1-184" name="__codelineno-1-184" href="#__codelineno-1-184"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-1-185" name="__codelineno-1-185" href="#__codelineno-1-185"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-186" name="__codelineno-1-186" href="#__codelineno-1-186"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-1-187" name="__codelineno-1-187" href="#__codelineno-1-187"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-1-188" name="__codelineno-1-188" href="#__codelineno-1-188"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-189" name="__codelineno-1-189" href="#__codelineno-1-189"></a>
<a id="__codelineno-1-190" name="__codelineno-1-190" href="#__codelineno-1-190"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-1-191" name="__codelineno-1-191" href="#__codelineno-1-191"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-1-192" name="__codelineno-1-192" href="#__codelineno-1-192"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-193" name="__codelineno-1-193" href="#__codelineno-1-193"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-1-194" name="__codelineno-1-194" href="#__codelineno-1-194"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-1-195" name="__codelineno-1-195" href="#__codelineno-1-195"></a>
<a id="__codelineno-1-196" name="__codelineno-1-196" href="#__codelineno-1-196"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-1-197" name="__codelineno-1-197" href="#__codelineno-1-197"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-1-198" name="__codelineno-1-198" href="#__codelineno-1-198"></a>
<a id="__codelineno-1-199" name="__codelineno-1-199" href="#__codelineno-1-199"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-1-200" name="__codelineno-1-200" href="#__codelineno-1-200"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-1-201" name="__codelineno-1-201" href="#__codelineno-1-201"></a>
<a id="__codelineno-1-202" name="__codelineno-1-202" href="#__codelineno-1-202"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-1-203" name="__codelineno-1-203" href="#__codelineno-1-203"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-1-204" name="__codelineno-1-204" href="#__codelineno-1-204"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-205" name="__codelineno-1-205" href="#__codelineno-1-205"></a>
<a id="__codelineno-1-206" name="__codelineno-1-206" href="#__codelineno-1-206"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-1-207" name="__codelineno-1-207" href="#__codelineno-1-207"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-208" name="__codelineno-1-208" href="#__codelineno-1-208"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-1-209" name="__codelineno-1-209" href="#__codelineno-1-209"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-1-210" name="__codelineno-1-210" href="#__codelineno-1-210"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-1-211" name="__codelineno-1-211" href="#__codelineno-1-211"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-212" name="__codelineno-1-212" href="#__codelineno-1-212"></a>
<a id="__codelineno-1-213" name="__codelineno-1-213" href="#__codelineno-1-213"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-1-214" name="__codelineno-1-214" href="#__codelineno-1-214"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-1-215" name="__codelineno-1-215" href="#__codelineno-1-215"></a><span class="hll"><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
</span><a id="__codelineno-1-216" name="__codelineno-1-216" href="#__codelineno-1-216"></a><span class="hll"><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
</span><a id="__codelineno-1-217" name="__codelineno-1-217" href="#__codelineno-1-217"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-1-218" name="__codelineno-1-218" href="#__codelineno-1-218"></a>
<a id="__codelineno-1-219" name="__codelineno-1-219" href="#__codelineno-1-219"></a><span class="hll"><span class="w">		</span><span class="c1">// Update and draw effects</span>
</span><a id="__codelineno-1-220" name="__codelineno-1-220" href="#__codelineno-1-220"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-1-221" name="__codelineno-1-221" href="#__codelineno-1-221"></a><span class="hll"><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
</span><a id="__codelineno-1-222" name="__codelineno-1-222" href="#__codelineno-1-222"></a><span class="hll"><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
</span><a id="__codelineno-1-223" name="__codelineno-1-223" href="#__codelineno-1-223"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-1-224" name="__codelineno-1-224" href="#__codelineno-1-224"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-1-225" name="__codelineno-1-225" href="#__codelineno-1-225"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="3-change-color-by-attribute">3. Change Color by Attribute<a class="headerlink" href="#3-change-color-by-attribute" title="Permanent link">&para;</a></h2>
<ul>
<li>We change the color of the numbers based on the type of attack, such as "Red for Fire", "Blue for Ice".</li>
<li>Organizing information by color is important for the player to intuitively understand "what attribute the current attack was." We add functional design to convey the game state, rather than just simple decoration.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/3.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">{</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="p">};</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="p">{</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="p">};</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="p">{</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a>
<a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>
<a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a>
<a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a>
<a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-2-59" name="__codelineno-2-59" href="#__codelineno-2-59"></a>
<a id="__codelineno-2-60" name="__codelineno-2-60" href="#__codelineno-2-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-2-61" name="__codelineno-2-61" href="#__codelineno-2-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-2-62" name="__codelineno-2-62" href="#__codelineno-2-62"></a>
<a id="__codelineno-2-63" name="__codelineno-2-63" href="#__codelineno-2-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-2-64" name="__codelineno-2-64" href="#__codelineno-2-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-2-65" name="__codelineno-2-65" href="#__codelineno-2-65"></a>
<a id="__codelineno-2-66" name="__codelineno-2-66" href="#__codelineno-2-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-2-67" name="__codelineno-2-67" href="#__codelineno-2-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-2-68" name="__codelineno-2-68" href="#__codelineno-2-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-69" name="__codelineno-2-69" href="#__codelineno-2-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-2-70" name="__codelineno-2-70" href="#__codelineno-2-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-2-71" name="__codelineno-2-71" href="#__codelineno-2-71"></a>
<a id="__codelineno-2-72" name="__codelineno-2-72" href="#__codelineno-2-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-2-73" name="__codelineno-2-73" href="#__codelineno-2-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-2-74" name="__codelineno-2-74" href="#__codelineno-2-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-2-75" name="__codelineno-2-75" href="#__codelineno-2-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-2-76" name="__codelineno-2-76" href="#__codelineno-2-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-2-77" name="__codelineno-2-77" href="#__codelineno-2-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-78" name="__codelineno-2-78" href="#__codelineno-2-78"></a>
<a id="__codelineno-2-79" name="__codelineno-2-79" href="#__codelineno-2-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-2-80" name="__codelineno-2-80" href="#__codelineno-2-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-2-81" name="__codelineno-2-81" href="#__codelineno-2-81"></a>
<a id="__codelineno-2-82" name="__codelineno-2-82" href="#__codelineno-2-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-2-83" name="__codelineno-2-83" href="#__codelineno-2-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-84" name="__codelineno-2-84" href="#__codelineno-2-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-2-85" name="__codelineno-2-85" href="#__codelineno-2-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-2-86" name="__codelineno-2-86" href="#__codelineno-2-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-2-87" name="__codelineno-2-87" href="#__codelineno-2-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-2-88" name="__codelineno-2-88" href="#__codelineno-2-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-2-89" name="__codelineno-2-89" href="#__codelineno-2-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-90" name="__codelineno-2-90" href="#__codelineno-2-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-2-91" name="__codelineno-2-91" href="#__codelineno-2-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-92" name="__codelineno-2-92" href="#__codelineno-2-92"></a>
<a id="__codelineno-2-93" name="__codelineno-2-93" href="#__codelineno-2-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-2-94" name="__codelineno-2-94" href="#__codelineno-2-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-2-95" name="__codelineno-2-95" href="#__codelineno-2-95"></a>
<a id="__codelineno-2-96" name="__codelineno-2-96" href="#__codelineno-2-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-2-97" name="__codelineno-2-97" href="#__codelineno-2-97"></a>
<a id="__codelineno-2-98" name="__codelineno-2-98" href="#__codelineno-2-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-2-99" name="__codelineno-2-99" href="#__codelineno-2-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-100" name="__codelineno-2-100" href="#__codelineno-2-100"></a>
<a id="__codelineno-2-101" name="__codelineno-2-101" href="#__codelineno-2-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-2-102" name="__codelineno-2-102" href="#__codelineno-2-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-2-103" name="__codelineno-2-103" href="#__codelineno-2-103"></a><span class="p">};</span>
<a id="__codelineno-2-104" name="__codelineno-2-104" href="#__codelineno-2-104"></a>
<a id="__codelineno-2-105" name="__codelineno-2-105" href="#__codelineno-2-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-2-106" name="__codelineno-2-106" href="#__codelineno-2-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-2-107" name="__codelineno-2-107" href="#__codelineno-2-107"></a><span class="p">{</span>
<a id="__codelineno-2-108" name="__codelineno-2-108" href="#__codelineno-2-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-2-109" name="__codelineno-2-109" href="#__codelineno-2-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-2-110" name="__codelineno-2-110" href="#__codelineno-2-110"></a>
<a id="__codelineno-2-111" name="__codelineno-2-111" href="#__codelineno-2-111"></a><span class="hll"><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
</span><a id="__codelineno-2-112" name="__codelineno-2-112" href="#__codelineno-2-112"></a><span class="hll"><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
</span><a id="__codelineno-2-113" name="__codelineno-2-113" href="#__codelineno-2-113"></a><span class="hll"><span class="w">	</span><span class="p">{</span>
</span><a id="__codelineno-2-114" name="__codelineno-2-114" href="#__codelineno-2-114"></a><span class="hll"><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
</span><a id="__codelineno-2-115" name="__codelineno-2-115" href="#__codelineno-2-115"></a><span class="hll"><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
</span><a id="__codelineno-2-116" name="__codelineno-2-116" href="#__codelineno-2-116"></a><span class="hll"><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
</span><a id="__codelineno-2-117" name="__codelineno-2-117" href="#__codelineno-2-117"></a><span class="hll"><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
</span><a id="__codelineno-2-118" name="__codelineno-2-118" href="#__codelineno-2-118"></a><span class="hll"><span class="w">	</span><span class="p">};</span>
</span><a id="__codelineno-2-119" name="__codelineno-2-119" href="#__codelineno-2-119"></a>
<a id="__codelineno-2-120" name="__codelineno-2-120" href="#__codelineno-2-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-2-121" name="__codelineno-2-121" href="#__codelineno-2-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-2-122" name="__codelineno-2-122" href="#__codelineno-2-122"></a>
<a id="__codelineno-2-123" name="__codelineno-2-123" href="#__codelineno-2-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-2-124" name="__codelineno-2-124" href="#__codelineno-2-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-2-125" name="__codelineno-2-125" href="#__codelineno-2-125"></a>
<a id="__codelineno-2-126" name="__codelineno-2-126" href="#__codelineno-2-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-2-127" name="__codelineno-2-127" href="#__codelineno-2-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-2-128" name="__codelineno-2-128" href="#__codelineno-2-128"></a>
<a id="__codelineno-2-129" name="__codelineno-2-129" href="#__codelineno-2-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-2-130" name="__codelineno-2-130" href="#__codelineno-2-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-2-131" name="__codelineno-2-131" href="#__codelineno-2-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-2-132" name="__codelineno-2-132" href="#__codelineno-2-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-2-133" name="__codelineno-2-133" href="#__codelineno-2-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-2-134" name="__codelineno-2-134" href="#__codelineno-2-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-2-135" name="__codelineno-2-135" href="#__codelineno-2-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-2-136" name="__codelineno-2-136" href="#__codelineno-2-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-2-137" name="__codelineno-2-137" href="#__codelineno-2-137"></a>
<a id="__codelineno-2-138" name="__codelineno-2-138" href="#__codelineno-2-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-2-139" name="__codelineno-2-139" href="#__codelineno-2-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-2-140" name="__codelineno-2-140" href="#__codelineno-2-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-2-141" name="__codelineno-2-141" href="#__codelineno-2-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-2-142" name="__codelineno-2-142" href="#__codelineno-2-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-2-143" name="__codelineno-2-143" href="#__codelineno-2-143"></a><span class="hll"><span class="w">		</span><span class="c1">// Base color according to attribute</span>
</span><a id="__codelineno-2-144" name="__codelineno-2-144" href="#__codelineno-2-144"></a><span class="hll"><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
</span><a id="__codelineno-2-145" name="__codelineno-2-145" href="#__codelineno-2-145"></a>
<a id="__codelineno-2-146" name="__codelineno-2-146" href="#__codelineno-2-146"></a><span class="w">		</span><span class="c1">// Text size</span>
<a id="__codelineno-2-147" name="__codelineno-2-147" href="#__codelineno-2-147"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">40.0</span><span class="p">;</span>
<a id="__codelineno-2-148" name="__codelineno-2-148" href="#__codelineno-2-148"></a>
<a id="__codelineno-2-149" name="__codelineno-2-149" href="#__codelineno-2-149"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-2-150" name="__codelineno-2-150" href="#__codelineno-2-150"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-2-151" name="__codelineno-2-151" href="#__codelineno-2-151"></a>
<a id="__codelineno-2-152" name="__codelineno-2-152" href="#__codelineno-2-152"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-2-153" name="__codelineno-2-153" href="#__codelineno-2-153"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-2-154" name="__codelineno-2-154" href="#__codelineno-2-154"></a>
<a id="__codelineno-2-155" name="__codelineno-2-155" href="#__codelineno-2-155"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-2-156" name="__codelineno-2-156" href="#__codelineno-2-156"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-2-157" name="__codelineno-2-157" href="#__codelineno-2-157"></a><span class="p">};</span>
<a id="__codelineno-2-158" name="__codelineno-2-158" href="#__codelineno-2-158"></a>
<a id="__codelineno-2-159" name="__codelineno-2-159" href="#__codelineno-2-159"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-2-160" name="__codelineno-2-160" href="#__codelineno-2-160"></a><span class="p">{</span>
<a id="__codelineno-2-161" name="__codelineno-2-161" href="#__codelineno-2-161"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-2-162" name="__codelineno-2-162" href="#__codelineno-2-162"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-2-163" name="__codelineno-2-163" href="#__codelineno-2-163"></a>
<a id="__codelineno-2-164" name="__codelineno-2-164" href="#__codelineno-2-164"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-2-165" name="__codelineno-2-165" href="#__codelineno-2-165"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-166" name="__codelineno-2-166" href="#__codelineno-2-166"></a>
<a id="__codelineno-2-167" name="__codelineno-2-167" href="#__codelineno-2-167"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-2-168" name="__codelineno-2-168" href="#__codelineno-2-168"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-169" name="__codelineno-2-169" href="#__codelineno-2-169"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-170" name="__codelineno-2-170" href="#__codelineno-2-170"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-171" name="__codelineno-2-171" href="#__codelineno-2-171"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-172" name="__codelineno-2-172" href="#__codelineno-2-172"></a>
<a id="__codelineno-2-173" name="__codelineno-2-173" href="#__codelineno-2-173"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-2-174" name="__codelineno-2-174" href="#__codelineno-2-174"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-175" name="__codelineno-2-175" href="#__codelineno-2-175"></a>
<a id="__codelineno-2-176" name="__codelineno-2-176" href="#__codelineno-2-176"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-2-177" name="__codelineno-2-177" href="#__codelineno-2-177"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-2-178" name="__codelineno-2-178" href="#__codelineno-2-178"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-2-179" name="__codelineno-2-179" href="#__codelineno-2-179"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-2-180" name="__codelineno-2-180" href="#__codelineno-2-180"></a>
<a id="__codelineno-2-181" name="__codelineno-2-181" href="#__codelineno-2-181"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-2-182" name="__codelineno-2-182" href="#__codelineno-2-182"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-2-183" name="__codelineno-2-183" href="#__codelineno-2-183"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-2-184" name="__codelineno-2-184" href="#__codelineno-2-184"></a>
<a id="__codelineno-2-185" name="__codelineno-2-185" href="#__codelineno-2-185"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-2-186" name="__codelineno-2-186" href="#__codelineno-2-186"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-2-187" name="__codelineno-2-187" href="#__codelineno-2-187"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-2-188" name="__codelineno-2-188" href="#__codelineno-2-188"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-189" name="__codelineno-2-189" href="#__codelineno-2-189"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-2-190" name="__codelineno-2-190" href="#__codelineno-2-190"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-2-191" name="__codelineno-2-191" href="#__codelineno-2-191"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-192" name="__codelineno-2-192" href="#__codelineno-2-192"></a>
<a id="__codelineno-2-193" name="__codelineno-2-193" href="#__codelineno-2-193"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-2-194" name="__codelineno-2-194" href="#__codelineno-2-194"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-195" name="__codelineno-2-195" href="#__codelineno-2-195"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-2-196" name="__codelineno-2-196" href="#__codelineno-2-196"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-2-197" name="__codelineno-2-197" href="#__codelineno-2-197"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-198" name="__codelineno-2-198" href="#__codelineno-2-198"></a>
<a id="__codelineno-2-199" name="__codelineno-2-199" href="#__codelineno-2-199"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-2-200" name="__codelineno-2-200" href="#__codelineno-2-200"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-2-201" name="__codelineno-2-201" href="#__codelineno-2-201"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-202" name="__codelineno-2-202" href="#__codelineno-2-202"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-2-203" name="__codelineno-2-203" href="#__codelineno-2-203"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-2-204" name="__codelineno-2-204" href="#__codelineno-2-204"></a>
<a id="__codelineno-2-205" name="__codelineno-2-205" href="#__codelineno-2-205"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-2-206" name="__codelineno-2-206" href="#__codelineno-2-206"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-2-207" name="__codelineno-2-207" href="#__codelineno-2-207"></a>
<a id="__codelineno-2-208" name="__codelineno-2-208" href="#__codelineno-2-208"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-2-209" name="__codelineno-2-209" href="#__codelineno-2-209"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-2-210" name="__codelineno-2-210" href="#__codelineno-2-210"></a>
<a id="__codelineno-2-211" name="__codelineno-2-211" href="#__codelineno-2-211"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-2-212" name="__codelineno-2-212" href="#__codelineno-2-212"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-2-213" name="__codelineno-2-213" href="#__codelineno-2-213"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-214" name="__codelineno-2-214" href="#__codelineno-2-214"></a>
<a id="__codelineno-2-215" name="__codelineno-2-215" href="#__codelineno-2-215"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-2-216" name="__codelineno-2-216" href="#__codelineno-2-216"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-217" name="__codelineno-2-217" href="#__codelineno-2-217"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-2-218" name="__codelineno-2-218" href="#__codelineno-2-218"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-2-219" name="__codelineno-2-219" href="#__codelineno-2-219"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-2-220" name="__codelineno-2-220" href="#__codelineno-2-220"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-221" name="__codelineno-2-221" href="#__codelineno-2-221"></a>
<a id="__codelineno-2-222" name="__codelineno-2-222" href="#__codelineno-2-222"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-2-223" name="__codelineno-2-223" href="#__codelineno-2-223"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-224" name="__codelineno-2-224" href="#__codelineno-2-224"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-2-225" name="__codelineno-2-225" href="#__codelineno-2-225"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-2-226" name="__codelineno-2-226" href="#__codelineno-2-226"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-227" name="__codelineno-2-227" href="#__codelineno-2-227"></a>
<a id="__codelineno-2-228" name="__codelineno-2-228" href="#__codelineno-2-228"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-2-229" name="__codelineno-2-229" href="#__codelineno-2-229"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-2-230" name="__codelineno-2-230" href="#__codelineno-2-230"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-2-231" name="__codelineno-2-231" href="#__codelineno-2-231"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-2-232" name="__codelineno-2-232" href="#__codelineno-2-232"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-2-233" name="__codelineno-2-233" href="#__codelineno-2-233"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-2-234" name="__codelineno-2-234" href="#__codelineno-2-234"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="4-change-size-by-damage-amount">4. Change Size by Damage Amount<a class="headerlink" href="#4-change-size-by-damage-amount" title="Permanent link">&para;</a></h2>
<ul>
<li>Having "weak attacks" and "special moves" look the same reduces the sense of satisfaction.</li>
<li>We increase the font size of the numbers according to the number of digits in the damage (under 100, under 1000, or more).</li>
<li>By creating a visual impact where "bigger numbers = something amazing happened," we reinforce the feedback when dealing massive damage.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/4.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="p">{</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="p">};</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="p">{</span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="p">};</span>
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="p">{</span>
<a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a>
<a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>
<a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>
<a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a>
<a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>
<a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a>
<a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a>
<a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-3-64" name="__codelineno-3-64" href="#__codelineno-3-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-3-65" name="__codelineno-3-65" href="#__codelineno-3-65"></a>
<a id="__codelineno-3-66" name="__codelineno-3-66" href="#__codelineno-3-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-3-67" name="__codelineno-3-67" href="#__codelineno-3-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-3-68" name="__codelineno-3-68" href="#__codelineno-3-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-69" name="__codelineno-3-69" href="#__codelineno-3-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-3-70" name="__codelineno-3-70" href="#__codelineno-3-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-3-71" name="__codelineno-3-71" href="#__codelineno-3-71"></a>
<a id="__codelineno-3-72" name="__codelineno-3-72" href="#__codelineno-3-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-3-73" name="__codelineno-3-73" href="#__codelineno-3-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-3-74" name="__codelineno-3-74" href="#__codelineno-3-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-3-75" name="__codelineno-3-75" href="#__codelineno-3-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-3-76" name="__codelineno-3-76" href="#__codelineno-3-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-3-77" name="__codelineno-3-77" href="#__codelineno-3-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-78" name="__codelineno-3-78" href="#__codelineno-3-78"></a>
<a id="__codelineno-3-79" name="__codelineno-3-79" href="#__codelineno-3-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-3-80" name="__codelineno-3-80" href="#__codelineno-3-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-3-81" name="__codelineno-3-81" href="#__codelineno-3-81"></a>
<a id="__codelineno-3-82" name="__codelineno-3-82" href="#__codelineno-3-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-3-83" name="__codelineno-3-83" href="#__codelineno-3-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-84" name="__codelineno-3-84" href="#__codelineno-3-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-3-85" name="__codelineno-3-85" href="#__codelineno-3-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-3-86" name="__codelineno-3-86" href="#__codelineno-3-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-3-87" name="__codelineno-3-87" href="#__codelineno-3-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-3-88" name="__codelineno-3-88" href="#__codelineno-3-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-3-89" name="__codelineno-3-89" href="#__codelineno-3-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-90" name="__codelineno-3-90" href="#__codelineno-3-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-3-91" name="__codelineno-3-91" href="#__codelineno-3-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-92" name="__codelineno-3-92" href="#__codelineno-3-92"></a>
<a id="__codelineno-3-93" name="__codelineno-3-93" href="#__codelineno-3-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-3-94" name="__codelineno-3-94" href="#__codelineno-3-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-3-95" name="__codelineno-3-95" href="#__codelineno-3-95"></a>
<a id="__codelineno-3-96" name="__codelineno-3-96" href="#__codelineno-3-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-3-97" name="__codelineno-3-97" href="#__codelineno-3-97"></a>
<a id="__codelineno-3-98" name="__codelineno-3-98" href="#__codelineno-3-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-3-99" name="__codelineno-3-99" href="#__codelineno-3-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-100" name="__codelineno-3-100" href="#__codelineno-3-100"></a>
<a id="__codelineno-3-101" name="__codelineno-3-101" href="#__codelineno-3-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-3-102" name="__codelineno-3-102" href="#__codelineno-3-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-3-103" name="__codelineno-3-103" href="#__codelineno-3-103"></a><span class="p">};</span>
<a id="__codelineno-3-104" name="__codelineno-3-104" href="#__codelineno-3-104"></a>
<a id="__codelineno-3-105" name="__codelineno-3-105" href="#__codelineno-3-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-3-106" name="__codelineno-3-106" href="#__codelineno-3-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-3-107" name="__codelineno-3-107" href="#__codelineno-3-107"></a><span class="p">{</span>
<a id="__codelineno-3-108" name="__codelineno-3-108" href="#__codelineno-3-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-3-109" name="__codelineno-3-109" href="#__codelineno-3-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-3-110" name="__codelineno-3-110" href="#__codelineno-3-110"></a>
<a id="__codelineno-3-111" name="__codelineno-3-111" href="#__codelineno-3-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-3-112" name="__codelineno-3-112" href="#__codelineno-3-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-3-113" name="__codelineno-3-113" href="#__codelineno-3-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-3-114" name="__codelineno-3-114" href="#__codelineno-3-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-3-115" name="__codelineno-3-115" href="#__codelineno-3-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-3-116" name="__codelineno-3-116" href="#__codelineno-3-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-3-117" name="__codelineno-3-117" href="#__codelineno-3-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-3-118" name="__codelineno-3-118" href="#__codelineno-3-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-3-119" name="__codelineno-3-119" href="#__codelineno-3-119"></a>
<a id="__codelineno-3-120" name="__codelineno-3-120" href="#__codelineno-3-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-3-121" name="__codelineno-3-121" href="#__codelineno-3-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-3-122" name="__codelineno-3-122" href="#__codelineno-3-122"></a>
<a id="__codelineno-3-123" name="__codelineno-3-123" href="#__codelineno-3-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-3-124" name="__codelineno-3-124" href="#__codelineno-3-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-3-125" name="__codelineno-3-125" href="#__codelineno-3-125"></a>
<a id="__codelineno-3-126" name="__codelineno-3-126" href="#__codelineno-3-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-3-127" name="__codelineno-3-127" href="#__codelineno-3-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-3-128" name="__codelineno-3-128" href="#__codelineno-3-128"></a>
<a id="__codelineno-3-129" name="__codelineno-3-129" href="#__codelineno-3-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-3-130" name="__codelineno-3-130" href="#__codelineno-3-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-3-131" name="__codelineno-3-131" href="#__codelineno-3-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-3-132" name="__codelineno-3-132" href="#__codelineno-3-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-3-133" name="__codelineno-3-133" href="#__codelineno-3-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-3-134" name="__codelineno-3-134" href="#__codelineno-3-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-3-135" name="__codelineno-3-135" href="#__codelineno-3-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-3-136" name="__codelineno-3-136" href="#__codelineno-3-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-3-137" name="__codelineno-3-137" href="#__codelineno-3-137"></a>
<a id="__codelineno-3-138" name="__codelineno-3-138" href="#__codelineno-3-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-3-139" name="__codelineno-3-139" href="#__codelineno-3-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-3-140" name="__codelineno-3-140" href="#__codelineno-3-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-3-141" name="__codelineno-3-141" href="#__codelineno-3-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-3-142" name="__codelineno-3-142" href="#__codelineno-3-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-3-143" name="__codelineno-3-143" href="#__codelineno-3-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-3-144" name="__codelineno-3-144" href="#__codelineno-3-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-3-145" name="__codelineno-3-145" href="#__codelineno-3-145"></a>
<a id="__codelineno-3-146" name="__codelineno-3-146" href="#__codelineno-3-146"></a><span class="hll"><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
</span><a id="__codelineno-3-147" name="__codelineno-3-147" href="#__codelineno-3-147"></a><span class="hll"><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
</span><a id="__codelineno-3-148" name="__codelineno-3-148" href="#__codelineno-3-148"></a>
<a id="__codelineno-3-149" name="__codelineno-3-149" href="#__codelineno-3-149"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-3-150" name="__codelineno-3-150" href="#__codelineno-3-150"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-3-151" name="__codelineno-3-151" href="#__codelineno-3-151"></a>
<a id="__codelineno-3-152" name="__codelineno-3-152" href="#__codelineno-3-152"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-3-153" name="__codelineno-3-153" href="#__codelineno-3-153"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-3-154" name="__codelineno-3-154" href="#__codelineno-3-154"></a>
<a id="__codelineno-3-155" name="__codelineno-3-155" href="#__codelineno-3-155"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-3-156" name="__codelineno-3-156" href="#__codelineno-3-156"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-3-157" name="__codelineno-3-157" href="#__codelineno-3-157"></a><span class="p">};</span>
<a id="__codelineno-3-158" name="__codelineno-3-158" href="#__codelineno-3-158"></a>
<a id="__codelineno-3-159" name="__codelineno-3-159" href="#__codelineno-3-159"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-3-160" name="__codelineno-3-160" href="#__codelineno-3-160"></a><span class="p">{</span>
<a id="__codelineno-3-161" name="__codelineno-3-161" href="#__codelineno-3-161"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-3-162" name="__codelineno-3-162" href="#__codelineno-3-162"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-3-163" name="__codelineno-3-163" href="#__codelineno-3-163"></a>
<a id="__codelineno-3-164" name="__codelineno-3-164" href="#__codelineno-3-164"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-3-165" name="__codelineno-3-165" href="#__codelineno-3-165"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-166" name="__codelineno-3-166" href="#__codelineno-3-166"></a>
<a id="__codelineno-3-167" name="__codelineno-3-167" href="#__codelineno-3-167"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-3-168" name="__codelineno-3-168" href="#__codelineno-3-168"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-169" name="__codelineno-3-169" href="#__codelineno-3-169"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-170" name="__codelineno-3-170" href="#__codelineno-3-170"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-171" name="__codelineno-3-171" href="#__codelineno-3-171"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-172" name="__codelineno-3-172" href="#__codelineno-3-172"></a>
<a id="__codelineno-3-173" name="__codelineno-3-173" href="#__codelineno-3-173"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-3-174" name="__codelineno-3-174" href="#__codelineno-3-174"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-175" name="__codelineno-3-175" href="#__codelineno-3-175"></a>
<a id="__codelineno-3-176" name="__codelineno-3-176" href="#__codelineno-3-176"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-3-177" name="__codelineno-3-177" href="#__codelineno-3-177"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-3-178" name="__codelineno-3-178" href="#__codelineno-3-178"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-3-179" name="__codelineno-3-179" href="#__codelineno-3-179"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-3-180" name="__codelineno-3-180" href="#__codelineno-3-180"></a>
<a id="__codelineno-3-181" name="__codelineno-3-181" href="#__codelineno-3-181"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-3-182" name="__codelineno-3-182" href="#__codelineno-3-182"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-3-183" name="__codelineno-3-183" href="#__codelineno-3-183"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-3-184" name="__codelineno-3-184" href="#__codelineno-3-184"></a>
<a id="__codelineno-3-185" name="__codelineno-3-185" href="#__codelineno-3-185"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-3-186" name="__codelineno-3-186" href="#__codelineno-3-186"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-3-187" name="__codelineno-3-187" href="#__codelineno-3-187"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-3-188" name="__codelineno-3-188" href="#__codelineno-3-188"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-189" name="__codelineno-3-189" href="#__codelineno-3-189"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-3-190" name="__codelineno-3-190" href="#__codelineno-3-190"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-3-191" name="__codelineno-3-191" href="#__codelineno-3-191"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-192" name="__codelineno-3-192" href="#__codelineno-3-192"></a>
<a id="__codelineno-3-193" name="__codelineno-3-193" href="#__codelineno-3-193"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-3-194" name="__codelineno-3-194" href="#__codelineno-3-194"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-195" name="__codelineno-3-195" href="#__codelineno-3-195"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-3-196" name="__codelineno-3-196" href="#__codelineno-3-196"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-3-197" name="__codelineno-3-197" href="#__codelineno-3-197"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-198" name="__codelineno-3-198" href="#__codelineno-3-198"></a>
<a id="__codelineno-3-199" name="__codelineno-3-199" href="#__codelineno-3-199"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-3-200" name="__codelineno-3-200" href="#__codelineno-3-200"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-3-201" name="__codelineno-3-201" href="#__codelineno-3-201"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-202" name="__codelineno-3-202" href="#__codelineno-3-202"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-3-203" name="__codelineno-3-203" href="#__codelineno-3-203"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-3-204" name="__codelineno-3-204" href="#__codelineno-3-204"></a>
<a id="__codelineno-3-205" name="__codelineno-3-205" href="#__codelineno-3-205"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-3-206" name="__codelineno-3-206" href="#__codelineno-3-206"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-3-207" name="__codelineno-3-207" href="#__codelineno-3-207"></a>
<a id="__codelineno-3-208" name="__codelineno-3-208" href="#__codelineno-3-208"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-3-209" name="__codelineno-3-209" href="#__codelineno-3-209"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-3-210" name="__codelineno-3-210" href="#__codelineno-3-210"></a>
<a id="__codelineno-3-211" name="__codelineno-3-211" href="#__codelineno-3-211"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-3-212" name="__codelineno-3-212" href="#__codelineno-3-212"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-3-213" name="__codelineno-3-213" href="#__codelineno-3-213"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-214" name="__codelineno-3-214" href="#__codelineno-3-214"></a>
<a id="__codelineno-3-215" name="__codelineno-3-215" href="#__codelineno-3-215"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-3-216" name="__codelineno-3-216" href="#__codelineno-3-216"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-217" name="__codelineno-3-217" href="#__codelineno-3-217"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-3-218" name="__codelineno-3-218" href="#__codelineno-3-218"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-3-219" name="__codelineno-3-219" href="#__codelineno-3-219"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-3-220" name="__codelineno-3-220" href="#__codelineno-3-220"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-221" name="__codelineno-3-221" href="#__codelineno-3-221"></a>
<a id="__codelineno-3-222" name="__codelineno-3-222" href="#__codelineno-3-222"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-3-223" name="__codelineno-3-223" href="#__codelineno-3-223"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-224" name="__codelineno-3-224" href="#__codelineno-3-224"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-3-225" name="__codelineno-3-225" href="#__codelineno-3-225"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-3-226" name="__codelineno-3-226" href="#__codelineno-3-226"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-227" name="__codelineno-3-227" href="#__codelineno-3-227"></a>
<a id="__codelineno-3-228" name="__codelineno-3-228" href="#__codelineno-3-228"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-3-229" name="__codelineno-3-229" href="#__codelineno-3-229"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-3-230" name="__codelineno-3-230" href="#__codelineno-3-230"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-3-231" name="__codelineno-3-231" href="#__codelineno-3-231"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-3-232" name="__codelineno-3-232" href="#__codelineno-3-232"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-3-233" name="__codelineno-3-233" href="#__codelineno-3-233"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-3-234" name="__codelineno-3-234" href="#__codelineno-3-234"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="5-add-outline-to-text">5. Add Outline to Text<a class="headerlink" href="#5-add-outline-to-text" title="Permanent link">&para;</a></h2>
<ul>
<li>In bright backgrounds or places where effects overlap, numbers can blend in and become hard to see.</li>
<li>By drawing an outline around the numbers, we ensure they are clearly legible on any background. This not only improves visibility but also increases the text's presence, making the screen look more game-like.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/5.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">{</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="p">};</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="p">{</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="p">};</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="p">{</span>
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>
<a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a>
<a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a>
<a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a>
<a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a>
<a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a>
<a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-4-95" name="__codelineno-4-95" href="#__codelineno-4-95"></a>
<a id="__codelineno-4-96" name="__codelineno-4-96" href="#__codelineno-4-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-4-97" name="__codelineno-4-97" href="#__codelineno-4-97"></a>
<a id="__codelineno-4-98" name="__codelineno-4-98" href="#__codelineno-4-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-4-99" name="__codelineno-4-99" href="#__codelineno-4-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-100" name="__codelineno-4-100" href="#__codelineno-4-100"></a>
<a id="__codelineno-4-101" name="__codelineno-4-101" href="#__codelineno-4-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-4-102" name="__codelineno-4-102" href="#__codelineno-4-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-4-103" name="__codelineno-4-103" href="#__codelineno-4-103"></a><span class="p">};</span>
<a id="__codelineno-4-104" name="__codelineno-4-104" href="#__codelineno-4-104"></a>
<a id="__codelineno-4-105" name="__codelineno-4-105" href="#__codelineno-4-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-4-106" name="__codelineno-4-106" href="#__codelineno-4-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-4-107" name="__codelineno-4-107" href="#__codelineno-4-107"></a><span class="p">{</span>
<a id="__codelineno-4-108" name="__codelineno-4-108" href="#__codelineno-4-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-4-109" name="__codelineno-4-109" href="#__codelineno-4-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-4-110" name="__codelineno-4-110" href="#__codelineno-4-110"></a>
<a id="__codelineno-4-111" name="__codelineno-4-111" href="#__codelineno-4-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-4-112" name="__codelineno-4-112" href="#__codelineno-4-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-4-113" name="__codelineno-4-113" href="#__codelineno-4-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-4-114" name="__codelineno-4-114" href="#__codelineno-4-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-4-115" name="__codelineno-4-115" href="#__codelineno-4-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-4-116" name="__codelineno-4-116" href="#__codelineno-4-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-4-117" name="__codelineno-4-117" href="#__codelineno-4-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-4-118" name="__codelineno-4-118" href="#__codelineno-4-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-4-119" name="__codelineno-4-119" href="#__codelineno-4-119"></a>
<a id="__codelineno-4-120" name="__codelineno-4-120" href="#__codelineno-4-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-4-121" name="__codelineno-4-121" href="#__codelineno-4-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-4-122" name="__codelineno-4-122" href="#__codelineno-4-122"></a>
<a id="__codelineno-4-123" name="__codelineno-4-123" href="#__codelineno-4-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-4-124" name="__codelineno-4-124" href="#__codelineno-4-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-4-125" name="__codelineno-4-125" href="#__codelineno-4-125"></a>
<a id="__codelineno-4-126" name="__codelineno-4-126" href="#__codelineno-4-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-4-127" name="__codelineno-4-127" href="#__codelineno-4-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-4-128" name="__codelineno-4-128" href="#__codelineno-4-128"></a>
<a id="__codelineno-4-129" name="__codelineno-4-129" href="#__codelineno-4-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-4-130" name="__codelineno-4-130" href="#__codelineno-4-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-4-131" name="__codelineno-4-131" href="#__codelineno-4-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-4-132" name="__codelineno-4-132" href="#__codelineno-4-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-4-133" name="__codelineno-4-133" href="#__codelineno-4-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-4-134" name="__codelineno-4-134" href="#__codelineno-4-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-4-135" name="__codelineno-4-135" href="#__codelineno-4-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-4-136" name="__codelineno-4-136" href="#__codelineno-4-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-4-137" name="__codelineno-4-137" href="#__codelineno-4-137"></a>
<a id="__codelineno-4-138" name="__codelineno-4-138" href="#__codelineno-4-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-4-139" name="__codelineno-4-139" href="#__codelineno-4-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-4-140" name="__codelineno-4-140" href="#__codelineno-4-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-4-141" name="__codelineno-4-141" href="#__codelineno-4-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-4-142" name="__codelineno-4-142" href="#__codelineno-4-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-4-143" name="__codelineno-4-143" href="#__codelineno-4-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-4-144" name="__codelineno-4-144" href="#__codelineno-4-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-4-145" name="__codelineno-4-145" href="#__codelineno-4-145"></a>
<a id="__codelineno-4-146" name="__codelineno-4-146" href="#__codelineno-4-146"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-4-147" name="__codelineno-4-147" href="#__codelineno-4-147"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-4-148" name="__codelineno-4-148" href="#__codelineno-4-148"></a>
<a id="__codelineno-4-149" name="__codelineno-4-149" href="#__codelineno-4-149"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-4-150" name="__codelineno-4-150" href="#__codelineno-4-150"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-4-151" name="__codelineno-4-151" href="#__codelineno-4-151"></a>
<a id="__codelineno-4-152" name="__codelineno-4-152" href="#__codelineno-4-152"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-4-153" name="__codelineno-4-153" href="#__codelineno-4-153"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-4-154" name="__codelineno-4-154" href="#__codelineno-4-154"></a>
<a id="__codelineno-4-155" name="__codelineno-4-155" href="#__codelineno-4-155"></a><span class="hll"><span class="w">		</span><span class="c1">// Draw number outline</span>
</span><a id="__codelineno-4-156" name="__codelineno-4-156" href="#__codelineno-4-156"></a><span class="hll"><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
</span><a id="__codelineno-4-157" name="__codelineno-4-157" href="#__codelineno-4-157"></a>
<a id="__codelineno-4-158" name="__codelineno-4-158" href="#__codelineno-4-158"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-4-159" name="__codelineno-4-159" href="#__codelineno-4-159"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-4-160" name="__codelineno-4-160" href="#__codelineno-4-160"></a><span class="p">};</span>
<a id="__codelineno-4-161" name="__codelineno-4-161" href="#__codelineno-4-161"></a>
<a id="__codelineno-4-162" name="__codelineno-4-162" href="#__codelineno-4-162"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-4-163" name="__codelineno-4-163" href="#__codelineno-4-163"></a><span class="p">{</span>
<a id="__codelineno-4-164" name="__codelineno-4-164" href="#__codelineno-4-164"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-4-165" name="__codelineno-4-165" href="#__codelineno-4-165"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-4-166" name="__codelineno-4-166" href="#__codelineno-4-166"></a>
<a id="__codelineno-4-167" name="__codelineno-4-167" href="#__codelineno-4-167"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-4-168" name="__codelineno-4-168" href="#__codelineno-4-168"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-169" name="__codelineno-4-169" href="#__codelineno-4-169"></a>
<a id="__codelineno-4-170" name="__codelineno-4-170" href="#__codelineno-4-170"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-4-171" name="__codelineno-4-171" href="#__codelineno-4-171"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-172" name="__codelineno-4-172" href="#__codelineno-4-172"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-173" name="__codelineno-4-173" href="#__codelineno-4-173"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-174" name="__codelineno-4-174" href="#__codelineno-4-174"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-175" name="__codelineno-4-175" href="#__codelineno-4-175"></a>
<a id="__codelineno-4-176" name="__codelineno-4-176" href="#__codelineno-4-176"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-4-177" name="__codelineno-4-177" href="#__codelineno-4-177"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-4-178" name="__codelineno-4-178" href="#__codelineno-4-178"></a>
<a id="__codelineno-4-179" name="__codelineno-4-179" href="#__codelineno-4-179"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-4-180" name="__codelineno-4-180" href="#__codelineno-4-180"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-4-181" name="__codelineno-4-181" href="#__codelineno-4-181"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-4-182" name="__codelineno-4-182" href="#__codelineno-4-182"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-4-183" name="__codelineno-4-183" href="#__codelineno-4-183"></a>
<a id="__codelineno-4-184" name="__codelineno-4-184" href="#__codelineno-4-184"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-4-185" name="__codelineno-4-185" href="#__codelineno-4-185"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-4-186" name="__codelineno-4-186" href="#__codelineno-4-186"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-4-187" name="__codelineno-4-187" href="#__codelineno-4-187"></a>
<a id="__codelineno-4-188" name="__codelineno-4-188" href="#__codelineno-4-188"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-4-189" name="__codelineno-4-189" href="#__codelineno-4-189"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-4-190" name="__codelineno-4-190" href="#__codelineno-4-190"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-4-191" name="__codelineno-4-191" href="#__codelineno-4-191"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-192" name="__codelineno-4-192" href="#__codelineno-4-192"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-4-193" name="__codelineno-4-193" href="#__codelineno-4-193"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-4-194" name="__codelineno-4-194" href="#__codelineno-4-194"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-195" name="__codelineno-4-195" href="#__codelineno-4-195"></a>
<a id="__codelineno-4-196" name="__codelineno-4-196" href="#__codelineno-4-196"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-4-197" name="__codelineno-4-197" href="#__codelineno-4-197"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-198" name="__codelineno-4-198" href="#__codelineno-4-198"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-199" name="__codelineno-4-199" href="#__codelineno-4-199"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-4-200" name="__codelineno-4-200" href="#__codelineno-4-200"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-201" name="__codelineno-4-201" href="#__codelineno-4-201"></a>
<a id="__codelineno-4-202" name="__codelineno-4-202" href="#__codelineno-4-202"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-4-203" name="__codelineno-4-203" href="#__codelineno-4-203"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-4-204" name="__codelineno-4-204" href="#__codelineno-4-204"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-205" name="__codelineno-4-205" href="#__codelineno-4-205"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-4-206" name="__codelineno-4-206" href="#__codelineno-4-206"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-4-207" name="__codelineno-4-207" href="#__codelineno-4-207"></a>
<a id="__codelineno-4-208" name="__codelineno-4-208" href="#__codelineno-4-208"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-4-209" name="__codelineno-4-209" href="#__codelineno-4-209"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-4-210" name="__codelineno-4-210" href="#__codelineno-4-210"></a>
<a id="__codelineno-4-211" name="__codelineno-4-211" href="#__codelineno-4-211"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-4-212" name="__codelineno-4-212" href="#__codelineno-4-212"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-4-213" name="__codelineno-4-213" href="#__codelineno-4-213"></a>
<a id="__codelineno-4-214" name="__codelineno-4-214" href="#__codelineno-4-214"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-4-215" name="__codelineno-4-215" href="#__codelineno-4-215"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-4-216" name="__codelineno-4-216" href="#__codelineno-4-216"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-217" name="__codelineno-4-217" href="#__codelineno-4-217"></a>
<a id="__codelineno-4-218" name="__codelineno-4-218" href="#__codelineno-4-218"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-4-219" name="__codelineno-4-219" href="#__codelineno-4-219"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-220" name="__codelineno-4-220" href="#__codelineno-4-220"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-4-221" name="__codelineno-4-221" href="#__codelineno-4-221"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-4-222" name="__codelineno-4-222" href="#__codelineno-4-222"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-4-223" name="__codelineno-4-223" href="#__codelineno-4-223"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-224" name="__codelineno-4-224" href="#__codelineno-4-224"></a>
<a id="__codelineno-4-225" name="__codelineno-4-225" href="#__codelineno-4-225"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-4-226" name="__codelineno-4-226" href="#__codelineno-4-226"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-227" name="__codelineno-4-227" href="#__codelineno-4-227"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-4-228" name="__codelineno-4-228" href="#__codelineno-4-228"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-4-229" name="__codelineno-4-229" href="#__codelineno-4-229"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-230" name="__codelineno-4-230" href="#__codelineno-4-230"></a>
<a id="__codelineno-4-231" name="__codelineno-4-231" href="#__codelineno-4-231"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-4-232" name="__codelineno-4-232" href="#__codelineno-4-232"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-4-233" name="__codelineno-4-233" href="#__codelineno-4-233"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-4-234" name="__codelineno-4-234" href="#__codelineno-4-234"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-4-235" name="__codelineno-4-235" href="#__codelineno-4-235"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-4-236" name="__codelineno-4-236" href="#__codelineno-4-236"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-4-237" name="__codelineno-4-237" href="#__codelineno-4-237"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="6-italicize-text">6. Italicize Text<a class="headerlink" href="#6-italicize-text" title="Permanent link">&para;</a></h2>
<ul>
<li>As an option, change the font to italics.</li>
<li>Slanted text conveys a sense of speed and momentum. This is a technique to give a dynamic impression to the screen in high-action games or speedy combat scenes.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/6.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="p">{</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="p">};</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="p">{</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="p">};</span>
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>
<a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="p">{</span>
<a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a>
<a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a>
<a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a>
<a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a>
<a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a>
<a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a>
<a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a>
<a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>
<a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a>
<a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a>
<a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a>
<a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-90" name="__codelineno-5-90" href="#__codelineno-5-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-5-91" name="__codelineno-5-91" href="#__codelineno-5-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-92" name="__codelineno-5-92" href="#__codelineno-5-92"></a>
<a id="__codelineno-5-93" name="__codelineno-5-93" href="#__codelineno-5-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-5-94" name="__codelineno-5-94" href="#__codelineno-5-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-5-95" name="__codelineno-5-95" href="#__codelineno-5-95"></a>
<a id="__codelineno-5-96" name="__codelineno-5-96" href="#__codelineno-5-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-5-97" name="__codelineno-5-97" href="#__codelineno-5-97"></a>
<a id="__codelineno-5-98" name="__codelineno-5-98" href="#__codelineno-5-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-5-99" name="__codelineno-5-99" href="#__codelineno-5-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-100" name="__codelineno-5-100" href="#__codelineno-5-100"></a>
<a id="__codelineno-5-101" name="__codelineno-5-101" href="#__codelineno-5-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-5-102" name="__codelineno-5-102" href="#__codelineno-5-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-5-103" name="__codelineno-5-103" href="#__codelineno-5-103"></a><span class="p">};</span>
<a id="__codelineno-5-104" name="__codelineno-5-104" href="#__codelineno-5-104"></a>
<a id="__codelineno-5-105" name="__codelineno-5-105" href="#__codelineno-5-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-5-106" name="__codelineno-5-106" href="#__codelineno-5-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-5-107" name="__codelineno-5-107" href="#__codelineno-5-107"></a><span class="p">{</span>
<a id="__codelineno-5-108" name="__codelineno-5-108" href="#__codelineno-5-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-5-109" name="__codelineno-5-109" href="#__codelineno-5-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-5-110" name="__codelineno-5-110" href="#__codelineno-5-110"></a>
<a id="__codelineno-5-111" name="__codelineno-5-111" href="#__codelineno-5-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-5-112" name="__codelineno-5-112" href="#__codelineno-5-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-5-113" name="__codelineno-5-113" href="#__codelineno-5-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-5-114" name="__codelineno-5-114" href="#__codelineno-5-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-5-115" name="__codelineno-5-115" href="#__codelineno-5-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-5-116" name="__codelineno-5-116" href="#__codelineno-5-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-5-117" name="__codelineno-5-117" href="#__codelineno-5-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-5-118" name="__codelineno-5-118" href="#__codelineno-5-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-5-119" name="__codelineno-5-119" href="#__codelineno-5-119"></a>
<a id="__codelineno-5-120" name="__codelineno-5-120" href="#__codelineno-5-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-5-121" name="__codelineno-5-121" href="#__codelineno-5-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-5-122" name="__codelineno-5-122" href="#__codelineno-5-122"></a>
<a id="__codelineno-5-123" name="__codelineno-5-123" href="#__codelineno-5-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-5-124" name="__codelineno-5-124" href="#__codelineno-5-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-5-125" name="__codelineno-5-125" href="#__codelineno-5-125"></a>
<a id="__codelineno-5-126" name="__codelineno-5-126" href="#__codelineno-5-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-5-127" name="__codelineno-5-127" href="#__codelineno-5-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-5-128" name="__codelineno-5-128" href="#__codelineno-5-128"></a>
<a id="__codelineno-5-129" name="__codelineno-5-129" href="#__codelineno-5-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-5-130" name="__codelineno-5-130" href="#__codelineno-5-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-5-131" name="__codelineno-5-131" href="#__codelineno-5-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-5-132" name="__codelineno-5-132" href="#__codelineno-5-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-5-133" name="__codelineno-5-133" href="#__codelineno-5-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-5-134" name="__codelineno-5-134" href="#__codelineno-5-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-5-135" name="__codelineno-5-135" href="#__codelineno-5-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-5-136" name="__codelineno-5-136" href="#__codelineno-5-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-5-137" name="__codelineno-5-137" href="#__codelineno-5-137"></a>
<a id="__codelineno-5-138" name="__codelineno-5-138" href="#__codelineno-5-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-5-139" name="__codelineno-5-139" href="#__codelineno-5-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-5-140" name="__codelineno-5-140" href="#__codelineno-5-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-5-141" name="__codelineno-5-141" href="#__codelineno-5-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-5-142" name="__codelineno-5-142" href="#__codelineno-5-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-5-143" name="__codelineno-5-143" href="#__codelineno-5-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-5-144" name="__codelineno-5-144" href="#__codelineno-5-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-5-145" name="__codelineno-5-145" href="#__codelineno-5-145"></a>
<a id="__codelineno-5-146" name="__codelineno-5-146" href="#__codelineno-5-146"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-5-147" name="__codelineno-5-147" href="#__codelineno-5-147"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-5-148" name="__codelineno-5-148" href="#__codelineno-5-148"></a>
<a id="__codelineno-5-149" name="__codelineno-5-149" href="#__codelineno-5-149"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-5-150" name="__codelineno-5-150" href="#__codelineno-5-150"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-5-151" name="__codelineno-5-151" href="#__codelineno-5-151"></a>
<a id="__codelineno-5-152" name="__codelineno-5-152" href="#__codelineno-5-152"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-5-153" name="__codelineno-5-153" href="#__codelineno-5-153"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-5-154" name="__codelineno-5-154" href="#__codelineno-5-154"></a>
<a id="__codelineno-5-155" name="__codelineno-5-155" href="#__codelineno-5-155"></a><span class="w">		</span><span class="c1">// Draw number outline</span>
<a id="__codelineno-5-156" name="__codelineno-5-156" href="#__codelineno-5-156"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-5-157" name="__codelineno-5-157" href="#__codelineno-5-157"></a>
<a id="__codelineno-5-158" name="__codelineno-5-158" href="#__codelineno-5-158"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-5-159" name="__codelineno-5-159" href="#__codelineno-5-159"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-5-160" name="__codelineno-5-160" href="#__codelineno-5-160"></a><span class="p">};</span>
<a id="__codelineno-5-161" name="__codelineno-5-161" href="#__codelineno-5-161"></a>
<a id="__codelineno-5-162" name="__codelineno-5-162" href="#__codelineno-5-162"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-5-163" name="__codelineno-5-163" href="#__codelineno-5-163"></a><span class="p">{</span>
<a id="__codelineno-5-164" name="__codelineno-5-164" href="#__codelineno-5-164"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-5-165" name="__codelineno-5-165" href="#__codelineno-5-165"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-5-166" name="__codelineno-5-166" href="#__codelineno-5-166"></a>
<a id="__codelineno-5-167" name="__codelineno-5-167" href="#__codelineno-5-167"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-5-168" name="__codelineno-5-168" href="#__codelineno-5-168"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-169" name="__codelineno-5-169" href="#__codelineno-5-169"></a>
<a id="__codelineno-5-170" name="__codelineno-5-170" href="#__codelineno-5-170"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-5-171" name="__codelineno-5-171" href="#__codelineno-5-171"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-172" name="__codelineno-5-172" href="#__codelineno-5-172"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-173" name="__codelineno-5-173" href="#__codelineno-5-173"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-174" name="__codelineno-5-174" href="#__codelineno-5-174"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-175" name="__codelineno-5-175" href="#__codelineno-5-175"></a>
<a id="__codelineno-5-176" name="__codelineno-5-176" href="#__codelineno-5-176"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-5-177" name="__codelineno-5-177" href="#__codelineno-5-177"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-178" name="__codelineno-5-178" href="#__codelineno-5-178"></a>
<a id="__codelineno-5-179" name="__codelineno-5-179" href="#__codelineno-5-179"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-5-180" name="__codelineno-5-180" href="#__codelineno-5-180"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-5-181" name="__codelineno-5-181" href="#__codelineno-5-181"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-5-182" name="__codelineno-5-182" href="#__codelineno-5-182"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-5-183" name="__codelineno-5-183" href="#__codelineno-5-183"></a>
<a id="__codelineno-5-184" name="__codelineno-5-184" href="#__codelineno-5-184"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-5-185" name="__codelineno-5-185" href="#__codelineno-5-185"></a><span class="hll"><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="p">,</span><span class="w"> </span><span class="n">FontStyle</span><span class="o">::</span><span class="n">Italic</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><a id="__codelineno-5-186" name="__codelineno-5-186" href="#__codelineno-5-186"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-5-187" name="__codelineno-5-187" href="#__codelineno-5-187"></a>
<a id="__codelineno-5-188" name="__codelineno-5-188" href="#__codelineno-5-188"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-5-189" name="__codelineno-5-189" href="#__codelineno-5-189"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-5-190" name="__codelineno-5-190" href="#__codelineno-5-190"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-5-191" name="__codelineno-5-191" href="#__codelineno-5-191"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-192" name="__codelineno-5-192" href="#__codelineno-5-192"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-5-193" name="__codelineno-5-193" href="#__codelineno-5-193"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-5-194" name="__codelineno-5-194" href="#__codelineno-5-194"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-195" name="__codelineno-5-195" href="#__codelineno-5-195"></a>
<a id="__codelineno-5-196" name="__codelineno-5-196" href="#__codelineno-5-196"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-5-197" name="__codelineno-5-197" href="#__codelineno-5-197"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-198" name="__codelineno-5-198" href="#__codelineno-5-198"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-5-199" name="__codelineno-5-199" href="#__codelineno-5-199"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-5-200" name="__codelineno-5-200" href="#__codelineno-5-200"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-201" name="__codelineno-5-201" href="#__codelineno-5-201"></a>
<a id="__codelineno-5-202" name="__codelineno-5-202" href="#__codelineno-5-202"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-5-203" name="__codelineno-5-203" href="#__codelineno-5-203"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-5-204" name="__codelineno-5-204" href="#__codelineno-5-204"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-205" name="__codelineno-5-205" href="#__codelineno-5-205"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-5-206" name="__codelineno-5-206" href="#__codelineno-5-206"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-5-207" name="__codelineno-5-207" href="#__codelineno-5-207"></a>
<a id="__codelineno-5-208" name="__codelineno-5-208" href="#__codelineno-5-208"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-5-209" name="__codelineno-5-209" href="#__codelineno-5-209"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-5-210" name="__codelineno-5-210" href="#__codelineno-5-210"></a>
<a id="__codelineno-5-211" name="__codelineno-5-211" href="#__codelineno-5-211"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-5-212" name="__codelineno-5-212" href="#__codelineno-5-212"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-5-213" name="__codelineno-5-213" href="#__codelineno-5-213"></a>
<a id="__codelineno-5-214" name="__codelineno-5-214" href="#__codelineno-5-214"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-5-215" name="__codelineno-5-215" href="#__codelineno-5-215"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-5-216" name="__codelineno-5-216" href="#__codelineno-5-216"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-217" name="__codelineno-5-217" href="#__codelineno-5-217"></a>
<a id="__codelineno-5-218" name="__codelineno-5-218" href="#__codelineno-5-218"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-5-219" name="__codelineno-5-219" href="#__codelineno-5-219"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-220" name="__codelineno-5-220" href="#__codelineno-5-220"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-5-221" name="__codelineno-5-221" href="#__codelineno-5-221"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-5-222" name="__codelineno-5-222" href="#__codelineno-5-222"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-5-223" name="__codelineno-5-223" href="#__codelineno-5-223"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-224" name="__codelineno-5-224" href="#__codelineno-5-224"></a>
<a id="__codelineno-5-225" name="__codelineno-5-225" href="#__codelineno-5-225"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-5-226" name="__codelineno-5-226" href="#__codelineno-5-226"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-227" name="__codelineno-5-227" href="#__codelineno-5-227"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-5-228" name="__codelineno-5-228" href="#__codelineno-5-228"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-5-229" name="__codelineno-5-229" href="#__codelineno-5-229"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-230" name="__codelineno-5-230" href="#__codelineno-5-230"></a>
<a id="__codelineno-5-231" name="__codelineno-5-231" href="#__codelineno-5-231"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-5-232" name="__codelineno-5-232" href="#__codelineno-5-232"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-5-233" name="__codelineno-5-233" href="#__codelineno-5-233"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-5-234" name="__codelineno-5-234" href="#__codelineno-5-234"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-5-235" name="__codelineno-5-235" href="#__codelineno-5-235"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-5-236" name="__codelineno-5-236" href="#__codelineno-5-236"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-5-237" name="__codelineno-5-237" href="#__codelineno-5-237"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="7-fade-out-effect">7. Fade Out Effect<a class="headerlink" href="#7-fade-out-effect" title="Permanent link">&para;</a></h2>
<ul>
<li>We add animation so that numbers do not vanish abruptly but fade out gently.</li>
<li>After some time has passed since appearance, we gradually increase transparency and slowly move it upwards.</li>
<li>By letting it disappear with a lingering effect, abruptness is eliminated, resulting in a natural look.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/7.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="p">{</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="p">};</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="p">{</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
<a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="p">};</span>
<a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>
<a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="p">{</span>
<a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
<a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>
<a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a>
<a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>
<a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a>
<a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>
<a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a>
<a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a>
<a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a>
<a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a>
<a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a>
<a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a>
<a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a>
<a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a>
<a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a>
<a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a><span class="p">};</span>
<a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a>
<a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a><span class="p">{</span>
<a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a>
<a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a>
<a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a>
<a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a>
<a id="__codelineno-6-126" name="__codelineno-6-126" href="#__codelineno-6-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-6-127" name="__codelineno-6-127" href="#__codelineno-6-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-6-128" name="__codelineno-6-128" href="#__codelineno-6-128"></a>
<a id="__codelineno-6-129" name="__codelineno-6-129" href="#__codelineno-6-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-6-130" name="__codelineno-6-130" href="#__codelineno-6-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-6-131" name="__codelineno-6-131" href="#__codelineno-6-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-6-132" name="__codelineno-6-132" href="#__codelineno-6-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-6-133" name="__codelineno-6-133" href="#__codelineno-6-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-6-134" name="__codelineno-6-134" href="#__codelineno-6-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-6-135" name="__codelineno-6-135" href="#__codelineno-6-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-6-136" name="__codelineno-6-136" href="#__codelineno-6-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-6-137" name="__codelineno-6-137" href="#__codelineno-6-137"></a>
<a id="__codelineno-6-138" name="__codelineno-6-138" href="#__codelineno-6-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-6-139" name="__codelineno-6-139" href="#__codelineno-6-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-6-140" name="__codelineno-6-140" href="#__codelineno-6-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-6-141" name="__codelineno-6-141" href="#__codelineno-6-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-6-142" name="__codelineno-6-142" href="#__codelineno-6-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-6-143" name="__codelineno-6-143" href="#__codelineno-6-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-6-144" name="__codelineno-6-144" href="#__codelineno-6-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-6-145" name="__codelineno-6-145" href="#__codelineno-6-145"></a><span class="hll"><span class="w">		</span><span class="c1">// Fade out at the end</span>
</span><a id="__codelineno-6-146" name="__codelineno-6-146" href="#__codelineno-6-146"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-6-147" name="__codelineno-6-147" href="#__codelineno-6-147"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">Lifetime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 0.0 -&gt; 1.0 from 0.2s before end to Lifetime</span>
</span><a id="__codelineno-6-148" name="__codelineno-6-148" href="#__codelineno-6-148"></a><span class="hll"><span class="w">			</span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
</span><a id="__codelineno-6-149" name="__codelineno-6-149" href="#__codelineno-6-149"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-6-150" name="__codelineno-6-150" href="#__codelineno-6-150"></a>
<a id="__codelineno-6-151" name="__codelineno-6-151" href="#__codelineno-6-151"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-6-152" name="__codelineno-6-152" href="#__codelineno-6-152"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-6-153" name="__codelineno-6-153" href="#__codelineno-6-153"></a>
<a id="__codelineno-6-154" name="__codelineno-6-154" href="#__codelineno-6-154"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-6-155" name="__codelineno-6-155" href="#__codelineno-6-155"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-6-156" name="__codelineno-6-156" href="#__codelineno-6-156"></a><span class="hll"><span class="w">		</span><span class="c1">// Rise from midway</span>
</span><a id="__codelineno-6-157" name="__codelineno-6-157" href="#__codelineno-6-157"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-6-158" name="__codelineno-6-158" href="#__codelineno-6-158"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Time elapsed since 0.2s</span>
</span><a id="__codelineno-6-159" name="__codelineno-6-159" href="#__codelineno-6-159"></a><span class="hll"><span class="w">			</span><span class="n">basePos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="mf">120.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
</span><a id="__codelineno-6-160" name="__codelineno-6-160" href="#__codelineno-6-160"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-6-161" name="__codelineno-6-161" href="#__codelineno-6-161"></a>
<a id="__codelineno-6-162" name="__codelineno-6-162" href="#__codelineno-6-162"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-6-163" name="__codelineno-6-163" href="#__codelineno-6-163"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-6-164" name="__codelineno-6-164" href="#__codelineno-6-164"></a>
<a id="__codelineno-6-165" name="__codelineno-6-165" href="#__codelineno-6-165"></a><span class="w">		</span><span class="c1">// Draw number outline</span>
<a id="__codelineno-6-166" name="__codelineno-6-166" href="#__codelineno-6-166"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-6-167" name="__codelineno-6-167" href="#__codelineno-6-167"></a>
<a id="__codelineno-6-168" name="__codelineno-6-168" href="#__codelineno-6-168"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-6-169" name="__codelineno-6-169" href="#__codelineno-6-169"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-6-170" name="__codelineno-6-170" href="#__codelineno-6-170"></a><span class="p">};</span>
<a id="__codelineno-6-171" name="__codelineno-6-171" href="#__codelineno-6-171"></a>
<a id="__codelineno-6-172" name="__codelineno-6-172" href="#__codelineno-6-172"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-6-173" name="__codelineno-6-173" href="#__codelineno-6-173"></a><span class="p">{</span>
<a id="__codelineno-6-174" name="__codelineno-6-174" href="#__codelineno-6-174"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-6-175" name="__codelineno-6-175" href="#__codelineno-6-175"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-6-176" name="__codelineno-6-176" href="#__codelineno-6-176"></a>
<a id="__codelineno-6-177" name="__codelineno-6-177" href="#__codelineno-6-177"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-6-178" name="__codelineno-6-178" href="#__codelineno-6-178"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-179" name="__codelineno-6-179" href="#__codelineno-6-179"></a>
<a id="__codelineno-6-180" name="__codelineno-6-180" href="#__codelineno-6-180"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-6-181" name="__codelineno-6-181" href="#__codelineno-6-181"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-182" name="__codelineno-6-182" href="#__codelineno-6-182"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-183" name="__codelineno-6-183" href="#__codelineno-6-183"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-184" name="__codelineno-6-184" href="#__codelineno-6-184"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-185" name="__codelineno-6-185" href="#__codelineno-6-185"></a>
<a id="__codelineno-6-186" name="__codelineno-6-186" href="#__codelineno-6-186"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-6-187" name="__codelineno-6-187" href="#__codelineno-6-187"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-6-188" name="__codelineno-6-188" href="#__codelineno-6-188"></a>
<a id="__codelineno-6-189" name="__codelineno-6-189" href="#__codelineno-6-189"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-6-190" name="__codelineno-6-190" href="#__codelineno-6-190"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-6-191" name="__codelineno-6-191" href="#__codelineno-6-191"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-6-192" name="__codelineno-6-192" href="#__codelineno-6-192"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-6-193" name="__codelineno-6-193" href="#__codelineno-6-193"></a>
<a id="__codelineno-6-194" name="__codelineno-6-194" href="#__codelineno-6-194"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-6-195" name="__codelineno-6-195" href="#__codelineno-6-195"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="p">,</span><span class="w"> </span><span class="n">FontStyle</span><span class="o">::</span><span class="n">Italic</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-6-196" name="__codelineno-6-196" href="#__codelineno-6-196"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-6-197" name="__codelineno-6-197" href="#__codelineno-6-197"></a>
<a id="__codelineno-6-198" name="__codelineno-6-198" href="#__codelineno-6-198"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-6-199" name="__codelineno-6-199" href="#__codelineno-6-199"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-6-200" name="__codelineno-6-200" href="#__codelineno-6-200"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-6-201" name="__codelineno-6-201" href="#__codelineno-6-201"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-202" name="__codelineno-6-202" href="#__codelineno-6-202"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-6-203" name="__codelineno-6-203" href="#__codelineno-6-203"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-6-204" name="__codelineno-6-204" href="#__codelineno-6-204"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-205" name="__codelineno-6-205" href="#__codelineno-6-205"></a>
<a id="__codelineno-6-206" name="__codelineno-6-206" href="#__codelineno-6-206"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-6-207" name="__codelineno-6-207" href="#__codelineno-6-207"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-208" name="__codelineno-6-208" href="#__codelineno-6-208"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-6-209" name="__codelineno-6-209" href="#__codelineno-6-209"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-6-210" name="__codelineno-6-210" href="#__codelineno-6-210"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-211" name="__codelineno-6-211" href="#__codelineno-6-211"></a>
<a id="__codelineno-6-212" name="__codelineno-6-212" href="#__codelineno-6-212"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-6-213" name="__codelineno-6-213" href="#__codelineno-6-213"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-6-214" name="__codelineno-6-214" href="#__codelineno-6-214"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-215" name="__codelineno-6-215" href="#__codelineno-6-215"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-6-216" name="__codelineno-6-216" href="#__codelineno-6-216"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-6-217" name="__codelineno-6-217" href="#__codelineno-6-217"></a>
<a id="__codelineno-6-218" name="__codelineno-6-218" href="#__codelineno-6-218"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-6-219" name="__codelineno-6-219" href="#__codelineno-6-219"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-6-220" name="__codelineno-6-220" href="#__codelineno-6-220"></a>
<a id="__codelineno-6-221" name="__codelineno-6-221" href="#__codelineno-6-221"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-6-222" name="__codelineno-6-222" href="#__codelineno-6-222"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-6-223" name="__codelineno-6-223" href="#__codelineno-6-223"></a>
<a id="__codelineno-6-224" name="__codelineno-6-224" href="#__codelineno-6-224"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-6-225" name="__codelineno-6-225" href="#__codelineno-6-225"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-6-226" name="__codelineno-6-226" href="#__codelineno-6-226"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-227" name="__codelineno-6-227" href="#__codelineno-6-227"></a>
<a id="__codelineno-6-228" name="__codelineno-6-228" href="#__codelineno-6-228"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-6-229" name="__codelineno-6-229" href="#__codelineno-6-229"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-230" name="__codelineno-6-230" href="#__codelineno-6-230"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-6-231" name="__codelineno-6-231" href="#__codelineno-6-231"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-6-232" name="__codelineno-6-232" href="#__codelineno-6-232"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-6-233" name="__codelineno-6-233" href="#__codelineno-6-233"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-234" name="__codelineno-6-234" href="#__codelineno-6-234"></a>
<a id="__codelineno-6-235" name="__codelineno-6-235" href="#__codelineno-6-235"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-6-236" name="__codelineno-6-236" href="#__codelineno-6-236"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-237" name="__codelineno-6-237" href="#__codelineno-6-237"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-6-238" name="__codelineno-6-238" href="#__codelineno-6-238"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-6-239" name="__codelineno-6-239" href="#__codelineno-6-239"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-240" name="__codelineno-6-240" href="#__codelineno-6-240"></a>
<a id="__codelineno-6-241" name="__codelineno-6-241" href="#__codelineno-6-241"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-6-242" name="__codelineno-6-242" href="#__codelineno-6-242"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-6-243" name="__codelineno-6-243" href="#__codelineno-6-243"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-6-244" name="__codelineno-6-244" href="#__codelineno-6-244"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-6-245" name="__codelineno-6-245" href="#__codelineno-6-245"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-6-246" name="__codelineno-6-246" href="#__codelineno-6-246"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-6-247" name="__codelineno-6-247" href="#__codelineno-6-247"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="8-appearance-effect">8. Appearance Effect<a class="headerlink" href="#8-appearance-effect" title="Permanent link">&para;</a></h2>
<ul>
<li>We strengthen the impact at the moment the number appears.</li>
<li>Immediately after appearing, we make the size slightly larger and saturate (glow) the color, adding motion that immediately returns to its original size and color.</li>
<li>This creates a sense of impact upon hitting, improving the feedback when pressing the attack command.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/8.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="p">{</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="p">};</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="p">{</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="p">};</span>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="p">{</span>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a>
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a>
<a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a>
<a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a>
<a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a>
<a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a>
<a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a>
<a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a>
<a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-7-87" name="__codelineno-7-87" href="#__codelineno-7-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-7-88" name="__codelineno-7-88" href="#__codelineno-7-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-7-89" name="__codelineno-7-89" href="#__codelineno-7-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-90" name="__codelineno-7-90" href="#__codelineno-7-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-7-91" name="__codelineno-7-91" href="#__codelineno-7-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-92" name="__codelineno-7-92" href="#__codelineno-7-92"></a>
<a id="__codelineno-7-93" name="__codelineno-7-93" href="#__codelineno-7-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-7-94" name="__codelineno-7-94" href="#__codelineno-7-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-7-95" name="__codelineno-7-95" href="#__codelineno-7-95"></a>
<a id="__codelineno-7-96" name="__codelineno-7-96" href="#__codelineno-7-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-7-97" name="__codelineno-7-97" href="#__codelineno-7-97"></a>
<a id="__codelineno-7-98" name="__codelineno-7-98" href="#__codelineno-7-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-7-99" name="__codelineno-7-99" href="#__codelineno-7-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-100" name="__codelineno-7-100" href="#__codelineno-7-100"></a>
<a id="__codelineno-7-101" name="__codelineno-7-101" href="#__codelineno-7-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-7-102" name="__codelineno-7-102" href="#__codelineno-7-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-7-103" name="__codelineno-7-103" href="#__codelineno-7-103"></a><span class="p">};</span>
<a id="__codelineno-7-104" name="__codelineno-7-104" href="#__codelineno-7-104"></a>
<a id="__codelineno-7-105" name="__codelineno-7-105" href="#__codelineno-7-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-7-106" name="__codelineno-7-106" href="#__codelineno-7-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-7-107" name="__codelineno-7-107" href="#__codelineno-7-107"></a><span class="p">{</span>
<a id="__codelineno-7-108" name="__codelineno-7-108" href="#__codelineno-7-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-7-109" name="__codelineno-7-109" href="#__codelineno-7-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-7-110" name="__codelineno-7-110" href="#__codelineno-7-110"></a>
<a id="__codelineno-7-111" name="__codelineno-7-111" href="#__codelineno-7-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-7-112" name="__codelineno-7-112" href="#__codelineno-7-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-7-113" name="__codelineno-7-113" href="#__codelineno-7-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-7-114" name="__codelineno-7-114" href="#__codelineno-7-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-7-115" name="__codelineno-7-115" href="#__codelineno-7-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-7-116" name="__codelineno-7-116" href="#__codelineno-7-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-7-117" name="__codelineno-7-117" href="#__codelineno-7-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-7-118" name="__codelineno-7-118" href="#__codelineno-7-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-7-119" name="__codelineno-7-119" href="#__codelineno-7-119"></a>
<a id="__codelineno-7-120" name="__codelineno-7-120" href="#__codelineno-7-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-7-121" name="__codelineno-7-121" href="#__codelineno-7-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-7-122" name="__codelineno-7-122" href="#__codelineno-7-122"></a>
<a id="__codelineno-7-123" name="__codelineno-7-123" href="#__codelineno-7-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-7-124" name="__codelineno-7-124" href="#__codelineno-7-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-7-125" name="__codelineno-7-125" href="#__codelineno-7-125"></a>
<a id="__codelineno-7-126" name="__codelineno-7-126" href="#__codelineno-7-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-7-127" name="__codelineno-7-127" href="#__codelineno-7-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-7-128" name="__codelineno-7-128" href="#__codelineno-7-128"></a>
<a id="__codelineno-7-129" name="__codelineno-7-129" href="#__codelineno-7-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-7-130" name="__codelineno-7-130" href="#__codelineno-7-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-7-131" name="__codelineno-7-131" href="#__codelineno-7-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-7-132" name="__codelineno-7-132" href="#__codelineno-7-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-7-133" name="__codelineno-7-133" href="#__codelineno-7-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-7-134" name="__codelineno-7-134" href="#__codelineno-7-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-7-135" name="__codelineno-7-135" href="#__codelineno-7-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-7-136" name="__codelineno-7-136" href="#__codelineno-7-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-7-137" name="__codelineno-7-137" href="#__codelineno-7-137"></a>
<a id="__codelineno-7-138" name="__codelineno-7-138" href="#__codelineno-7-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-7-139" name="__codelineno-7-139" href="#__codelineno-7-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-7-140" name="__codelineno-7-140" href="#__codelineno-7-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-7-141" name="__codelineno-7-141" href="#__codelineno-7-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-7-142" name="__codelineno-7-142" href="#__codelineno-7-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-7-143" name="__codelineno-7-143" href="#__codelineno-7-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-7-144" name="__codelineno-7-144" href="#__codelineno-7-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-7-145" name="__codelineno-7-145" href="#__codelineno-7-145"></a><span class="hll"><span class="w">		</span><span class="c1">// Saturation of color upon appearance</span>
</span><a id="__codelineno-7-146" name="__codelineno-7-146" href="#__codelineno-7-146"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-7-147" name="__codelineno-7-147" href="#__codelineno-7-147"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
</span><a id="__codelineno-7-148" name="__codelineno-7-148" href="#__codelineno-7-148"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
</span><a id="__codelineno-7-149" name="__codelineno-7-149" href="#__codelineno-7-149"></a><span class="hll"><span class="w">			</span><span class="n">baseColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// Bright immediately after appearing, gradually converges to base color</span>
</span><a id="__codelineno-7-150" name="__codelineno-7-150" href="#__codelineno-7-150"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-7-151" name="__codelineno-7-151" href="#__codelineno-7-151"></a><span class="w">		</span><span class="c1">// Fade out at the end</span>
<a id="__codelineno-7-152" name="__codelineno-7-152" href="#__codelineno-7-152"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-153" name="__codelineno-7-153" href="#__codelineno-7-153"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">Lifetime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 0.0 -&gt; 1.0 from 0.2s before end to Lifetime</span>
<a id="__codelineno-7-154" name="__codelineno-7-154" href="#__codelineno-7-154"></a><span class="w">			</span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-7-155" name="__codelineno-7-155" href="#__codelineno-7-155"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-156" name="__codelineno-7-156" href="#__codelineno-7-156"></a>
<a id="__codelineno-7-157" name="__codelineno-7-157" href="#__codelineno-7-157"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-7-158" name="__codelineno-7-158" href="#__codelineno-7-158"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-7-159" name="__codelineno-7-159" href="#__codelineno-7-159"></a><span class="hll"><span class="w">		</span><span class="c1">// Size change upon appearance</span>
</span><a id="__codelineno-7-160" name="__codelineno-7-160" href="#__codelineno-7-160"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-7-161" name="__codelineno-7-161" href="#__codelineno-7-161"></a><span class="hll"><span class="w">			</span><span class="c1">// Extra size based on digits</span>
</span><a id="__codelineno-7-162" name="__codelineno-7-162" href="#__codelineno-7-162"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">extraSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">20.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">40.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">80.0</span><span class="p">;</span>
</span><a id="__codelineno-7-163" name="__codelineno-7-163" href="#__codelineno-7-163"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
</span><a id="__codelineno-7-164" name="__codelineno-7-164" href="#__codelineno-7-164"></a><span class="hll"><span class="w">			</span><span class="n">baseSize</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">extraSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Large immediately after appearing, gradually converges to base size</span>
</span><a id="__codelineno-7-165" name="__codelineno-7-165" href="#__codelineno-7-165"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-7-166" name="__codelineno-7-166" href="#__codelineno-7-166"></a>
<a id="__codelineno-7-167" name="__codelineno-7-167" href="#__codelineno-7-167"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-7-168" name="__codelineno-7-168" href="#__codelineno-7-168"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-7-169" name="__codelineno-7-169" href="#__codelineno-7-169"></a><span class="w">		</span><span class="c1">// Rise from midway</span>
<a id="__codelineno-7-170" name="__codelineno-7-170" href="#__codelineno-7-170"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-171" name="__codelineno-7-171" href="#__codelineno-7-171"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Time elapsed since 0.2s</span>
<a id="__codelineno-7-172" name="__codelineno-7-172" href="#__codelineno-7-172"></a><span class="w">			</span><span class="n">basePos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="mf">120.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-7-173" name="__codelineno-7-173" href="#__codelineno-7-173"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-174" name="__codelineno-7-174" href="#__codelineno-7-174"></a>
<a id="__codelineno-7-175" name="__codelineno-7-175" href="#__codelineno-7-175"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-7-176" name="__codelineno-7-176" href="#__codelineno-7-176"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-7-177" name="__codelineno-7-177" href="#__codelineno-7-177"></a>
<a id="__codelineno-7-178" name="__codelineno-7-178" href="#__codelineno-7-178"></a><span class="w">		</span><span class="c1">// Draw number outline</span>
<a id="__codelineno-7-179" name="__codelineno-7-179" href="#__codelineno-7-179"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-7-180" name="__codelineno-7-180" href="#__codelineno-7-180"></a>
<a id="__codelineno-7-181" name="__codelineno-7-181" href="#__codelineno-7-181"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-7-182" name="__codelineno-7-182" href="#__codelineno-7-182"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-7-183" name="__codelineno-7-183" href="#__codelineno-7-183"></a><span class="p">};</span>
<a id="__codelineno-7-184" name="__codelineno-7-184" href="#__codelineno-7-184"></a>
<a id="__codelineno-7-185" name="__codelineno-7-185" href="#__codelineno-7-185"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-7-186" name="__codelineno-7-186" href="#__codelineno-7-186"></a><span class="p">{</span>
<a id="__codelineno-7-187" name="__codelineno-7-187" href="#__codelineno-7-187"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-7-188" name="__codelineno-7-188" href="#__codelineno-7-188"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-7-189" name="__codelineno-7-189" href="#__codelineno-7-189"></a>
<a id="__codelineno-7-190" name="__codelineno-7-190" href="#__codelineno-7-190"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-7-191" name="__codelineno-7-191" href="#__codelineno-7-191"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-192" name="__codelineno-7-192" href="#__codelineno-7-192"></a>
<a id="__codelineno-7-193" name="__codelineno-7-193" href="#__codelineno-7-193"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-7-194" name="__codelineno-7-194" href="#__codelineno-7-194"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-195" name="__codelineno-7-195" href="#__codelineno-7-195"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-196" name="__codelineno-7-196" href="#__codelineno-7-196"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-197" name="__codelineno-7-197" href="#__codelineno-7-197"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-198" name="__codelineno-7-198" href="#__codelineno-7-198"></a>
<a id="__codelineno-7-199" name="__codelineno-7-199" href="#__codelineno-7-199"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-7-200" name="__codelineno-7-200" href="#__codelineno-7-200"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-201" name="__codelineno-7-201" href="#__codelineno-7-201"></a>
<a id="__codelineno-7-202" name="__codelineno-7-202" href="#__codelineno-7-202"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-7-203" name="__codelineno-7-203" href="#__codelineno-7-203"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-7-204" name="__codelineno-7-204" href="#__codelineno-7-204"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-7-205" name="__codelineno-7-205" href="#__codelineno-7-205"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-7-206" name="__codelineno-7-206" href="#__codelineno-7-206"></a>
<a id="__codelineno-7-207" name="__codelineno-7-207" href="#__codelineno-7-207"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-7-208" name="__codelineno-7-208" href="#__codelineno-7-208"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="p">,</span><span class="w"> </span><span class="n">FontStyle</span><span class="o">::</span><span class="n">Italic</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-7-209" name="__codelineno-7-209" href="#__codelineno-7-209"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-7-210" name="__codelineno-7-210" href="#__codelineno-7-210"></a>
<a id="__codelineno-7-211" name="__codelineno-7-211" href="#__codelineno-7-211"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-7-212" name="__codelineno-7-212" href="#__codelineno-7-212"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-7-213" name="__codelineno-7-213" href="#__codelineno-7-213"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-7-214" name="__codelineno-7-214" href="#__codelineno-7-214"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-215" name="__codelineno-7-215" href="#__codelineno-7-215"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-7-216" name="__codelineno-7-216" href="#__codelineno-7-216"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-7-217" name="__codelineno-7-217" href="#__codelineno-7-217"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-218" name="__codelineno-7-218" href="#__codelineno-7-218"></a>
<a id="__codelineno-7-219" name="__codelineno-7-219" href="#__codelineno-7-219"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-7-220" name="__codelineno-7-220" href="#__codelineno-7-220"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-221" name="__codelineno-7-221" href="#__codelineno-7-221"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-7-222" name="__codelineno-7-222" href="#__codelineno-7-222"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-7-223" name="__codelineno-7-223" href="#__codelineno-7-223"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-224" name="__codelineno-7-224" href="#__codelineno-7-224"></a>
<a id="__codelineno-7-225" name="__codelineno-7-225" href="#__codelineno-7-225"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-7-226" name="__codelineno-7-226" href="#__codelineno-7-226"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-7-227" name="__codelineno-7-227" href="#__codelineno-7-227"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-228" name="__codelineno-7-228" href="#__codelineno-7-228"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-7-229" name="__codelineno-7-229" href="#__codelineno-7-229"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-7-230" name="__codelineno-7-230" href="#__codelineno-7-230"></a>
<a id="__codelineno-7-231" name="__codelineno-7-231" href="#__codelineno-7-231"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-7-232" name="__codelineno-7-232" href="#__codelineno-7-232"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-7-233" name="__codelineno-7-233" href="#__codelineno-7-233"></a>
<a id="__codelineno-7-234" name="__codelineno-7-234" href="#__codelineno-7-234"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-7-235" name="__codelineno-7-235" href="#__codelineno-7-235"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-7-236" name="__codelineno-7-236" href="#__codelineno-7-236"></a>
<a id="__codelineno-7-237" name="__codelineno-7-237" href="#__codelineno-7-237"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-7-238" name="__codelineno-7-238" href="#__codelineno-7-238"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-7-239" name="__codelineno-7-239" href="#__codelineno-7-239"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-240" name="__codelineno-7-240" href="#__codelineno-7-240"></a>
<a id="__codelineno-7-241" name="__codelineno-7-241" href="#__codelineno-7-241"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-7-242" name="__codelineno-7-242" href="#__codelineno-7-242"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-243" name="__codelineno-7-243" href="#__codelineno-7-243"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-7-244" name="__codelineno-7-244" href="#__codelineno-7-244"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-7-245" name="__codelineno-7-245" href="#__codelineno-7-245"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-7-246" name="__codelineno-7-246" href="#__codelineno-7-246"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-247" name="__codelineno-7-247" href="#__codelineno-7-247"></a>
<a id="__codelineno-7-248" name="__codelineno-7-248" href="#__codelineno-7-248"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-7-249" name="__codelineno-7-249" href="#__codelineno-7-249"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-250" name="__codelineno-7-250" href="#__codelineno-7-250"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-7-251" name="__codelineno-7-251" href="#__codelineno-7-251"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-7-252" name="__codelineno-7-252" href="#__codelineno-7-252"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-253" name="__codelineno-7-253" href="#__codelineno-7-253"></a>
<a id="__codelineno-7-254" name="__codelineno-7-254" href="#__codelineno-7-254"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-7-255" name="__codelineno-7-255" href="#__codelineno-7-255"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-7-256" name="__codelineno-7-256" href="#__codelineno-7-256"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-7-257" name="__codelineno-7-257" href="#__codelineno-7-257"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-7-258" name="__codelineno-7-258" href="#__codelineno-7-258"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-7-259" name="__codelineno-7-259" href="#__codelineno-7-259"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-7-260" name="__codelineno-7-260" href="#__codelineno-7-260"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="9-display-simultaneous-damage-with-delay">9. Display Simultaneous Damage with Delay<a class="headerlink" href="#9-display-simultaneous-damage-with-delay" title="Permanent link">&para;</a></h2>
<ul>
<li>We prevent numbers from overlapping and crushing each other when a large number of hits occur at once.</li>
<li>Damage information is temporarily stored in a queue and displayed sequentially at fixed intervals (e.g., every 0.04 seconds).</li>
<li>This visualizes the rhythm of continuous hits and creates a sense of exhilaration in combos.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/9.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="p">{</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="p">};</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="p">{</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="p">};</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="p">{</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a>
<a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a>
<a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a>
<a id="__codelineno-8-63" name="__codelineno-8-63" href="#__codelineno-8-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-8-64" name="__codelineno-8-64" href="#__codelineno-8-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-8-65" name="__codelineno-8-65" href="#__codelineno-8-65"></a>
<a id="__codelineno-8-66" name="__codelineno-8-66" href="#__codelineno-8-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-8-67" name="__codelineno-8-67" href="#__codelineno-8-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-8-68" name="__codelineno-8-68" href="#__codelineno-8-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-69" name="__codelineno-8-69" href="#__codelineno-8-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-8-70" name="__codelineno-8-70" href="#__codelineno-8-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-8-71" name="__codelineno-8-71" href="#__codelineno-8-71"></a>
<a id="__codelineno-8-72" name="__codelineno-8-72" href="#__codelineno-8-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-8-73" name="__codelineno-8-73" href="#__codelineno-8-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-8-74" name="__codelineno-8-74" href="#__codelineno-8-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-8-75" name="__codelineno-8-75" href="#__codelineno-8-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-8-76" name="__codelineno-8-76" href="#__codelineno-8-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-8-77" name="__codelineno-8-77" href="#__codelineno-8-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-78" name="__codelineno-8-78" href="#__codelineno-8-78"></a>
<a id="__codelineno-8-79" name="__codelineno-8-79" href="#__codelineno-8-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-8-80" name="__codelineno-8-80" href="#__codelineno-8-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-8-81" name="__codelineno-8-81" href="#__codelineno-8-81"></a>
<a id="__codelineno-8-82" name="__codelineno-8-82" href="#__codelineno-8-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-8-83" name="__codelineno-8-83" href="#__codelineno-8-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-84" name="__codelineno-8-84" href="#__codelineno-8-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-8-85" name="__codelineno-8-85" href="#__codelineno-8-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-8-86" name="__codelineno-8-86" href="#__codelineno-8-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-8-87" name="__codelineno-8-87" href="#__codelineno-8-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-8-88" name="__codelineno-8-88" href="#__codelineno-8-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-8-89" name="__codelineno-8-89" href="#__codelineno-8-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-90" name="__codelineno-8-90" href="#__codelineno-8-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-8-91" name="__codelineno-8-91" href="#__codelineno-8-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-92" name="__codelineno-8-92" href="#__codelineno-8-92"></a>
<a id="__codelineno-8-93" name="__codelineno-8-93" href="#__codelineno-8-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-8-94" name="__codelineno-8-94" href="#__codelineno-8-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-8-95" name="__codelineno-8-95" href="#__codelineno-8-95"></a>
<a id="__codelineno-8-96" name="__codelineno-8-96" href="#__codelineno-8-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-8-97" name="__codelineno-8-97" href="#__codelineno-8-97"></a>
<a id="__codelineno-8-98" name="__codelineno-8-98" href="#__codelineno-8-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-8-99" name="__codelineno-8-99" href="#__codelineno-8-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-100" name="__codelineno-8-100" href="#__codelineno-8-100"></a>
<a id="__codelineno-8-101" name="__codelineno-8-101" href="#__codelineno-8-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-8-102" name="__codelineno-8-102" href="#__codelineno-8-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-8-103" name="__codelineno-8-103" href="#__codelineno-8-103"></a><span class="p">};</span>
<a id="__codelineno-8-104" name="__codelineno-8-104" href="#__codelineno-8-104"></a>
<a id="__codelineno-8-105" name="__codelineno-8-105" href="#__codelineno-8-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-8-106" name="__codelineno-8-106" href="#__codelineno-8-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-8-107" name="__codelineno-8-107" href="#__codelineno-8-107"></a><span class="p">{</span>
<a id="__codelineno-8-108" name="__codelineno-8-108" href="#__codelineno-8-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-8-109" name="__codelineno-8-109" href="#__codelineno-8-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-8-110" name="__codelineno-8-110" href="#__codelineno-8-110"></a>
<a id="__codelineno-8-111" name="__codelineno-8-111" href="#__codelineno-8-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-8-112" name="__codelineno-8-112" href="#__codelineno-8-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-8-113" name="__codelineno-8-113" href="#__codelineno-8-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-8-114" name="__codelineno-8-114" href="#__codelineno-8-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-8-115" name="__codelineno-8-115" href="#__codelineno-8-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-8-116" name="__codelineno-8-116" href="#__codelineno-8-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-8-117" name="__codelineno-8-117" href="#__codelineno-8-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-8-118" name="__codelineno-8-118" href="#__codelineno-8-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-8-119" name="__codelineno-8-119" href="#__codelineno-8-119"></a>
<a id="__codelineno-8-120" name="__codelineno-8-120" href="#__codelineno-8-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-8-121" name="__codelineno-8-121" href="#__codelineno-8-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-8-122" name="__codelineno-8-122" href="#__codelineno-8-122"></a>
<a id="__codelineno-8-123" name="__codelineno-8-123" href="#__codelineno-8-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-8-124" name="__codelineno-8-124" href="#__codelineno-8-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-8-125" name="__codelineno-8-125" href="#__codelineno-8-125"></a>
<a id="__codelineno-8-126" name="__codelineno-8-126" href="#__codelineno-8-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-8-127" name="__codelineno-8-127" href="#__codelineno-8-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-8-128" name="__codelineno-8-128" href="#__codelineno-8-128"></a>
<a id="__codelineno-8-129" name="__codelineno-8-129" href="#__codelineno-8-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-8-130" name="__codelineno-8-130" href="#__codelineno-8-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-8-131" name="__codelineno-8-131" href="#__codelineno-8-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-8-132" name="__codelineno-8-132" href="#__codelineno-8-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-8-133" name="__codelineno-8-133" href="#__codelineno-8-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-8-134" name="__codelineno-8-134" href="#__codelineno-8-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-8-135" name="__codelineno-8-135" href="#__codelineno-8-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-8-136" name="__codelineno-8-136" href="#__codelineno-8-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-8-137" name="__codelineno-8-137" href="#__codelineno-8-137"></a>
<a id="__codelineno-8-138" name="__codelineno-8-138" href="#__codelineno-8-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-8-139" name="__codelineno-8-139" href="#__codelineno-8-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-8-140" name="__codelineno-8-140" href="#__codelineno-8-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-8-141" name="__codelineno-8-141" href="#__codelineno-8-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-8-142" name="__codelineno-8-142" href="#__codelineno-8-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-8-143" name="__codelineno-8-143" href="#__codelineno-8-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-8-144" name="__codelineno-8-144" href="#__codelineno-8-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-8-145" name="__codelineno-8-145" href="#__codelineno-8-145"></a><span class="w">		</span><span class="c1">// Saturation of color upon appearance</span>
<a id="__codelineno-8-146" name="__codelineno-8-146" href="#__codelineno-8-146"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-147" name="__codelineno-8-147" href="#__codelineno-8-147"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
<a id="__codelineno-8-148" name="__codelineno-8-148" href="#__codelineno-8-148"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-8-149" name="__codelineno-8-149" href="#__codelineno-8-149"></a><span class="w">			</span><span class="n">baseColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// Bright immediately after appearing, gradually converges to base color</span>
<a id="__codelineno-8-150" name="__codelineno-8-150" href="#__codelineno-8-150"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-151" name="__codelineno-8-151" href="#__codelineno-8-151"></a><span class="w">		</span><span class="c1">// Fade out at the end</span>
<a id="__codelineno-8-152" name="__codelineno-8-152" href="#__codelineno-8-152"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-153" name="__codelineno-8-153" href="#__codelineno-8-153"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">Lifetime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 0.0 -&gt; 1.0 from 0.2s before end to Lifetime</span>
<a id="__codelineno-8-154" name="__codelineno-8-154" href="#__codelineno-8-154"></a><span class="w">			</span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-8-155" name="__codelineno-8-155" href="#__codelineno-8-155"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-156" name="__codelineno-8-156" href="#__codelineno-8-156"></a>
<a id="__codelineno-8-157" name="__codelineno-8-157" href="#__codelineno-8-157"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-8-158" name="__codelineno-8-158" href="#__codelineno-8-158"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-8-159" name="__codelineno-8-159" href="#__codelineno-8-159"></a><span class="w">		</span><span class="c1">// Size change upon appearance</span>
<a id="__codelineno-8-160" name="__codelineno-8-160" href="#__codelineno-8-160"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-161" name="__codelineno-8-161" href="#__codelineno-8-161"></a><span class="w">			</span><span class="c1">// Extra size based on digits</span>
<a id="__codelineno-8-162" name="__codelineno-8-162" href="#__codelineno-8-162"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">extraSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">20.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">40.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">80.0</span><span class="p">;</span>
<a id="__codelineno-8-163" name="__codelineno-8-163" href="#__codelineno-8-163"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
<a id="__codelineno-8-164" name="__codelineno-8-164" href="#__codelineno-8-164"></a><span class="w">			</span><span class="n">baseSize</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">extraSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Large immediately after appearing, gradually converges to base size</span>
<a id="__codelineno-8-165" name="__codelineno-8-165" href="#__codelineno-8-165"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-166" name="__codelineno-8-166" href="#__codelineno-8-166"></a>
<a id="__codelineno-8-167" name="__codelineno-8-167" href="#__codelineno-8-167"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-8-168" name="__codelineno-8-168" href="#__codelineno-8-168"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-8-169" name="__codelineno-8-169" href="#__codelineno-8-169"></a><span class="w">		</span><span class="c1">// Rise from midway</span>
<a id="__codelineno-8-170" name="__codelineno-8-170" href="#__codelineno-8-170"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-171" name="__codelineno-8-171" href="#__codelineno-8-171"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Time elapsed since 0.2s</span>
<a id="__codelineno-8-172" name="__codelineno-8-172" href="#__codelineno-8-172"></a><span class="w">			</span><span class="n">basePos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="mf">120.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-8-173" name="__codelineno-8-173" href="#__codelineno-8-173"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-174" name="__codelineno-8-174" href="#__codelineno-8-174"></a>
<a id="__codelineno-8-175" name="__codelineno-8-175" href="#__codelineno-8-175"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-8-176" name="__codelineno-8-176" href="#__codelineno-8-176"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">);</span>
<a id="__codelineno-8-177" name="__codelineno-8-177" href="#__codelineno-8-177"></a>
<a id="__codelineno-8-178" name="__codelineno-8-178" href="#__codelineno-8-178"></a><span class="w">		</span><span class="c1">// Draw number outline</span>
<a id="__codelineno-8-179" name="__codelineno-8-179" href="#__codelineno-8-179"></a><span class="w">		</span><span class="n">m_font</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">).</span><span class="n">drawAt</span><span class="p">(</span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-8-180" name="__codelineno-8-180" href="#__codelineno-8-180"></a>
<a id="__codelineno-8-181" name="__codelineno-8-181" href="#__codelineno-8-181"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-8-182" name="__codelineno-8-182" href="#__codelineno-8-182"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-8-183" name="__codelineno-8-183" href="#__codelineno-8-183"></a><span class="p">};</span>
<a id="__codelineno-8-184" name="__codelineno-8-184" href="#__codelineno-8-184"></a>
<a id="__codelineno-8-185" name="__codelineno-8-185" href="#__codelineno-8-185"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-8-186" name="__codelineno-8-186" href="#__codelineno-8-186"></a><span class="p">{</span>
<a id="__codelineno-8-187" name="__codelineno-8-187" href="#__codelineno-8-187"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-8-188" name="__codelineno-8-188" href="#__codelineno-8-188"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-8-189" name="__codelineno-8-189" href="#__codelineno-8-189"></a>
<a id="__codelineno-8-190" name="__codelineno-8-190" href="#__codelineno-8-190"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-8-191" name="__codelineno-8-191" href="#__codelineno-8-191"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-192" name="__codelineno-8-192" href="#__codelineno-8-192"></a>
<a id="__codelineno-8-193" name="__codelineno-8-193" href="#__codelineno-8-193"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-8-194" name="__codelineno-8-194" href="#__codelineno-8-194"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-195" name="__codelineno-8-195" href="#__codelineno-8-195"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-196" name="__codelineno-8-196" href="#__codelineno-8-196"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-197" name="__codelineno-8-197" href="#__codelineno-8-197"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-198" name="__codelineno-8-198" href="#__codelineno-8-198"></a>
<a id="__codelineno-8-199" name="__codelineno-8-199" href="#__codelineno-8-199"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-8-200" name="__codelineno-8-200" href="#__codelineno-8-200"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-8-201" name="__codelineno-8-201" href="#__codelineno-8-201"></a>
<a id="__codelineno-8-202" name="__codelineno-8-202" href="#__codelineno-8-202"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-8-203" name="__codelineno-8-203" href="#__codelineno-8-203"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-8-204" name="__codelineno-8-204" href="#__codelineno-8-204"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-8-205" name="__codelineno-8-205" href="#__codelineno-8-205"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-8-206" name="__codelineno-8-206" href="#__codelineno-8-206"></a>
<a id="__codelineno-8-207" name="__codelineno-8-207" href="#__codelineno-8-207"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-8-208" name="__codelineno-8-208" href="#__codelineno-8-208"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="p">,</span><span class="w"> </span><span class="n">FontStyle</span><span class="o">::</span><span class="n">Italic</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-8-209" name="__codelineno-8-209" href="#__codelineno-8-209"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-8-210" name="__codelineno-8-210" href="#__codelineno-8-210"></a>
<a id="__codelineno-8-211" name="__codelineno-8-211" href="#__codelineno-8-211"></a><span class="hll"><span class="w">	</span><span class="c1">// Hit info queue</span>
</span><a id="__codelineno-8-212" name="__codelineno-8-212" href="#__codelineno-8-212"></a><span class="hll"><span class="w">	</span><span class="n">std</span><span class="o">::</span><span class="n">queue</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">;</span>
</span><a id="__codelineno-8-213" name="__codelineno-8-213" href="#__codelineno-8-213"></a><span class="hll"><span class="w">	</span><span class="c1">// Minimum interval for issuing hit effects (seconds)</span>
</span><a id="__codelineno-8-214" name="__codelineno-8-214" href="#__codelineno-8-214"></a><span class="hll"><span class="w">	</span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">hitInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.04</span><span class="p">;</span>
</span><a id="__codelineno-8-215" name="__codelineno-8-215" href="#__codelineno-8-215"></a><span class="hll"><span class="w">	</span><span class="c1">// Time elapsed since the last hit effect was issued (seconds)</span>
</span><a id="__codelineno-8-216" name="__codelineno-8-216" href="#__codelineno-8-216"></a><span class="hll"><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
</span><a id="__codelineno-8-217" name="__codelineno-8-217" href="#__codelineno-8-217"></a>
<a id="__codelineno-8-218" name="__codelineno-8-218" href="#__codelineno-8-218"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-8-219" name="__codelineno-8-219" href="#__codelineno-8-219"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-8-220" name="__codelineno-8-220" href="#__codelineno-8-220"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-8-221" name="__codelineno-8-221" href="#__codelineno-8-221"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-222" name="__codelineno-8-222" href="#__codelineno-8-222"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-8-223" name="__codelineno-8-223" href="#__codelineno-8-223"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-8-224" name="__codelineno-8-224" href="#__codelineno-8-224"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-225" name="__codelineno-8-225" href="#__codelineno-8-225"></a>
<a id="__codelineno-8-226" name="__codelineno-8-226" href="#__codelineno-8-226"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-8-227" name="__codelineno-8-227" href="#__codelineno-8-227"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-228" name="__codelineno-8-228" href="#__codelineno-8-228"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-8-229" name="__codelineno-8-229" href="#__codelineno-8-229"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-8-230" name="__codelineno-8-230" href="#__codelineno-8-230"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-231" name="__codelineno-8-231" href="#__codelineno-8-231"></a>
<a id="__codelineno-8-232" name="__codelineno-8-232" href="#__codelineno-8-232"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-8-233" name="__codelineno-8-233" href="#__codelineno-8-233"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-8-234" name="__codelineno-8-234" href="#__codelineno-8-234"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-235" name="__codelineno-8-235" href="#__codelineno-8-235"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-8-236" name="__codelineno-8-236" href="#__codelineno-8-236"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-8-237" name="__codelineno-8-237" href="#__codelineno-8-237"></a>
<a id="__codelineno-8-238" name="__codelineno-8-238" href="#__codelineno-8-238"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-8-239" name="__codelineno-8-239" href="#__codelineno-8-239"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-8-240" name="__codelineno-8-240" href="#__codelineno-8-240"></a>
<a id="__codelineno-8-241" name="__codelineno-8-241" href="#__codelineno-8-241"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-8-242" name="__codelineno-8-242" href="#__codelineno-8-242"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-8-243" name="__codelineno-8-243" href="#__codelineno-8-243"></a>
<a id="__codelineno-8-244" name="__codelineno-8-244" href="#__codelineno-8-244"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-8-245" name="__codelineno-8-245" href="#__codelineno-8-245"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-8-246" name="__codelineno-8-246" href="#__codelineno-8-246"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-247" name="__codelineno-8-247" href="#__codelineno-8-247"></a>
<a id="__codelineno-8-248" name="__codelineno-8-248" href="#__codelineno-8-248"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-8-249" name="__codelineno-8-249" href="#__codelineno-8-249"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-250" name="__codelineno-8-250" href="#__codelineno-8-250"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-8-251" name="__codelineno-8-251" href="#__codelineno-8-251"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-8-252" name="__codelineno-8-252" href="#__codelineno-8-252"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-8-253" name="__codelineno-8-253" href="#__codelineno-8-253"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-254" name="__codelineno-8-254" href="#__codelineno-8-254"></a>
<a id="__codelineno-8-255" name="__codelineno-8-255" href="#__codelineno-8-255"></a><span class="hll"><span class="w">		</span><span class="c1">// Add issued hit info to queue</span>
</span><a id="__codelineno-8-256" name="__codelineno-8-256" href="#__codelineno-8-256"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-8-257" name="__codelineno-8-257" href="#__codelineno-8-257"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-258" name="__codelineno-8-258" href="#__codelineno-8-258"></a><span class="hll"><span class="w">			</span><span class="n">hitQueue</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">hit</span><span class="p">);</span>
</span><a id="__codelineno-8-259" name="__codelineno-8-259" href="#__codelineno-8-259"></a><span class="hll"><span class="w">			</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitInterval</span><span class="p">;</span><span class="w"> </span><span class="c1">// Pad time so new hits trigger effect immediately</span>
</span><a id="__codelineno-8-260" name="__codelineno-8-260" href="#__codelineno-8-260"></a><span class="hll"><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
</span><a id="__codelineno-8-261" name="__codelineno-8-261" href="#__codelineno-8-261"></a><span class="hll"><span class="w">			</span><span class="c1">//effectManager.add&lt;DamageNumber&gt;(hit, RandomVec2(targetQuad), font);</span>
</span><a id="__codelineno-8-262" name="__codelineno-8-262" href="#__codelineno-8-262"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-263" name="__codelineno-8-263" href="#__codelineno-8-263"></a>
<a id="__codelineno-8-264" name="__codelineno-8-264" href="#__codelineno-8-264"></a><span class="hll"><span class="w">		</span><span class="c1">// Process queue and issue effects</span>
</span><a id="__codelineno-8-265" name="__codelineno-8-265" href="#__codelineno-8-265"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-8-266" name="__codelineno-8-266" href="#__codelineno-8-266"></a><span class="hll"><span class="w">			</span><span class="c1">// Accumulate time</span>
</span><a id="__codelineno-8-267" name="__codelineno-8-267" href="#__codelineno-8-267"></a><span class="hll"><span class="w">			</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">Scene</span><span class="o">::</span><span class="n">DeltaTime</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">);</span>
</span><a id="__codelineno-8-268" name="__codelineno-8-268" href="#__codelineno-8-268"></a><span class="hll">
</span><a id="__codelineno-8-269" name="__codelineno-8-269" href="#__codelineno-8-269"></a><span class="hll"><span class="w">			</span><span class="c1">// Issue effects from the queue at fixed intervals</span>
</span><a id="__codelineno-8-270" name="__codelineno-8-270" href="#__codelineno-8-270"></a><span class="hll"><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hitInterval</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">accumulatedTime</span><span class="p">)</span>
</span><a id="__codelineno-8-271" name="__codelineno-8-271" href="#__codelineno-8-271"></a><span class="hll"><span class="w">			</span><span class="p">{</span>
</span><a id="__codelineno-8-272" name="__codelineno-8-272" href="#__codelineno-8-272"></a><span class="hll"><span class="w">				</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">not</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
</span><a id="__codelineno-8-273" name="__codelineno-8-273" href="#__codelineno-8-273"></a><span class="hll"><span class="w">				</span><span class="p">{</span>
</span><a id="__codelineno-8-274" name="__codelineno-8-274" href="#__codelineno-8-274"></a><span class="hll"><span class="w">					</span><span class="c1">// Get hit info from front of queue</span>
</span><a id="__codelineno-8-275" name="__codelineno-8-275" href="#__codelineno-8-275"></a><span class="hll"><span class="w">					</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">front</span><span class="p">();</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
</span><a id="__codelineno-8-276" name="__codelineno-8-276" href="#__codelineno-8-276"></a><span class="hll"><span class="w">					</span><span class="c1">// Generate effect at a random position within the target range</span>
</span><a id="__codelineno-8-277" name="__codelineno-8-277" href="#__codelineno-8-277"></a><span class="hll"><span class="w">					</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
</span><a id="__codelineno-8-278" name="__codelineno-8-278" href="#__codelineno-8-278"></a><span class="hll"><span class="w">					</span><span class="c1">// Reduce accumulated time</span>
</span><a id="__codelineno-8-279" name="__codelineno-8-279" href="#__codelineno-8-279"></a><span class="hll"><span class="w">					</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">hitInterval</span><span class="p">;</span>
</span><a id="__codelineno-8-280" name="__codelineno-8-280" href="#__codelineno-8-280"></a><span class="hll"><span class="w">				</span><span class="p">}</span>
</span><a id="__codelineno-8-281" name="__codelineno-8-281" href="#__codelineno-8-281"></a><span class="hll"><span class="w">			</span><span class="p">}</span>
</span><a id="__codelineno-8-282" name="__codelineno-8-282" href="#__codelineno-8-282"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-8-283" name="__codelineno-8-283" href="#__codelineno-8-283"></a>
<a id="__codelineno-8-284" name="__codelineno-8-284" href="#__codelineno-8-284"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-8-285" name="__codelineno-8-285" href="#__codelineno-8-285"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-8-286" name="__codelineno-8-286" href="#__codelineno-8-286"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-8-287" name="__codelineno-8-287" href="#__codelineno-8-287"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-8-288" name="__codelineno-8-288" href="#__codelineno-8-288"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-8-289" name="__codelineno-8-289" href="#__codelineno-8-289"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-8-290" name="__codelineno-8-290" href="#__codelineno-8-290"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="10-add-gradients">10. Add Gradients<a class="headerlink" href="#10-add-gradients" title="Permanent link">&para;</a></h2>
<ul>
<li>We stop using solid color fills and apply a gradient where the top of the text is bright and the bottom is darker.</li>
<li>By customizing the text drawing process and coloring each character carefully, we create a rich texture like a professional game.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/10.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="p">};</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="p">{</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="p">};</span>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a><span class="p">{</span>
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a>
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-9-44" name="__codelineno-9-44" href="#__codelineno-9-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-9-45" name="__codelineno-9-45" href="#__codelineno-9-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-9-46" name="__codelineno-9-46" href="#__codelineno-9-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-9-47" name="__codelineno-9-47" href="#__codelineno-9-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-48" name="__codelineno-9-48" href="#__codelineno-9-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-9-49" name="__codelineno-9-49" href="#__codelineno-9-49"></a>
<a id="__codelineno-9-50" name="__codelineno-9-50" href="#__codelineno-9-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-9-51" name="__codelineno-9-51" href="#__codelineno-9-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-9-52" name="__codelineno-9-52" href="#__codelineno-9-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-9-53" name="__codelineno-9-53" href="#__codelineno-9-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-9-54" name="__codelineno-9-54" href="#__codelineno-9-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-9-55" name="__codelineno-9-55" href="#__codelineno-9-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-9-56" name="__codelineno-9-56" href="#__codelineno-9-56"></a>
<a id="__codelineno-9-57" name="__codelineno-9-57" href="#__codelineno-9-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-9-58" name="__codelineno-9-58" href="#__codelineno-9-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-9-59" name="__codelineno-9-59" href="#__codelineno-9-59"></a>
<a id="__codelineno-9-60" name="__codelineno-9-60" href="#__codelineno-9-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-9-61" name="__codelineno-9-61" href="#__codelineno-9-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-9-62" name="__codelineno-9-62" href="#__codelineno-9-62"></a>
<a id="__codelineno-9-63" name="__codelineno-9-63" href="#__codelineno-9-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-9-64" name="__codelineno-9-64" href="#__codelineno-9-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-9-65" name="__codelineno-9-65" href="#__codelineno-9-65"></a>
<a id="__codelineno-9-66" name="__codelineno-9-66" href="#__codelineno-9-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-9-67" name="__codelineno-9-67" href="#__codelineno-9-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-9-68" name="__codelineno-9-68" href="#__codelineno-9-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-69" name="__codelineno-9-69" href="#__codelineno-9-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-9-70" name="__codelineno-9-70" href="#__codelineno-9-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-9-71" name="__codelineno-9-71" href="#__codelineno-9-71"></a>
<a id="__codelineno-9-72" name="__codelineno-9-72" href="#__codelineno-9-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-9-73" name="__codelineno-9-73" href="#__codelineno-9-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-9-74" name="__codelineno-9-74" href="#__codelineno-9-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-9-75" name="__codelineno-9-75" href="#__codelineno-9-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-9-76" name="__codelineno-9-76" href="#__codelineno-9-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-9-77" name="__codelineno-9-77" href="#__codelineno-9-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-78" name="__codelineno-9-78" href="#__codelineno-9-78"></a>
<a id="__codelineno-9-79" name="__codelineno-9-79" href="#__codelineno-9-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-9-80" name="__codelineno-9-80" href="#__codelineno-9-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-9-81" name="__codelineno-9-81" href="#__codelineno-9-81"></a>
<a id="__codelineno-9-82" name="__codelineno-9-82" href="#__codelineno-9-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-9-83" name="__codelineno-9-83" href="#__codelineno-9-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-84" name="__codelineno-9-84" href="#__codelineno-9-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-9-85" name="__codelineno-9-85" href="#__codelineno-9-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-9-86" name="__codelineno-9-86" href="#__codelineno-9-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-9-87" name="__codelineno-9-87" href="#__codelineno-9-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-9-88" name="__codelineno-9-88" href="#__codelineno-9-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-9-89" name="__codelineno-9-89" href="#__codelineno-9-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-90" name="__codelineno-9-90" href="#__codelineno-9-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-9-91" name="__codelineno-9-91" href="#__codelineno-9-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-92" name="__codelineno-9-92" href="#__codelineno-9-92"></a>
<a id="__codelineno-9-93" name="__codelineno-9-93" href="#__codelineno-9-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-9-94" name="__codelineno-9-94" href="#__codelineno-9-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-9-95" name="__codelineno-9-95" href="#__codelineno-9-95"></a>
<a id="__codelineno-9-96" name="__codelineno-9-96" href="#__codelineno-9-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-9-97" name="__codelineno-9-97" href="#__codelineno-9-97"></a>
<a id="__codelineno-9-98" name="__codelineno-9-98" href="#__codelineno-9-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-9-99" name="__codelineno-9-99" href="#__codelineno-9-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-100" name="__codelineno-9-100" href="#__codelineno-9-100"></a>
<a id="__codelineno-9-101" name="__codelineno-9-101" href="#__codelineno-9-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-9-102" name="__codelineno-9-102" href="#__codelineno-9-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-9-103" name="__codelineno-9-103" href="#__codelineno-9-103"></a><span class="p">};</span>
<a id="__codelineno-9-104" name="__codelineno-9-104" href="#__codelineno-9-104"></a>
<a id="__codelineno-9-105" name="__codelineno-9-105" href="#__codelineno-9-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-9-106" name="__codelineno-9-106" href="#__codelineno-9-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-9-107" name="__codelineno-9-107" href="#__codelineno-9-107"></a><span class="p">{</span>
<a id="__codelineno-9-108" name="__codelineno-9-108" href="#__codelineno-9-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-9-109" name="__codelineno-9-109" href="#__codelineno-9-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-9-110" name="__codelineno-9-110" href="#__codelineno-9-110"></a>
<a id="__codelineno-9-111" name="__codelineno-9-111" href="#__codelineno-9-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-9-112" name="__codelineno-9-112" href="#__codelineno-9-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-9-113" name="__codelineno-9-113" href="#__codelineno-9-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-9-114" name="__codelineno-9-114" href="#__codelineno-9-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-9-115" name="__codelineno-9-115" href="#__codelineno-9-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-9-116" name="__codelineno-9-116" href="#__codelineno-9-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-9-117" name="__codelineno-9-117" href="#__codelineno-9-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-9-118" name="__codelineno-9-118" href="#__codelineno-9-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-9-119" name="__codelineno-9-119" href="#__codelineno-9-119"></a>
<a id="__codelineno-9-120" name="__codelineno-9-120" href="#__codelineno-9-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-9-121" name="__codelineno-9-121" href="#__codelineno-9-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-9-122" name="__codelineno-9-122" href="#__codelineno-9-122"></a>
<a id="__codelineno-9-123" name="__codelineno-9-123" href="#__codelineno-9-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-9-124" name="__codelineno-9-124" href="#__codelineno-9-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-9-125" name="__codelineno-9-125" href="#__codelineno-9-125"></a>
<a id="__codelineno-9-126" name="__codelineno-9-126" href="#__codelineno-9-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-9-127" name="__codelineno-9-127" href="#__codelineno-9-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-9-128" name="__codelineno-9-128" href="#__codelineno-9-128"></a>
<a id="__codelineno-9-129" name="__codelineno-9-129" href="#__codelineno-9-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-9-130" name="__codelineno-9-130" href="#__codelineno-9-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-9-131" name="__codelineno-9-131" href="#__codelineno-9-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-9-132" name="__codelineno-9-132" href="#__codelineno-9-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-9-133" name="__codelineno-9-133" href="#__codelineno-9-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-9-134" name="__codelineno-9-134" href="#__codelineno-9-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-135" name="__codelineno-9-135" href="#__codelineno-9-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-136" name="__codelineno-9-136" href="#__codelineno-9-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-9-137" name="__codelineno-9-137" href="#__codelineno-9-137"></a>
<a id="__codelineno-9-138" name="__codelineno-9-138" href="#__codelineno-9-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-9-139" name="__codelineno-9-139" href="#__codelineno-9-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-9-140" name="__codelineno-9-140" href="#__codelineno-9-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-9-141" name="__codelineno-9-141" href="#__codelineno-9-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-9-142" name="__codelineno-9-142" href="#__codelineno-9-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-9-143" name="__codelineno-9-143" href="#__codelineno-9-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-9-144" name="__codelineno-9-144" href="#__codelineno-9-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-9-145" name="__codelineno-9-145" href="#__codelineno-9-145"></a><span class="w">		</span><span class="c1">// Saturation of color upon appearance</span>
<a id="__codelineno-9-146" name="__codelineno-9-146" href="#__codelineno-9-146"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-147" name="__codelineno-9-147" href="#__codelineno-9-147"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
<a id="__codelineno-9-148" name="__codelineno-9-148" href="#__codelineno-9-148"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-9-149" name="__codelineno-9-149" href="#__codelineno-9-149"></a><span class="w">			</span><span class="n">baseColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// Bright immediately after appearing, gradually converges to base color</span>
<a id="__codelineno-9-150" name="__codelineno-9-150" href="#__codelineno-9-150"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-151" name="__codelineno-9-151" href="#__codelineno-9-151"></a><span class="w">		</span><span class="c1">// Fade out at the end</span>
<a id="__codelineno-9-152" name="__codelineno-9-152" href="#__codelineno-9-152"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-153" name="__codelineno-9-153" href="#__codelineno-9-153"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">Lifetime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 0.0 -&gt; 1.0 from 0.2s before end to Lifetime</span>
<a id="__codelineno-9-154" name="__codelineno-9-154" href="#__codelineno-9-154"></a><span class="w">			</span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-9-155" name="__codelineno-9-155" href="#__codelineno-9-155"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-156" name="__codelineno-9-156" href="#__codelineno-9-156"></a>
<a id="__codelineno-9-157" name="__codelineno-9-157" href="#__codelineno-9-157"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-9-158" name="__codelineno-9-158" href="#__codelineno-9-158"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-9-159" name="__codelineno-9-159" href="#__codelineno-9-159"></a><span class="w">		</span><span class="c1">// Size change upon appearance</span>
<a id="__codelineno-9-160" name="__codelineno-9-160" href="#__codelineno-9-160"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-161" name="__codelineno-9-161" href="#__codelineno-9-161"></a><span class="w">			</span><span class="c1">// Extra size based on digits</span>
<a id="__codelineno-9-162" name="__codelineno-9-162" href="#__codelineno-9-162"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">extraSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">20.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">40.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">80.0</span><span class="p">;</span>
<a id="__codelineno-9-163" name="__codelineno-9-163" href="#__codelineno-9-163"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
<a id="__codelineno-9-164" name="__codelineno-9-164" href="#__codelineno-9-164"></a><span class="w">			</span><span class="n">baseSize</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">extraSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Large immediately after appearing, gradually converges to base size</span>
<a id="__codelineno-9-165" name="__codelineno-9-165" href="#__codelineno-9-165"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-166" name="__codelineno-9-166" href="#__codelineno-9-166"></a>
<a id="__codelineno-9-167" name="__codelineno-9-167" href="#__codelineno-9-167"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-9-168" name="__codelineno-9-168" href="#__codelineno-9-168"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-9-169" name="__codelineno-9-169" href="#__codelineno-9-169"></a><span class="w">		</span><span class="c1">// Rise from midway</span>
<a id="__codelineno-9-170" name="__codelineno-9-170" href="#__codelineno-9-170"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-171" name="__codelineno-9-171" href="#__codelineno-9-171"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Time elapsed since 0.2s</span>
<a id="__codelineno-9-172" name="__codelineno-9-172" href="#__codelineno-9-172"></a><span class="w">			</span><span class="n">basePos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="mf">120.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-9-173" name="__codelineno-9-173" href="#__codelineno-9-173"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-174" name="__codelineno-9-174" href="#__codelineno-9-174"></a>
<a id="__codelineno-9-175" name="__codelineno-9-175" href="#__codelineno-9-175"></a><span class="hll"><span class="w">		</span><span class="c1">// Convert number to string</span>
</span><a id="__codelineno-9-176" name="__codelineno-9-176" href="#__codelineno-9-176"></a><span class="hll"><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Format</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">);</span>
</span><a id="__codelineno-9-177" name="__codelineno-9-177" href="#__codelineno-9-177"></a>
<a id="__codelineno-9-178" name="__codelineno-9-178" href="#__codelineno-9-178"></a><span class="hll"><span class="w">		</span><span class="c1">// String position offset (for centering)</span>
</span><a id="__codelineno-9-179" name="__codelineno-9-179" href="#__codelineno-9-179"></a><span class="hll"><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_font</span><span class="p">(</span><span class="n">text</span><span class="p">).</span><span class="n">region</span><span class="p">(</span><span class="n">baseSize</span><span class="p">).</span><span class="n">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><a id="__codelineno-9-180" name="__codelineno-9-180" href="#__codelineno-9-180"></a>
<a id="__codelineno-9-181" name="__codelineno-9-181" href="#__codelineno-9-181"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-9-182" name="__codelineno-9-182" href="#__codelineno-9-182"></a><span class="hll"><span class="w">		</span><span class="c1">//m_font(m_hit.amount).drawAt(baseSize, basePos, baseColor);</span>
</span><a id="__codelineno-9-183" name="__codelineno-9-183" href="#__codelineno-9-183"></a><span class="hll"><span class="w">		</span><span class="c1">// Draw with vertical gradient: Intense White -&gt; baseColor</span>
</span><a id="__codelineno-9-184" name="__codelineno-9-184" href="#__codelineno-9-184"></a><span class="hll"><span class="w">		</span><span class="n">DrawGlyphs</span><span class="p">(</span><span class="n">m_font</span><span class="p">,</span><span class="w"> </span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Default</span><span class="p">(),</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">basePos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">offset</span><span class="p">),</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.2</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">baseColor</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><a id="__codelineno-9-185" name="__codelineno-9-185" href="#__codelineno-9-185"></a>
<a id="__codelineno-9-186" name="__codelineno-9-186" href="#__codelineno-9-186"></a><span class="w">		</span><span class="c1">// Draw number outline</span>
<a id="__codelineno-9-187" name="__codelineno-9-187" href="#__codelineno-9-187"></a><span class="hll"><span class="w">		</span><span class="c1">//m_font(m_hit.amount).drawAt(TextStyle::Outline(0.0, 0.16, ColorF{ 0.0, baseColor.a }), baseSize, basePos, ColorF{ 0.0, 0.0 });</span>
</span><a id="__codelineno-9-188" name="__codelineno-9-188" href="#__codelineno-9-188"></a><span class="hll"><span class="w">		</span><span class="c1">// Draw outline without gradient</span>
</span><a id="__codelineno-9-189" name="__codelineno-9-189" href="#__codelineno-9-189"></a><span class="hll"><span class="w">		</span><span class="n">DrawGlyphs</span><span class="p">(</span><span class="n">m_font</span><span class="p">,</span><span class="w"> </span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">basePos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">offset</span><span class="p">),</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</span><a id="__codelineno-9-190" name="__codelineno-9-190" href="#__codelineno-9-190"></a>
<a id="__codelineno-9-191" name="__codelineno-9-191" href="#__codelineno-9-191"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-9-192" name="__codelineno-9-192" href="#__codelineno-9-192"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-9-193" name="__codelineno-9-193" href="#__codelineno-9-193"></a>
<a id="__codelineno-9-194" name="__codelineno-9-194" href="#__codelineno-9-194"></a><span class="hll"><span class="w">	</span><span class="c1">// Low-level text drawing: draws character textures one by one</span>
</span><a id="__codelineno-9-195" name="__codelineno-9-195" href="#__codelineno-9-195"></a><span class="hll"><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">DrawGlyphs</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TextStyle</span><span class="o">&amp;</span><span class="w"> </span><span class="n">textStyle</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">String</span><span class="o">&amp;</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">fontSize</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span>
</span><a id="__codelineno-9-196" name="__codelineno-9-196" href="#__codelineno-9-196"></a><span class="hll"><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">ColorF</span><span class="o">&amp;</span><span class="w"> </span><span class="n">topColor</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ColorF</span><span class="o">&amp;</span><span class="w"> </span><span class="n">bottomColor</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
</span><a id="__codelineno-9-197" name="__codelineno-9-197" href="#__codelineno-9-197"></a><span class="hll"><span class="w">	</span><span class="p">{</span>
</span><a id="__codelineno-9-198" name="__codelineno-9-198" href="#__codelineno-9-198"></a><span class="hll"><span class="w">		</span><span class="c1">// Various settings</span>
</span><a id="__codelineno-9-199" name="__codelineno-9-199" href="#__codelineno-9-199"></a><span class="hll"><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Glyph</span><span class="o">&gt;</span><span class="w"> </span><span class="n">glyphs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">font</span><span class="p">.</span><span class="n">getGlyphs</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
</span><a id="__codelineno-9-200" name="__codelineno-9-200" href="#__codelineno-9-200"></a><span class="hll"><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">fontSize</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">font</span><span class="p">.</span><span class="n">fontSize</span><span class="p">());</span>
</span><a id="__codelineno-9-201" name="__codelineno-9-201" href="#__codelineno-9-201"></a><span class="hll"><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">ScopedCustomShader2D</span><span class="w"> </span><span class="n">shader</span><span class="p">{</span><span class="w"> </span><span class="n">Font</span><span class="o">::</span><span class="n">GetPixelShader</span><span class="p">(</span><span class="n">font</span><span class="p">.</span><span class="n">method</span><span class="p">(),</span><span class="w"> </span><span class="n">textStyle</span><span class="p">.</span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">};</span>
</span><a id="__codelineno-9-202" name="__codelineno-9-202" href="#__codelineno-9-202"></a><span class="hll"><span class="w">		</span><span class="n">Graphics2D</span><span class="o">::</span><span class="n">SetMSDFParameters</span><span class="p">(</span><span class="n">textStyle</span><span class="p">);</span>
</span><a id="__codelineno-9-203" name="__codelineno-9-203" href="#__codelineno-9-203"></a><span class="hll">
</span><a id="__codelineno-9-204" name="__codelineno-9-204" href="#__codelineno-9-204"></a><span class="hll"><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">penPos</span><span class="p">{</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="p">};</span>
</span><a id="__codelineno-9-205" name="__codelineno-9-205" href="#__codelineno-9-205"></a><span class="hll">
</span><a id="__codelineno-9-206" name="__codelineno-9-206" href="#__codelineno-9-206"></a><span class="hll"><span class="w">		</span><span class="c1">// Loop to draw character textures</span>
</span><a id="__codelineno-9-207" name="__codelineno-9-207" href="#__codelineno-9-207"></a><span class="hll"><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">glyphs</span><span class="p">)</span>
</span><a id="__codelineno-9-208" name="__codelineno-9-208" href="#__codelineno-9-208"></a><span class="hll"><span class="w">		</span><span class="p">{</span>
</span><a id="__codelineno-9-209" name="__codelineno-9-209" href="#__codelineno-9-209"></a><span class="hll"><span class="w">			</span><span class="c1">// Draw character texture</span>
</span><a id="__codelineno-9-210" name="__codelineno-9-210" href="#__codelineno-9-210"></a><span class="hll"><span class="w">			</span><span class="n">glyph</span><span class="p">.</span><span class="n">texture</span><span class="p">.</span><span class="n">scaled</span><span class="p">(</span><span class="n">scale</span><span class="p">).</span><span class="n">draw</span><span class="p">((</span><span class="n">penPos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">glyph</span><span class="p">.</span><span class="n">getOffset</span><span class="p">(</span><span class="n">scale</span><span class="p">)),</span>
</span><a id="__codelineno-9-211" name="__codelineno-9-211" href="#__codelineno-9-211"></a><span class="hll"><span class="w">				</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">topColor</span><span class="p">,</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bottomColor</span><span class="p">);</span><span class="w"> </span><span class="c1">// Draw with vertical gradient</span>
</span><a id="__codelineno-9-212" name="__codelineno-9-212" href="#__codelineno-9-212"></a><span class="hll">
</span><a id="__codelineno-9-213" name="__codelineno-9-213" href="#__codelineno-9-213"></a><span class="hll"><span class="w">			</span><span class="c1">// Advance pen X position by character width</span>
</span><a id="__codelineno-9-214" name="__codelineno-9-214" href="#__codelineno-9-214"></a><span class="hll"><span class="w">			</span><span class="n">penPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">glyph</span><span class="p">.</span><span class="n">xAdvance</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">scale</span><span class="p">);</span>
</span><a id="__codelineno-9-215" name="__codelineno-9-215" href="#__codelineno-9-215"></a><span class="hll"><span class="w">		</span><span class="p">}</span>
</span><a id="__codelineno-9-216" name="__codelineno-9-216" href="#__codelineno-9-216"></a><span class="hll"><span class="w">	</span><span class="p">}</span>
</span><a id="__codelineno-9-217" name="__codelineno-9-217" href="#__codelineno-9-217"></a><span class="p">};</span>
<a id="__codelineno-9-218" name="__codelineno-9-218" href="#__codelineno-9-218"></a>
<a id="__codelineno-9-219" name="__codelineno-9-219" href="#__codelineno-9-219"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-9-220" name="__codelineno-9-220" href="#__codelineno-9-220"></a><span class="p">{</span>
<a id="__codelineno-9-221" name="__codelineno-9-221" href="#__codelineno-9-221"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-9-222" name="__codelineno-9-222" href="#__codelineno-9-222"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-9-223" name="__codelineno-9-223" href="#__codelineno-9-223"></a>
<a id="__codelineno-9-224" name="__codelineno-9-224" href="#__codelineno-9-224"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-9-225" name="__codelineno-9-225" href="#__codelineno-9-225"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-226" name="__codelineno-9-226" href="#__codelineno-9-226"></a>
<a id="__codelineno-9-227" name="__codelineno-9-227" href="#__codelineno-9-227"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-9-228" name="__codelineno-9-228" href="#__codelineno-9-228"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-229" name="__codelineno-9-229" href="#__codelineno-9-229"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-230" name="__codelineno-9-230" href="#__codelineno-9-230"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-231" name="__codelineno-9-231" href="#__codelineno-9-231"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-232" name="__codelineno-9-232" href="#__codelineno-9-232"></a>
<a id="__codelineno-9-233" name="__codelineno-9-233" href="#__codelineno-9-233"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-9-234" name="__codelineno-9-234" href="#__codelineno-9-234"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-235" name="__codelineno-9-235" href="#__codelineno-9-235"></a>
<a id="__codelineno-9-236" name="__codelineno-9-236" href="#__codelineno-9-236"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-9-237" name="__codelineno-9-237" href="#__codelineno-9-237"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-9-238" name="__codelineno-9-238" href="#__codelineno-9-238"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-9-239" name="__codelineno-9-239" href="#__codelineno-9-239"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-9-240" name="__codelineno-9-240" href="#__codelineno-9-240"></a>
<a id="__codelineno-9-241" name="__codelineno-9-241" href="#__codelineno-9-241"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-9-242" name="__codelineno-9-242" href="#__codelineno-9-242"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="p">,</span><span class="w"> </span><span class="n">FontStyle</span><span class="o">::</span><span class="n">Italic</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-9-243" name="__codelineno-9-243" href="#__codelineno-9-243"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-9-244" name="__codelineno-9-244" href="#__codelineno-9-244"></a>
<a id="__codelineno-9-245" name="__codelineno-9-245" href="#__codelineno-9-245"></a><span class="w">	</span><span class="c1">// Hit info queue</span>
<a id="__codelineno-9-246" name="__codelineno-9-246" href="#__codelineno-9-246"></a><span class="w">	</span><span class="n">std</span><span class="o">::</span><span class="n">queue</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">;</span>
<a id="__codelineno-9-247" name="__codelineno-9-247" href="#__codelineno-9-247"></a><span class="w">	</span><span class="c1">// Minimum interval for issuing hit effects (seconds)</span>
<a id="__codelineno-9-248" name="__codelineno-9-248" href="#__codelineno-9-248"></a><span class="w">	</span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">hitInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.04</span><span class="p">;</span>
<a id="__codelineno-9-249" name="__codelineno-9-249" href="#__codelineno-9-249"></a><span class="w">	</span><span class="c1">// Time elapsed since the last hit effect was issued (seconds)</span>
<a id="__codelineno-9-250" name="__codelineno-9-250" href="#__codelineno-9-250"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<a id="__codelineno-9-251" name="__codelineno-9-251" href="#__codelineno-9-251"></a>
<a id="__codelineno-9-252" name="__codelineno-9-252" href="#__codelineno-9-252"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-9-253" name="__codelineno-9-253" href="#__codelineno-9-253"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-9-254" name="__codelineno-9-254" href="#__codelineno-9-254"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-9-255" name="__codelineno-9-255" href="#__codelineno-9-255"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-256" name="__codelineno-9-256" href="#__codelineno-9-256"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-9-257" name="__codelineno-9-257" href="#__codelineno-9-257"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-9-258" name="__codelineno-9-258" href="#__codelineno-9-258"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-259" name="__codelineno-9-259" href="#__codelineno-9-259"></a>
<a id="__codelineno-9-260" name="__codelineno-9-260" href="#__codelineno-9-260"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-9-261" name="__codelineno-9-261" href="#__codelineno-9-261"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-262" name="__codelineno-9-262" href="#__codelineno-9-262"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-9-263" name="__codelineno-9-263" href="#__codelineno-9-263"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-9-264" name="__codelineno-9-264" href="#__codelineno-9-264"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-265" name="__codelineno-9-265" href="#__codelineno-9-265"></a>
<a id="__codelineno-9-266" name="__codelineno-9-266" href="#__codelineno-9-266"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-9-267" name="__codelineno-9-267" href="#__codelineno-9-267"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-9-268" name="__codelineno-9-268" href="#__codelineno-9-268"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-269" name="__codelineno-9-269" href="#__codelineno-9-269"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-9-270" name="__codelineno-9-270" href="#__codelineno-9-270"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-9-271" name="__codelineno-9-271" href="#__codelineno-9-271"></a>
<a id="__codelineno-9-272" name="__codelineno-9-272" href="#__codelineno-9-272"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-9-273" name="__codelineno-9-273" href="#__codelineno-9-273"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-9-274" name="__codelineno-9-274" href="#__codelineno-9-274"></a>
<a id="__codelineno-9-275" name="__codelineno-9-275" href="#__codelineno-9-275"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-9-276" name="__codelineno-9-276" href="#__codelineno-9-276"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-9-277" name="__codelineno-9-277" href="#__codelineno-9-277"></a>
<a id="__codelineno-9-278" name="__codelineno-9-278" href="#__codelineno-9-278"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-9-279" name="__codelineno-9-279" href="#__codelineno-9-279"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-9-280" name="__codelineno-9-280" href="#__codelineno-9-280"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-281" name="__codelineno-9-281" href="#__codelineno-9-281"></a>
<a id="__codelineno-9-282" name="__codelineno-9-282" href="#__codelineno-9-282"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-9-283" name="__codelineno-9-283" href="#__codelineno-9-283"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-284" name="__codelineno-9-284" href="#__codelineno-9-284"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-9-285" name="__codelineno-9-285" href="#__codelineno-9-285"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-9-286" name="__codelineno-9-286" href="#__codelineno-9-286"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-9-287" name="__codelineno-9-287" href="#__codelineno-9-287"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-288" name="__codelineno-9-288" href="#__codelineno-9-288"></a>
<a id="__codelineno-9-289" name="__codelineno-9-289" href="#__codelineno-9-289"></a><span class="w">		</span><span class="c1">// Add issued hit info to queue</span>
<a id="__codelineno-9-290" name="__codelineno-9-290" href="#__codelineno-9-290"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-9-291" name="__codelineno-9-291" href="#__codelineno-9-291"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-292" name="__codelineno-9-292" href="#__codelineno-9-292"></a><span class="w">			</span><span class="n">hitQueue</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">hit</span><span class="p">);</span>
<a id="__codelineno-9-293" name="__codelineno-9-293" href="#__codelineno-9-293"></a><span class="w">			</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitInterval</span><span class="p">;</span><span class="w"> </span><span class="c1">// Pad time so new hits trigger effect immediately</span>
<a id="__codelineno-9-294" name="__codelineno-9-294" href="#__codelineno-9-294"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-9-295" name="__codelineno-9-295" href="#__codelineno-9-295"></a><span class="w">			</span><span class="c1">//effectManager.add&lt;DamageNumber&gt;(hit, RandomVec2(targetQuad), font);</span>
<a id="__codelineno-9-296" name="__codelineno-9-296" href="#__codelineno-9-296"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-297" name="__codelineno-9-297" href="#__codelineno-9-297"></a>
<a id="__codelineno-9-298" name="__codelineno-9-298" href="#__codelineno-9-298"></a><span class="w">		</span><span class="c1">// Process queue and issue effects</span>
<a id="__codelineno-9-299" name="__codelineno-9-299" href="#__codelineno-9-299"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-300" name="__codelineno-9-300" href="#__codelineno-9-300"></a><span class="w">			</span><span class="c1">// Accumulate time</span>
<a id="__codelineno-9-301" name="__codelineno-9-301" href="#__codelineno-9-301"></a><span class="w">			</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">Scene</span><span class="o">::</span><span class="n">DeltaTime</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-9-302" name="__codelineno-9-302" href="#__codelineno-9-302"></a>
<a id="__codelineno-9-303" name="__codelineno-9-303" href="#__codelineno-9-303"></a><span class="w">			</span><span class="c1">// Issue effects from the queue at fixed intervals</span>
<a id="__codelineno-9-304" name="__codelineno-9-304" href="#__codelineno-9-304"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hitInterval</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">accumulatedTime</span><span class="p">)</span>
<a id="__codelineno-9-305" name="__codelineno-9-305" href="#__codelineno-9-305"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-9-306" name="__codelineno-9-306" href="#__codelineno-9-306"></a><span class="w">				</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">not</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
<a id="__codelineno-9-307" name="__codelineno-9-307" href="#__codelineno-9-307"></a><span class="w">				</span><span class="p">{</span>
<a id="__codelineno-9-308" name="__codelineno-9-308" href="#__codelineno-9-308"></a><span class="w">					</span><span class="c1">// Get hit info from front of queue</span>
<a id="__codelineno-9-309" name="__codelineno-9-309" href="#__codelineno-9-309"></a><span class="w">					</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">front</span><span class="p">();</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<a id="__codelineno-9-310" name="__codelineno-9-310" href="#__codelineno-9-310"></a><span class="w">					</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-9-311" name="__codelineno-9-311" href="#__codelineno-9-311"></a><span class="w">					</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-9-312" name="__codelineno-9-312" href="#__codelineno-9-312"></a><span class="w">					</span><span class="c1">// Reduce accumulated time</span>
<a id="__codelineno-9-313" name="__codelineno-9-313" href="#__codelineno-9-313"></a><span class="w">					</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">hitInterval</span><span class="p">;</span>
<a id="__codelineno-9-314" name="__codelineno-9-314" href="#__codelineno-9-314"></a><span class="w">				</span><span class="p">}</span>
<a id="__codelineno-9-315" name="__codelineno-9-315" href="#__codelineno-9-315"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-9-316" name="__codelineno-9-316" href="#__codelineno-9-316"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-317" name="__codelineno-9-317" href="#__codelineno-9-317"></a>
<a id="__codelineno-9-318" name="__codelineno-9-318" href="#__codelineno-9-318"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-9-319" name="__codelineno-9-319" href="#__codelineno-9-319"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-9-320" name="__codelineno-9-320" href="#__codelineno-9-320"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-9-321" name="__codelineno-9-321" href="#__codelineno-9-321"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-9-322" name="__codelineno-9-322" href="#__codelineno-9-322"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-9-323" name="__codelineno-9-323" href="#__codelineno-9-323"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-9-324" name="__codelineno-9-324" href="#__codelineno-9-324"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="11-character-level-motion">11. Character-level Motion<a class="headerlink" href="#11-character-level-motion" title="Permanent link">&para;</a></h2>
<ul>
<li>When massive damage (3 digits or more) occurs, we apply motion to each character individually.</li>
<li>By adding a wave-like motion with staggered timing for each character, numbers with many digits will appear to move dynamically on the screen.</li>
<li>This conveys to the player through the intensity of the movement that special damage has occurred.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/Siv3D/siv3d.site.resource/main/study/2025/23/11.png" /></p>
<details class="note">
<summary>Code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cp">#</span><span class="w"> </span><span class="cp">include</span><span class="w"> </span><span class="cpf">&lt;Siv3D.hpp&gt;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">AttackType</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">{</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">	</span><span class="c1">/// @brief Physical</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">	</span><span class="n">Physical</span><span class="p">,</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">	</span><span class="c1">/// @brief Fire</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">	</span><span class="n">Fire</span><span class="p">,</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">	</span><span class="c1">/// @brief Thunder</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">	</span><span class="n">Thunder</span><span class="p">,</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">	</span><span class="c1">/// @brief Ice</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">	</span><span class="n">Ice</span><span class="p">,</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="p">};</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="c1">/// @brief Information for a single hit</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Hit</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="p">{</span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">	</span><span class="c1">/// @brief Attack Attribute</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">	</span><span class="c1">/// @brief Damage Amount</span>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">	</span><span class="n">int32</span><span class="w"> </span><span class="n">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">	</span><span class="c1">/// @brief Critical Hit</span>
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="p">};</span>
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="c1">/// @brief Damage Input Pad</span>
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a><span class="k">class</span><span class="w"> </span><span class="nc">DamagePad</span>
<a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="p">{</span>
<a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a><span class="w">	</span><span class="c1">/// @brief Pad Width (pixels)</span>
<a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a>
<a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a><span class="w">	</span><span class="c1">/// @brief Pad Height (pixels)</span>
<a id="__codelineno-10-41" name="__codelineno-10-41" href="#__codelineno-10-41"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">150</span><span class="p">;</span>
<a id="__codelineno-10-42" name="__codelineno-10-42" href="#__codelineno-10-42"></a>
<a id="__codelineno-10-43" name="__codelineno-10-43" href="#__codelineno-10-43"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-10-44" name="__codelineno-10-44" href="#__codelineno-10-44"></a><span class="w">	</span><span class="c1">/// @param pos Position of the pad</span>
<a id="__codelineno-10-45" name="__codelineno-10-45" href="#__codelineno-10-45"></a><span class="w">	</span><span class="c1">/// @param type Attack attribute of the pad</span>
<a id="__codelineno-10-46" name="__codelineno-10-46" href="#__codelineno-10-46"></a><span class="w">	</span><span class="n">DamagePad</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">AttackType</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
<a id="__codelineno-10-47" name="__codelineno-10-47" href="#__codelineno-10-47"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Width</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-10-48" name="__codelineno-10-48" href="#__codelineno-10-48"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_type</span><span class="p">{</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-10-49" name="__codelineno-10-49" href="#__codelineno-10-49"></a>
<a id="__codelineno-10-50" name="__codelineno-10-50" href="#__codelineno-10-50"></a><span class="w">	</span><span class="c1">/// @brief Update pad (issue hit on click) and draw</span>
<a id="__codelineno-10-51" name="__codelineno-10-51" href="#__codelineno-10-51"></a><span class="w">	</span><span class="c1">/// @return Array of issued hit information. Empty array if none issued.</span>
<a id="__codelineno-10-52" name="__codelineno-10-52" href="#__codelineno-10-52"></a><span class="w">	</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-10-53" name="__codelineno-10-53" href="#__codelineno-10-53"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-10-54" name="__codelineno-10-54" href="#__codelineno-10-54"></a><span class="w">		</span><span class="c1">// Draw pad</span>
<a id="__codelineno-10-55" name="__codelineno-10-55" href="#__codelineno-10-55"></a><span class="w">		</span><span class="n">m_rect</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-10-56" name="__codelineno-10-56" href="#__codelineno-10-56"></a>
<a id="__codelineno-10-57" name="__codelineno-10-57" href="#__codelineno-10-57"></a><span class="w">		</span><span class="c1">// Cursor position on the pad</span>
<a id="__codelineno-10-58" name="__codelineno-10-58" href="#__codelineno-10-58"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">cursorPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">pos</span><span class="p">);</span>
<a id="__codelineno-10-59" name="__codelineno-10-59" href="#__codelineno-10-59"></a>
<a id="__codelineno-10-60" name="__codelineno-10-60" href="#__codelineno-10-60"></a><span class="w">		</span><span class="c1">// Number of hits</span>
<a id="__codelineno-10-61" name="__codelineno-10-61" href="#__codelineno-10-61"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">cursorPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">40</span><span class="p">);</span>
<a id="__codelineno-10-62" name="__codelineno-10-62" href="#__codelineno-10-62"></a>
<a id="__codelineno-10-63" name="__codelineno-10-63" href="#__codelineno-10-63"></a><span class="w">		</span><span class="c1">// Base damage amount</span>
<a id="__codelineno-10-64" name="__codelineno-10-64" href="#__codelineno-10-64"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">baseDamage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">::</span><span class="n">Pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cursorPos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">50.0</span><span class="p">));</span>
<a id="__codelineno-10-65" name="__codelineno-10-65" href="#__codelineno-10-65"></a>
<a id="__codelineno-10-66" name="__codelineno-10-66" href="#__codelineno-10-66"></a><span class="w">		</span><span class="c1">// If cursor is over the pad</span>
<a id="__codelineno-10-67" name="__codelineno-10-67" href="#__codelineno-10-67"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">mouseOver</span><span class="p">())</span>
<a id="__codelineno-10-68" name="__codelineno-10-68" href="#__codelineno-10-68"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-69" name="__codelineno-10-69" href="#__codelineno-10-69"></a><span class="w">			</span><span class="c1">// Hide cursor</span>
<a id="__codelineno-10-70" name="__codelineno-10-70" href="#__codelineno-10-70"></a><span class="w">			</span><span class="n">Cursor</span><span class="o">::</span><span class="n">RequestStyle</span><span class="p">(</span><span class="n">CursorStyle</span><span class="o">::</span><span class="n">Hidden</span><span class="p">);</span>
<a id="__codelineno-10-71" name="__codelineno-10-71" href="#__codelineno-10-71"></a>
<a id="__codelineno-10-72" name="__codelineno-10-72" href="#__codelineno-10-72"></a><span class="w">			</span><span class="c1">// Draw pointer UI on the pad</span>
<a id="__codelineno-10-73" name="__codelineno-10-73" href="#__codelineno-10-73"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-10-74" name="__codelineno-10-74" href="#__codelineno-10-74"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-10-75" name="__codelineno-10-75" href="#__codelineno-10-75"></a><span class="w">				</span><span class="n">Cursor</span><span class="o">::</span><span class="n">Pos</span><span class="p">().</span><span class="n">asCircle</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-10-76" name="__codelineno-10-76" href="#__codelineno-10-76"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-10-77" name="__codelineno-10-77" href="#__codelineno-10-77"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-78" name="__codelineno-10-78" href="#__codelineno-10-78"></a>
<a id="__codelineno-10-79" name="__codelineno-10-79" href="#__codelineno-10-79"></a><span class="w">		</span><span class="c1">// Array to store issued hit information</span>
<a id="__codelineno-10-80" name="__codelineno-10-80" href="#__codelineno-10-80"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-10-81" name="__codelineno-10-81" href="#__codelineno-10-81"></a>
<a id="__codelineno-10-82" name="__codelineno-10-82" href="#__codelineno-10-82"></a><span class="w">		</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">leftClicked</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="c1">// If left or right clicked</span>
<a id="__codelineno-10-83" name="__codelineno-10-83" href="#__codelineno-10-83"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-84" name="__codelineno-10-84" href="#__codelineno-10-84"></a><span class="w">			</span><span class="c1">// Generate hit info for the number of hits and add to array</span>
<a id="__codelineno-10-85" name="__codelineno-10-85" href="#__codelineno-10-85"></a><span class="w">			</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
<a id="__codelineno-10-86" name="__codelineno-10-86" href="#__codelineno-10-86"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-10-87" name="__codelineno-10-87" href="#__codelineno-10-87"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_rect</span><span class="p">.</span><span class="n">rightClicked</span><span class="p">())</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Only the first hit is critical on right click</span>
<a id="__codelineno-10-88" name="__codelineno-10-88" href="#__codelineno-10-88"></a><span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="n">damage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="n">baseDamage</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Random</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">isCritical</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<a id="__codelineno-10-89" name="__codelineno-10-89" href="#__codelineno-10-89"></a><span class="w">				</span><span class="n">hits</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">Hit</span><span class="p">{</span><span class="w"> </span><span class="n">m_type</span><span class="p">,</span><span class="w"> </span><span class="n">damage</span><span class="p">,</span><span class="w"> </span><span class="n">isCritical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-90" name="__codelineno-10-90" href="#__codelineno-10-90"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-10-91" name="__codelineno-10-91" href="#__codelineno-10-91"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-92" name="__codelineno-10-92" href="#__codelineno-10-92"></a>
<a id="__codelineno-10-93" name="__codelineno-10-93" href="#__codelineno-10-93"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-10-94" name="__codelineno-10-94" href="#__codelineno-10-94"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-10-95" name="__codelineno-10-95" href="#__codelineno-10-95"></a>
<a id="__codelineno-10-96" name="__codelineno-10-96" href="#__codelineno-10-96"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-10-97" name="__codelineno-10-97" href="#__codelineno-10-97"></a>
<a id="__codelineno-10-98" name="__codelineno-10-98" href="#__codelineno-10-98"></a><span class="w">	</span><span class="c1">/// @brief Rectangular area of the pad</span>
<a id="__codelineno-10-99" name="__codelineno-10-99" href="#__codelineno-10-99"></a><span class="w">	</span><span class="n">Rect</span><span class="w"> </span><span class="n">m_rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-100" name="__codelineno-10-100" href="#__codelineno-10-100"></a>
<a id="__codelineno-10-101" name="__codelineno-10-101" href="#__codelineno-10-101"></a><span class="w">	</span><span class="c1">/// @brief Attack attribute of the pad</span>
<a id="__codelineno-10-102" name="__codelineno-10-102" href="#__codelineno-10-102"></a><span class="w">	</span><span class="n">AttackType</span><span class="w"> </span><span class="n">m_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">;</span>
<a id="__codelineno-10-103" name="__codelineno-10-103" href="#__codelineno-10-103"></a><span class="p">};</span>
<a id="__codelineno-10-104" name="__codelineno-10-104" href="#__codelineno-10-104"></a>
<a id="__codelineno-10-105" name="__codelineno-10-105" href="#__codelineno-10-105"></a><span class="c1">/// @brief Damage Display Effect</span>
<a id="__codelineno-10-106" name="__codelineno-10-106" href="#__codelineno-10-106"></a><span class="k">struct</span><span class="w"> </span><span class="nc">DamageNumber</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IEffect</span>
<a id="__codelineno-10-107" name="__codelineno-10-107" href="#__codelineno-10-107"></a><span class="p">{</span>
<a id="__codelineno-10-108" name="__codelineno-10-108" href="#__codelineno-10-108"></a><span class="w">	</span><span class="c1">/// @brief Effect lifetime (seconds)</span>
<a id="__codelineno-10-109" name="__codelineno-10-109" href="#__codelineno-10-109"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.8</span><span class="p">;</span>
<a id="__codelineno-10-110" name="__codelineno-10-110" href="#__codelineno-10-110"></a>
<a id="__codelineno-10-111" name="__codelineno-10-111" href="#__codelineno-10-111"></a><span class="w">	</span><span class="c1">/// @brief Base colors for each attribute</span>
<a id="__codelineno-10-112" name="__codelineno-10-112" href="#__codelineno-10-112"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="n">ColorF</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-10-113" name="__codelineno-10-113" href="#__codelineno-10-113"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-10-114" name="__codelineno-10-114" href="#__codelineno-10-114"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Physical</span>
<a id="__codelineno-10-115" name="__codelineno-10-115" href="#__codelineno-10-115"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Fire</span>
<a id="__codelineno-10-116" name="__codelineno-10-116" href="#__codelineno-10-116"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Thunder</span>
<a id="__codelineno-10-117" name="__codelineno-10-117" href="#__codelineno-10-117"></a><span class="w">		</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// Ice</span>
<a id="__codelineno-10-118" name="__codelineno-10-118" href="#__codelineno-10-118"></a><span class="w">	</span><span class="p">};</span>
<a id="__codelineno-10-119" name="__codelineno-10-119" href="#__codelineno-10-119"></a>
<a id="__codelineno-10-120" name="__codelineno-10-120" href="#__codelineno-10-120"></a><span class="w">	</span><span class="c1">/// @brief Hit information</span>
<a id="__codelineno-10-121" name="__codelineno-10-121" href="#__codelineno-10-121"></a><span class="w">	</span><span class="n">Hit</span><span class="w"> </span><span class="n">m_hit</span><span class="p">;</span>
<a id="__codelineno-10-122" name="__codelineno-10-122" href="#__codelineno-10-122"></a>
<a id="__codelineno-10-123" name="__codelineno-10-123" href="#__codelineno-10-123"></a><span class="w">	</span><span class="c1">/// @brief Effect start position</span>
<a id="__codelineno-10-124" name="__codelineno-10-124" href="#__codelineno-10-124"></a><span class="w">	</span><span class="n">Vec2</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-10-125" name="__codelineno-10-125" href="#__codelineno-10-125"></a>
<a id="__codelineno-10-126" name="__codelineno-10-126" href="#__codelineno-10-126"></a><span class="w">	</span><span class="c1">/// @brief Font</span>
<a id="__codelineno-10-127" name="__codelineno-10-127" href="#__codelineno-10-127"></a><span class="w">	</span><span class="n">Font</span><span class="w"> </span><span class="n">m_font</span><span class="p">;</span>
<a id="__codelineno-10-128" name="__codelineno-10-128" href="#__codelineno-10-128"></a>
<a id="__codelineno-10-129" name="__codelineno-10-129" href="#__codelineno-10-129"></a><span class="w">	</span><span class="c1">/// @brief Constructor</span>
<a id="__codelineno-10-130" name="__codelineno-10-130" href="#__codelineno-10-130"></a><span class="w">	</span><span class="c1">/// @param hit Hit information</span>
<a id="__codelineno-10-131" name="__codelineno-10-131" href="#__codelineno-10-131"></a><span class="w">	</span><span class="c1">/// @param start Effect start position</span>
<a id="__codelineno-10-132" name="__codelineno-10-132" href="#__codelineno-10-132"></a><span class="w">	</span><span class="c1">/// @param font Font</span>
<a id="__codelineno-10-133" name="__codelineno-10-133" href="#__codelineno-10-133"></a><span class="w">	</span><span class="n">DamageNumber</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">)</span>
<a id="__codelineno-10-134" name="__codelineno-10-134" href="#__codelineno-10-134"></a><span class="w">		</span><span class="o">:</span><span class="w"> </span><span class="n">m_hit</span><span class="p">{</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-10-135" name="__codelineno-10-135" href="#__codelineno-10-135"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_start</span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-10-136" name="__codelineno-10-136" href="#__codelineno-10-136"></a><span class="w">		</span><span class="p">,</span><span class="w"> </span><span class="n">m_font</span><span class="p">{</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">{}</span>
<a id="__codelineno-10-137" name="__codelineno-10-137" href="#__codelineno-10-137"></a>
<a id="__codelineno-10-138" name="__codelineno-10-138" href="#__codelineno-10-138"></a><span class="w">	</span><span class="c1">/// @brief Update and draw effect</span>
<a id="__codelineno-10-139" name="__codelineno-10-139" href="#__codelineno-10-139"></a><span class="w">	</span><span class="c1">/// @param t Time elapsed since generation (seconds)</span>
<a id="__codelineno-10-140" name="__codelineno-10-140" href="#__codelineno-10-140"></a><span class="w">	</span><span class="c1">/// @return true to continue effect, false to end</span>
<a id="__codelineno-10-141" name="__codelineno-10-141" href="#__codelineno-10-141"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">update</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">override</span>
<a id="__codelineno-10-142" name="__codelineno-10-142" href="#__codelineno-10-142"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-10-143" name="__codelineno-10-143" href="#__codelineno-10-143"></a><span class="w">		</span><span class="c1">// Base color according to attribute</span>
<a id="__codelineno-10-144" name="__codelineno-10-144" href="#__codelineno-10-144"></a><span class="w">		</span><span class="n">ColorF</span><span class="w"> </span><span class="n">baseColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BaseColors</span><span class="p">[</span><span class="n">FromEnum</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">type</span><span class="p">)];</span>
<a id="__codelineno-10-145" name="__codelineno-10-145" href="#__codelineno-10-145"></a><span class="w">		</span><span class="c1">// Saturation of color upon appearance</span>
<a id="__codelineno-10-146" name="__codelineno-10-146" href="#__codelineno-10-146"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-147" name="__codelineno-10-147" href="#__codelineno-10-147"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
<a id="__codelineno-10-148" name="__codelineno-10-148" href="#__codelineno-10-148"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-10-149" name="__codelineno-10-149" href="#__codelineno-10-149"></a><span class="w">			</span><span class="n">baseColor</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// Bright immediately after appearing, gradually converges to base color</span>
<a id="__codelineno-10-150" name="__codelineno-10-150" href="#__codelineno-10-150"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-151" name="__codelineno-10-151" href="#__codelineno-10-151"></a><span class="w">		</span><span class="c1">// Fade out at the end</span>
<a id="__codelineno-10-152" name="__codelineno-10-152" href="#__codelineno-10-152"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-153" name="__codelineno-10-153" href="#__codelineno-10-153"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">Lifetime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 0.0 -&gt; 1.0 from 0.2s before end to Lifetime</span>
<a id="__codelineno-10-154" name="__codelineno-10-154" href="#__codelineno-10-154"></a><span class="w">			</span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-10-155" name="__codelineno-10-155" href="#__codelineno-10-155"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-156" name="__codelineno-10-156" href="#__codelineno-10-156"></a>
<a id="__codelineno-10-157" name="__codelineno-10-157" href="#__codelineno-10-157"></a><span class="w">		</span><span class="c1">// Base size according to damage amount</span>
<a id="__codelineno-10-158" name="__codelineno-10-158" href="#__codelineno-10-158"></a><span class="w">		</span><span class="kt">double</span><span class="w"> </span><span class="n">baseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">56</span><span class="p">;</span>
<a id="__codelineno-10-159" name="__codelineno-10-159" href="#__codelineno-10-159"></a><span class="w">		</span><span class="c1">// Size change upon appearance</span>
<a id="__codelineno-10-160" name="__codelineno-10-160" href="#__codelineno-10-160"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-161" name="__codelineno-10-161" href="#__codelineno-10-161"></a><span class="w">			</span><span class="c1">// Extra size based on digits</span>
<a id="__codelineno-10-162" name="__codelineno-10-162" href="#__codelineno-10-162"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">extraSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">20.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mf">40.0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mf">80.0</span><span class="p">;</span>
<a id="__codelineno-10-163" name="__codelineno-10-163" href="#__codelineno-10-163"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="mf">0.1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Change 1.0 -&gt; 0.0 from 0.0s to 0.1s</span>
<a id="__codelineno-10-164" name="__codelineno-10-164" href="#__codelineno-10-164"></a><span class="w">			</span><span class="n">baseSize</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">extraSize</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Large immediately after appearing, gradually converges to base size</span>
<a id="__codelineno-10-165" name="__codelineno-10-165" href="#__codelineno-10-165"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-166" name="__codelineno-10-166" href="#__codelineno-10-166"></a>
<a id="__codelineno-10-167" name="__codelineno-10-167" href="#__codelineno-10-167"></a><span class="w">		</span><span class="c1">// Draw position</span>
<a id="__codelineno-10-168" name="__codelineno-10-168" href="#__codelineno-10-168"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_start</span><span class="p">;</span>
<a id="__codelineno-10-169" name="__codelineno-10-169" href="#__codelineno-10-169"></a><span class="w">		</span><span class="c1">// Rise from midway</span>
<a id="__codelineno-10-170" name="__codelineno-10-170" href="#__codelineno-10-170"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-171" name="__codelineno-10-171" href="#__codelineno-10-171"></a><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">((</span><span class="n">t</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Time elapsed since 0.2s</span>
<a id="__codelineno-10-172" name="__codelineno-10-172" href="#__codelineno-10-172"></a><span class="w">			</span><span class="n">basePos</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="p">(</span><span class="mf">120.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t2</span><span class="p">);</span>
<a id="__codelineno-10-173" name="__codelineno-10-173" href="#__codelineno-10-173"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-174" name="__codelineno-10-174" href="#__codelineno-10-174"></a>
<a id="__codelineno-10-175" name="__codelineno-10-175" href="#__codelineno-10-175"></a><span class="w">		</span><span class="c1">// Convert number to string</span>
<a id="__codelineno-10-176" name="__codelineno-10-176" href="#__codelineno-10-176"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Format</span><span class="p">(</span><span class="n">m_hit</span><span class="p">.</span><span class="n">amount</span><span class="p">);</span>
<a id="__codelineno-10-177" name="__codelineno-10-177" href="#__codelineno-10-177"></a>
<a id="__codelineno-10-178" name="__codelineno-10-178" href="#__codelineno-10-178"></a><span class="w">		</span><span class="c1">// String position offset (for centering)</span>
<a id="__codelineno-10-179" name="__codelineno-10-179" href="#__codelineno-10-179"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_font</span><span class="p">(</span><span class="n">text</span><span class="p">).</span><span class="n">region</span><span class="p">(</span><span class="n">baseSize</span><span class="p">).</span><span class="n">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-10-180" name="__codelineno-10-180" href="#__codelineno-10-180"></a>
<a id="__codelineno-10-181" name="__codelineno-10-181" href="#__codelineno-10-181"></a><span class="w">		</span><span class="c1">// Draw number</span>
<a id="__codelineno-10-182" name="__codelineno-10-182" href="#__codelineno-10-182"></a><span class="w">		</span><span class="c1">//m_font(m_hit.amount).drawAt(baseSize, basePos, baseColor);</span>
<a id="__codelineno-10-183" name="__codelineno-10-183" href="#__codelineno-10-183"></a><span class="w">		</span><span class="c1">// Draw with vertical gradient: Intense White -&gt; baseColor</span>
<a id="__codelineno-10-184" name="__codelineno-10-184" href="#__codelineno-10-184"></a><span class="w">		</span><span class="n">DrawGlyphs</span><span class="p">(</span><span class="n">m_font</span><span class="p">,</span><span class="w"> </span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Default</span><span class="p">(),</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">basePos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">offset</span><span class="p">),</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.2</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">baseColor</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-10-185" name="__codelineno-10-185" href="#__codelineno-10-185"></a>
<a id="__codelineno-10-186" name="__codelineno-10-186" href="#__codelineno-10-186"></a><span class="w">		</span><span class="c1">// Draw number outline</span>
<a id="__codelineno-10-187" name="__codelineno-10-187" href="#__codelineno-10-187"></a><span class="w">		</span><span class="c1">//m_font(m_hit.amount).drawAt(TextStyle::Outline(0.0, 0.16, ColorF{ 0.0, baseColor.a }), baseSize, basePos, ColorF{ 0.0, 0.0 });</span>
<a id="__codelineno-10-188" name="__codelineno-10-188" href="#__codelineno-10-188"></a><span class="w">		</span><span class="c1">// Draw outline without gradient</span>
<a id="__codelineno-10-189" name="__codelineno-10-189" href="#__codelineno-10-189"></a><span class="w">		</span><span class="n">DrawGlyphs</span><span class="p">(</span><span class="n">m_font</span><span class="p">,</span><span class="w"> </span><span class="n">TextStyle</span><span class="o">::</span><span class="n">Outline</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.16</span><span class="p">,</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">baseColor</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="p">}),</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">baseSize</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">basePos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">offset</span><span class="p">),</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-10-190" name="__codelineno-10-190" href="#__codelineno-10-190"></a>
<a id="__codelineno-10-191" name="__codelineno-10-191" href="#__codelineno-10-191"></a><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Lifetime</span><span class="p">);</span>
<a id="__codelineno-10-192" name="__codelineno-10-192" href="#__codelineno-10-192"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-10-193" name="__codelineno-10-193" href="#__codelineno-10-193"></a>
<a id="__codelineno-10-194" name="__codelineno-10-194" href="#__codelineno-10-194"></a><span class="w">	</span><span class="c1">// Low-level text drawing: draws character textures one by one</span>
<a id="__codelineno-10-195" name="__codelineno-10-195" href="#__codelineno-10-195"></a><span class="w">	</span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">DrawGlyphs</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="o">&amp;</span><span class="w"> </span><span class="n">font</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TextStyle</span><span class="o">&amp;</span><span class="w"> </span><span class="n">textStyle</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">String</span><span class="o">&amp;</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">fontSize</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Vec2</span><span class="o">&amp;</span><span class="w"> </span><span class="n">basePos</span><span class="p">,</span>
<a id="__codelineno-10-196" name="__codelineno-10-196" href="#__codelineno-10-196"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">ColorF</span><span class="o">&amp;</span><span class="w"> </span><span class="n">topColor</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ColorF</span><span class="o">&amp;</span><span class="w"> </span><span class="n">bottomColor</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<a id="__codelineno-10-197" name="__codelineno-10-197" href="#__codelineno-10-197"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-10-198" name="__codelineno-10-198" href="#__codelineno-10-198"></a><span class="w">		</span><span class="c1">// Various settings</span>
<a id="__codelineno-10-199" name="__codelineno-10-199" href="#__codelineno-10-199"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Glyph</span><span class="o">&gt;</span><span class="w"> </span><span class="n">glyphs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">font</span><span class="p">.</span><span class="n">getGlyphs</span><span class="p">(</span><span class="n">text</span><span class="p">);</span>
<a id="__codelineno-10-200" name="__codelineno-10-200" href="#__codelineno-10-200"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">fontSize</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">font</span><span class="p">.</span><span class="n">fontSize</span><span class="p">());</span>
<a id="__codelineno-10-201" name="__codelineno-10-201" href="#__codelineno-10-201"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">ScopedCustomShader2D</span><span class="w"> </span><span class="n">shader</span><span class="p">{</span><span class="w"> </span><span class="n">Font</span><span class="o">::</span><span class="n">GetPixelShader</span><span class="p">(</span><span class="n">font</span><span class="p">.</span><span class="n">method</span><span class="p">(),</span><span class="w"> </span><span class="n">textStyle</span><span class="p">.</span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-202" name="__codelineno-10-202" href="#__codelineno-10-202"></a><span class="w">		</span><span class="n">Graphics2D</span><span class="o">::</span><span class="n">SetMSDFParameters</span><span class="p">(</span><span class="n">textStyle</span><span class="p">);</span>
<a id="__codelineno-10-203" name="__codelineno-10-203" href="#__codelineno-10-203"></a>
<a id="__codelineno-10-204" name="__codelineno-10-204" href="#__codelineno-10-204"></a><span class="w">		</span><span class="n">Vec2</span><span class="w"> </span><span class="n">penPos</span><span class="p">{</span><span class="w"> </span><span class="n">basePos</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-205" name="__codelineno-10-205" href="#__codelineno-10-205"></a>
<a id="__codelineno-10-206" name="__codelineno-10-206" href="#__codelineno-10-206"></a><span class="w">		</span><span class="c1">// Loop to draw character textures</span>
<a id="__codelineno-10-207" name="__codelineno-10-207" href="#__codelineno-10-207"></a><span class="hll"><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">glyph</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">glyphs</span><span class="p">)</span><span class="w"> </span><span class="c1">// index is the character index</span>
</span><a id="__codelineno-10-208" name="__codelineno-10-208" href="#__codelineno-10-208"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-209" name="__codelineno-10-209" href="#__codelineno-10-209"></a><span class="hll"><span class="w">			</span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">waveIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">0.05</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span><span class="w"> </span><span class="c1">// Progress of wave (which character index is at the peak)</span>
</span><a id="__codelineno-10-210" name="__codelineno-10-210" href="#__codelineno-10-210"></a><span class="hll"><span class="w">			</span><span class="n">Vec2</span><span class="w"> </span><span class="n">offset</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
</span><a id="__codelineno-10-211" name="__codelineno-10-211" href="#__codelineno-10-211"></a><span class="hll"><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">text</span><span class="p">.</span><span class="n">size</span><span class="p">())</span><span class="w"> </span><span class="c1">// If massive damage (3 digits or more), apply wave animation</span>
</span><a id="__codelineno-10-212" name="__codelineno-10-212" href="#__codelineno-10-212"></a><span class="hll"><span class="w">			</span><span class="p">{</span>
</span><a id="__codelineno-10-213" name="__codelineno-10-213" href="#__codelineno-10-213"></a><span class="hll"><span class="w">				</span><span class="n">offset</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Max</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">AbsDiff</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">waveIndex</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">),</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">-6.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">scale</span><span class="p">;</span><span class="w"> </span><span class="c1">// Closer to peak wave means higher Y position</span>
</span><a id="__codelineno-10-214" name="__codelineno-10-214" href="#__codelineno-10-214"></a><span class="hll"><span class="w">			</span><span class="p">}</span>
</span><a id="__codelineno-10-215" name="__codelineno-10-215" href="#__codelineno-10-215"></a>
<a id="__codelineno-10-216" name="__codelineno-10-216" href="#__codelineno-10-216"></a><span class="w">			</span><span class="c1">// Draw character texture</span>
<a id="__codelineno-10-217" name="__codelineno-10-217" href="#__codelineno-10-217"></a><span class="hll"><span class="w">			</span><span class="n">glyph</span><span class="p">.</span><span class="n">texture</span><span class="p">.</span><span class="n">scaled</span><span class="p">(</span><span class="n">scale</span><span class="p">).</span><span class="n">draw</span><span class="p">((</span><span class="n">penPos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">glyph</span><span class="p">.</span><span class="n">getOffset</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="p">),</span>
</span><a id="__codelineno-10-218" name="__codelineno-10-218" href="#__codelineno-10-218"></a><span class="w">				</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">topColor</span><span class="p">,</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bottomColor</span><span class="p">);</span><span class="w"> </span><span class="c1">// Draw with vertical gradient</span>
<a id="__codelineno-10-219" name="__codelineno-10-219" href="#__codelineno-10-219"></a>
<a id="__codelineno-10-220" name="__codelineno-10-220" href="#__codelineno-10-220"></a><span class="w">			</span><span class="c1">// Advance pen X position by character width</span>
<a id="__codelineno-10-221" name="__codelineno-10-221" href="#__codelineno-10-221"></a><span class="w">			</span><span class="n">penPos</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">glyph</span><span class="p">.</span><span class="n">xAdvance</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">scale</span><span class="p">);</span>
<a id="__codelineno-10-222" name="__codelineno-10-222" href="#__codelineno-10-222"></a><span class="hll"><span class="w">			</span><span class="o">++</span><span class="n">index</span><span class="p">;</span>
</span><a id="__codelineno-10-223" name="__codelineno-10-223" href="#__codelineno-10-223"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-224" name="__codelineno-10-224" href="#__codelineno-10-224"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-10-225" name="__codelineno-10-225" href="#__codelineno-10-225"></a><span class="p">};</span>
<a id="__codelineno-10-226" name="__codelineno-10-226" href="#__codelineno-10-226"></a>
<a id="__codelineno-10-227" name="__codelineno-10-227" href="#__codelineno-10-227"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">()</span>
<a id="__codelineno-10-228" name="__codelineno-10-228" href="#__codelineno-10-228"></a><span class="p">{</span>
<a id="__codelineno-10-229" name="__codelineno-10-229" href="#__codelineno-10-229"></a><span class="w">	</span><span class="c1">// Set window size</span>
<a id="__codelineno-10-230" name="__codelineno-10-230" href="#__codelineno-10-230"></a><span class="w">	</span><span class="n">Window</span><span class="o">::</span><span class="n">Resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">720</span><span class="p">);</span>
<a id="__codelineno-10-231" name="__codelineno-10-231" href="#__codelineno-10-231"></a>
<a id="__codelineno-10-232" name="__codelineno-10-232" href="#__codelineno-10-232"></a><span class="w">	</span><span class="c1">// Enemy texture</span>
<a id="__codelineno-10-233" name="__codelineno-10-233" href="#__codelineno-10-233"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Texture</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">{</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;example/siv3d-kun.png&quot;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-234" name="__codelineno-10-234" href="#__codelineno-10-234"></a>
<a id="__codelineno-10-235" name="__codelineno-10-235" href="#__codelineno-10-235"></a><span class="w">	</span><span class="c1">// Damage input pads</span>
<a id="__codelineno-10-236" name="__codelineno-10-236" href="#__codelineno-10-236"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">PhysicalButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-237" name="__codelineno-10-237" href="#__codelineno-10-237"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">FireButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-238" name="__codelineno-10-238" href="#__codelineno-10-238"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">ThunderButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-239" name="__codelineno-10-239" href="#__codelineno-10-239"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">DamagePad</span><span class="w"> </span><span class="n">IceButton</span><span class="p">{</span><span class="w"> </span><span class="n">Point</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-240" name="__codelineno-10-240" href="#__codelineno-10-240"></a>
<a id="__codelineno-10-241" name="__codelineno-10-241" href="#__codelineno-10-241"></a><span class="w">	</span><span class="c1">// Area where effects occur</span>
<a id="__codelineno-10-242" name="__codelineno-10-242" href="#__codelineno-10-242"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Quad</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">{</span><span class="w"> </span><span class="mi">850</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">930</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">1100</span><span class="p">,</span><span class="w"> </span><span class="mi">560</span><span class="p">,</span><span class="w"> </span><span class="mi">750</span><span class="p">,</span><span class="w"> </span><span class="mi">460</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-10-243" name="__codelineno-10-243" href="#__codelineno-10-243"></a>
<a id="__codelineno-10-244" name="__codelineno-10-244" href="#__codelineno-10-244"></a><span class="w">	</span><span class="c1">// Debug flags</span>
<a id="__codelineno-10-245" name="__codelineno-10-245" href="#__codelineno-10-245"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showEnemy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-10-246" name="__codelineno-10-246" href="#__codelineno-10-246"></a><span class="w">	</span><span class="kt">bool</span><span class="w"> </span><span class="n">showTargetQuad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-10-247" name="__codelineno-10-247" href="#__codelineno-10-247"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">effectSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">;</span>
<a id="__codelineno-10-248" name="__codelineno-10-248" href="#__codelineno-10-248"></a>
<a id="__codelineno-10-249" name="__codelineno-10-249" href="#__codelineno-10-249"></a><span class="w">	</span><span class="c1">// Font for effect</span>
<a id="__codelineno-10-250" name="__codelineno-10-250" href="#__codelineno-10-250"></a><span class="w">	</span><span class="k">const</span><span class="w"> </span><span class="n">Font</span><span class="w"> </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Font</span><span class="p">{</span><span class="w"> </span><span class="n">FontMethod</span><span class="o">::</span><span class="n">MSDF</span><span class="p">,</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w"> </span><span class="n">Typeface</span><span class="o">::</span><span class="n">Heavy</span><span class="p">,</span><span class="w"> </span><span class="n">FontStyle</span><span class="o">::</span><span class="n">Italic</span><span class="w"> </span><span class="p">}.</span><span class="n">setBufferThickness</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<a id="__codelineno-10-251" name="__codelineno-10-251" href="#__codelineno-10-251"></a><span class="w">	</span><span class="n">Effect</span><span class="w"> </span><span class="n">effectManager</span><span class="p">;</span>
<a id="__codelineno-10-252" name="__codelineno-10-252" href="#__codelineno-10-252"></a>
<a id="__codelineno-10-253" name="__codelineno-10-253" href="#__codelineno-10-253"></a><span class="w">	</span><span class="c1">// Hit info queue</span>
<a id="__codelineno-10-254" name="__codelineno-10-254" href="#__codelineno-10-254"></a><span class="w">	</span><span class="n">std</span><span class="o">::</span><span class="n">queue</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">;</span>
<a id="__codelineno-10-255" name="__codelineno-10-255" href="#__codelineno-10-255"></a><span class="w">	</span><span class="c1">// Minimum interval for issuing hit effects (seconds)</span>
<a id="__codelineno-10-256" name="__codelineno-10-256" href="#__codelineno-10-256"></a><span class="w">	</span><span class="k">constexpr</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">hitInterval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.04</span><span class="p">;</span>
<a id="__codelineno-10-257" name="__codelineno-10-257" href="#__codelineno-10-257"></a><span class="w">	</span><span class="c1">// Time elapsed since the last hit effect was issued (seconds)</span>
<a id="__codelineno-10-258" name="__codelineno-10-258" href="#__codelineno-10-258"></a><span class="w">	</span><span class="kt">double</span><span class="w"> </span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span>
<a id="__codelineno-10-259" name="__codelineno-10-259" href="#__codelineno-10-259"></a>
<a id="__codelineno-10-260" name="__codelineno-10-260" href="#__codelineno-10-260"></a><span class="w">	</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">System</span><span class="o">::</span><span class="n">Update</span><span class="p">())</span>
<a id="__codelineno-10-261" name="__codelineno-10-261" href="#__codelineno-10-261"></a><span class="w">	</span><span class="p">{</span>
<a id="__codelineno-10-262" name="__codelineno-10-262" href="#__codelineno-10-262"></a><span class="w">		</span><span class="c1">// Draw background</span>
<a id="__codelineno-10-263" name="__codelineno-10-263" href="#__codelineno-10-263"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-264" name="__codelineno-10-264" href="#__codelineno-10-264"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">));</span><span class="w"> </span><span class="c1">// Sky gradient</span>
<a id="__codelineno-10-265" name="__codelineno-10-265" href="#__codelineno-10-265"></a><span class="w">			</span><span class="n">Rect</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">1280</span><span class="p">,</span><span class="w"> </span><span class="mi">220</span><span class="w"> </span><span class="p">}.</span><span class="n">draw</span><span class="p">(</span><span class="n">Arg</span><span class="o">::</span><span class="n">top</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">),</span><span class="w"> </span><span class="n">Arg</span><span class="o">::</span><span class="n">bottom</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">));</span><span class="w"> </span><span class="c1">// Ground gradient</span>
<a id="__codelineno-10-266" name="__codelineno-10-266" href="#__codelineno-10-266"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-267" name="__codelineno-10-267" href="#__codelineno-10-267"></a>
<a id="__codelineno-10-268" name="__codelineno-10-268" href="#__codelineno-10-268"></a><span class="w">		</span><span class="c1">// Draw enemy character</span>
<a id="__codelineno-10-269" name="__codelineno-10-269" href="#__codelineno-10-269"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-270" name="__codelineno-10-270" href="#__codelineno-10-270"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showEnemy</span><span class="p">)</span><span class="w"> </span><span class="n">enemyTexture</span><span class="p">.</span><span class="n">drawAt</span><span class="p">(</span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">920</span><span class="p">,</span><span class="w"> </span><span class="mi">360</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-10-271" name="__codelineno-10-271" href="#__codelineno-10-271"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">)</span><span class="w"> </span><span class="n">targetQuad</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">ColorF</span><span class="p">{</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="w"> </span><span class="p">}).</span><span class="n">drawFrame</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-10-272" name="__codelineno-10-272" href="#__codelineno-10-272"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-273" name="__codelineno-10-273" href="#__codelineno-10-273"></a>
<a id="__codelineno-10-274" name="__codelineno-10-274" href="#__codelineno-10-274"></a><span class="w">		</span><span class="c1">// Input attack</span>
<a id="__codelineno-10-275" name="__codelineno-10-275" href="#__codelineno-10-275"></a><span class="w">		</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">Hit</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hits</span><span class="p">;</span>
<a id="__codelineno-10-276" name="__codelineno-10-276" href="#__codelineno-10-276"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-277" name="__codelineno-10-277" href="#__codelineno-10-277"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Physical Damage </span><span class="se">\U000F04E5</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Physical</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-10-278" name="__codelineno-10-278" href="#__codelineno-10-278"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">PhysicalButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-10-279" name="__codelineno-10-279" href="#__codelineno-10-279"></a>
<a id="__codelineno-10-280" name="__codelineno-10-280" href="#__codelineno-10-280"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Fire Damage </span><span class="se">\U000F0238</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Fire</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-10-281" name="__codelineno-10-281" href="#__codelineno-10-281"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">FireButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-10-282" name="__codelineno-10-282" href="#__codelineno-10-282"></a>
<a id="__codelineno-10-283" name="__codelineno-10-283" href="#__codelineno-10-283"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Thunder Damage </span><span class="se">\U000F140C</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Thunder</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-10-284" name="__codelineno-10-284" href="#__codelineno-10-284"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ThunderButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-10-285" name="__codelineno-10-285" href="#__codelineno-10-285"></a>
<a id="__codelineno-10-286" name="__codelineno-10-286" href="#__codelineno-10-286"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Ice Damage </span><span class="se">\U000F0717</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">240</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">DamagePad</span><span class="o">::</span><span class="n">Width</span><span class="p">))</span><span class="w"> </span><span class="n">hits</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">AttackType</span><span class="o">::</span><span class="n">Ice</span><span class="p">,</span><span class="w"> </span><span class="n">Random</span><span class="o">&lt;</span><span class="n">int32</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">140</span><span class="p">),</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span>
<a id="__codelineno-10-287" name="__codelineno-10-287" href="#__codelineno-10-287"></a><span class="w">			</span><span class="n">hits</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">IceButton</span><span class="p">.</span><span class="n">update</span><span class="p">());</span>
<a id="__codelineno-10-288" name="__codelineno-10-288" href="#__codelineno-10-288"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-289" name="__codelineno-10-289" href="#__codelineno-10-289"></a>
<a id="__codelineno-10-290" name="__codelineno-10-290" href="#__codelineno-10-290"></a><span class="w">		</span><span class="c1">// Debug UI</span>
<a id="__codelineno-10-291" name="__codelineno-10-291" href="#__codelineno-10-291"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-292" name="__codelineno-10-292" href="#__codelineno-10-292"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">Slider</span><span class="p">(</span><span class="sa">U</span><span class="s">&quot;Effect Speed: x{:.2f}&quot;</span><span class="n">_fmt</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">),</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">620</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-10-293" name="__codelineno-10-293" href="#__codelineno-10-293"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showEnemy</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Enemy Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-10-294" name="__codelineno-10-294" href="#__codelineno-10-294"></a><span class="w">			</span><span class="n">SimpleGUI</span><span class="o">::</span><span class="n">CheckBox</span><span class="p">(</span><span class="n">showTargetQuad</span><span class="p">,</span><span class="w"> </span><span class="sa">U</span><span class="s">&quot;Target Range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Vec2</span><span class="p">{</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="mi">660</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="mi">200</span><span class="p">);</span>
<a id="__codelineno-10-295" name="__codelineno-10-295" href="#__codelineno-10-295"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-296" name="__codelineno-10-296" href="#__codelineno-10-296"></a>
<a id="__codelineno-10-297" name="__codelineno-10-297" href="#__codelineno-10-297"></a><span class="w">		</span><span class="c1">// Add issued hit info to queue</span>
<a id="__codelineno-10-298" name="__codelineno-10-298" href="#__codelineno-10-298"></a><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="o">&amp;</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">hits</span><span class="p">)</span>
<a id="__codelineno-10-299" name="__codelineno-10-299" href="#__codelineno-10-299"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-300" name="__codelineno-10-300" href="#__codelineno-10-300"></a><span class="w">			</span><span class="n">hitQueue</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">hit</span><span class="p">);</span>
<a id="__codelineno-10-301" name="__codelineno-10-301" href="#__codelineno-10-301"></a><span class="w">			</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitInterval</span><span class="p">;</span><span class="w"> </span><span class="c1">// Pad time so new hits trigger effect immediately</span>
<a id="__codelineno-10-302" name="__codelineno-10-302" href="#__codelineno-10-302"></a><span class="w">			</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-10-303" name="__codelineno-10-303" href="#__codelineno-10-303"></a><span class="w">			</span><span class="c1">//effectManager.add&lt;DamageNumber&gt;(hit, RandomVec2(targetQuad), font);</span>
<a id="__codelineno-10-304" name="__codelineno-10-304" href="#__codelineno-10-304"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-305" name="__codelineno-10-305" href="#__codelineno-10-305"></a>
<a id="__codelineno-10-306" name="__codelineno-10-306" href="#__codelineno-10-306"></a><span class="w">		</span><span class="c1">// Process queue and issue effects</span>
<a id="__codelineno-10-307" name="__codelineno-10-307" href="#__codelineno-10-307"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-308" name="__codelineno-10-308" href="#__codelineno-10-308"></a><span class="w">			</span><span class="c1">// Accumulate time</span>
<a id="__codelineno-10-309" name="__codelineno-10-309" href="#__codelineno-10-309"></a><span class="w">			</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="n">Scene</span><span class="o">::</span><span class="n">DeltaTime</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-10-310" name="__codelineno-10-310" href="#__codelineno-10-310"></a>
<a id="__codelineno-10-311" name="__codelineno-10-311" href="#__codelineno-10-311"></a><span class="w">			</span><span class="c1">// Issue effects from the queue at fixed intervals</span>
<a id="__codelineno-10-312" name="__codelineno-10-312" href="#__codelineno-10-312"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hitInterval</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">accumulatedTime</span><span class="p">)</span>
<a id="__codelineno-10-313" name="__codelineno-10-313" href="#__codelineno-10-313"></a><span class="w">			</span><span class="p">{</span>
<a id="__codelineno-10-314" name="__codelineno-10-314" href="#__codelineno-10-314"></a><span class="w">				</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">not</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
<a id="__codelineno-10-315" name="__codelineno-10-315" href="#__codelineno-10-315"></a><span class="w">				</span><span class="p">{</span>
<a id="__codelineno-10-316" name="__codelineno-10-316" href="#__codelineno-10-316"></a><span class="w">					</span><span class="c1">// Get hit info from front of queue</span>
<a id="__codelineno-10-317" name="__codelineno-10-317" href="#__codelineno-10-317"></a><span class="w">					</span><span class="k">const</span><span class="w"> </span><span class="n">Hit</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">front</span><span class="p">();</span><span class="w"> </span><span class="n">hitQueue</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<a id="__codelineno-10-318" name="__codelineno-10-318" href="#__codelineno-10-318"></a><span class="w">					</span><span class="c1">// Generate effect at a random position within the target range</span>
<a id="__codelineno-10-319" name="__codelineno-10-319" href="#__codelineno-10-319"></a><span class="w">					</span><span class="n">effectManager</span><span class="p">.</span><span class="n">add</span><span class="o">&lt;</span><span class="n">DamageNumber</span><span class="o">&gt;</span><span class="p">(</span><span class="n">hit</span><span class="p">,</span><span class="w"> </span><span class="n">RandomVec2</span><span class="p">(</span><span class="n">targetQuad</span><span class="p">),</span><span class="w"> </span><span class="n">font</span><span class="p">);</span>
<a id="__codelineno-10-320" name="__codelineno-10-320" href="#__codelineno-10-320"></a><span class="w">					</span><span class="c1">// Reduce accumulated time</span>
<a id="__codelineno-10-321" name="__codelineno-10-321" href="#__codelineno-10-321"></a><span class="w">					</span><span class="n">accumulatedTime</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">hitInterval</span><span class="p">;</span>
<a id="__codelineno-10-322" name="__codelineno-10-322" href="#__codelineno-10-322"></a><span class="w">				</span><span class="p">}</span>
<a id="__codelineno-10-323" name="__codelineno-10-323" href="#__codelineno-10-323"></a><span class="w">			</span><span class="p">}</span>
<a id="__codelineno-10-324" name="__codelineno-10-324" href="#__codelineno-10-324"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-325" name="__codelineno-10-325" href="#__codelineno-10-325"></a>
<a id="__codelineno-10-326" name="__codelineno-10-326" href="#__codelineno-10-326"></a><span class="w">		</span><span class="c1">// Update and draw effects</span>
<a id="__codelineno-10-327" name="__codelineno-10-327" href="#__codelineno-10-327"></a><span class="w">		</span><span class="p">{</span>
<a id="__codelineno-10-328" name="__codelineno-10-328" href="#__codelineno-10-328"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="n">effectSpeed</span><span class="p">);</span>
<a id="__codelineno-10-329" name="__codelineno-10-329" href="#__codelineno-10-329"></a><span class="w">			</span><span class="n">effectManager</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
<a id="__codelineno-10-330" name="__codelineno-10-330" href="#__codelineno-10-330"></a><span class="w">		</span><span class="p">}</span>
<a id="__codelineno-10-331" name="__codelineno-10-331" href="#__codelineno-10-331"></a><span class="w">	</span><span class="p">}</span>
<a id="__codelineno-10-332" name="__codelineno-10-332" href="#__codelineno-10-332"></a><span class="p">}</span>
</code></pre></div>
</details>
<h2 id="12-useful-tutorials">12. Useful Tutorials<a class="headerlink" href="#12-useful-tutorials" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../tutorial2/shape/" target="_blank">Tutorial 26. Drawing Shapes</a></li>
<li><a href="../../tutorial2/time/" target="_blank">Tutorial 30. Time and Motion</a><ul>
<li>Explains how to handle time and easing functions.</li>
</ul>
</li>
<li><a href="../../tutorial2/font/" target="_blank">Tutorial 34. Drawing Text</a></li>
<li><a href="../../tutorial2/random/" target="_blank">Tutorial 39. Random</a></li>
<li><a href="../../tutorial3/2d-render-state/" target="_blank">Tutorial 48. 2D Render States</a></li>
<li><a href="../../tutorial3/effect/" target="_blank">Tutorial 51. Effects</a><ul>
<li>Explains effects in general, including non-text effects. Can be added or applied to damage animations.</li>
</ul>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../quadwarp/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Creating a Perspective UI with QuadWarp">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Creating a Perspective UI with QuadWarp
              </div>
            </div>
          </a>
        
        
          
          <a href="../random-painting/" class="md-footer__link md-footer__link--next" aria-label="Next: Random Painting to Match a Reference">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Random Painting to Match a Reference
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2012 - 2025, Ryo Suzuki<br>Copyright (c) 2012 - 2025, OpenSiv3D Project
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>